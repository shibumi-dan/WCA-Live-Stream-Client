(this["webpackJsonpwca-live-client"]=this["webpackJsonpwca-live-client"]||[]).push([[0],{333:function(e,t,n){"use strict";var c=n(774),i=n(818),a=n(814),r=n(1),o=n(13),s=n(445),l=n.n(s),d=n(265),j=n.n(d),u=n(446),b=n.n(u),m=n(807),p=n(813),h=n(801),x=n(798),O=n(764),f=n(766),g=n(469),v=n(84),y=n(0);var w=function(e){let{competitionEvents:t,competitionId:n}=e;const[c,i]=Object(r.useState)(null);return Object(y.jsx)(p.a,{dense:!0,children:t.map((e=>Object(y.jsxs)(r.Fragment,{children:[Object(y.jsxs)(x.a,{button:!0,onClick:t=>function(e,t){i(c===t.id?null:t.id),e.stopPropagation()}(t,e),disabled:!e.rounds.some((e=>e.open)),children:[Object(y.jsx)(f.a,{children:Object(y.jsx)(v.a,{eventId:e.event.id})}),Object(y.jsx)(O.a,{primary:e.event.name})]}),Object(y.jsx)(m.a,{in:c===e.id,timeout:"auto",unmountOnExit:!0,onEntered:e=>{Object(g.a)(e,{behavior:"smooth",scrollMode:"if-needed",block:"end"})},children:Object(y.jsx)(p.a,{dense:!0,children:e.rounds.map((e=>Object(y.jsxs)(x.a,{button:!0,component:o.b,to:"/competitions/".concat(n,"/rounds/").concat(e.id),disabled:!e.open,children:[Object(y.jsx)(O.a,{primary:e.name}),e.label&&Object(y.jsx)(h.a,{label:e.label,size:"small",sx:{borderRadius:"6px",fontSize:"0.7em",fontWeight:500}})]},e.id)))})})]},e.id)))})};t.a=function(e){let{competition:t}=e;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(i.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:1},children:[Object(y.jsx)(a.a,{component:o.b,to:"/","aria-label":"Homepage",size:"large",children:Object(y.jsx)(l.a,{})}),Object(y.jsx)(a.a,{component:o.b,to:"/competitions/".concat(t.id,"/competitors"),"aria-label":"Competitor",size:"large",children:Object(y.jsx)(j.a,{})}),Object(y.jsx)(a.a,{component:o.b,to:"/competitions/".concat(t.id,"/podiums"),"aria-label":"Podiums",size:"large",children:Object(y.jsx)(b.a,{})})]}),Object(y.jsx)(c.a,{}),Object(y.jsx)(w,{competitionEvents:t.competitionEvents,competitionId:t.id})]})}},444:function(e,t,n){"use strict";(function(e){var c=n(477),i=n(705),a=n(80),r=n(709),o=n(700),s=n(1),l=n(333),d=n(467),j=n(0);const u=250,b={appBarShift:{width:{lg:"calc(100% - ".concat(u,"px)")},ml:{lg:"".concat(u,"px")}}};t.a=function(t){let{competition:n,children:m}=t;const p=Object(o.a)((e=>e.breakpoints.up("lg"))),[h,x]=Object(s.useState)(!1),O=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.a,{position:"sticky",sx:b.appBarShift,children:n&&Object(j.jsx)(d.a,{competition:n,onMenuClick:()=>x(!0)})}),p?Object(j.jsx)(a.a,{variant:"permanent",sx:{"& .MuiDrawer-paper":{width:{lg:u}}},children:n&&Object(j.jsx)(l.a,{competition:n})}):Object(j.jsx)(i.a,{open:h,onOpen:()=>x(!0),onClose:()=>x(!1),onClick:()=>x(!1),sx:{"& .MuiDrawer-paper":{width:{lg:u}}},disableBackdropTransition:!O,disableDiscovery:O,children:n&&Object(j.jsx)(l.a,{competition:n})}),Object(j.jsx)(c.a,{sx:{position:"relative",overflowY:"auto",py:{xs:2,md:3},px:{xs:1,md:3},...b.appBarShift},children:m})]})}}).call(this,n(197))},467:function(e,t,n){"use strict";var c=n(818),i=n(817),a=n(477),r=n(220),o=n(814),s=(n(1),n(23)),l=n(13),d=n(448),j=n.n(d),u=n(447),b=n.n(u),m=n(139),p=n.n(m),h=n(0);var x=function(e){let{competition:t}=e;return Object(h.jsx)(i.a,{title:"Update Stream",children:Object(h.jsx)(o.a,{color:"inherit",onClick:()=>{!async function(e){const t=JSON.stringify({model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"}]},payload:{competitionId:e.id,competitionName:e.shortName,eventName:e.competitionEvents[0].event.name,eventId:e.competitionEvents[0].event.id}});var n=new Headers;n.append("Content-Type","application/json"),fetch("https://app.singular.live/apiv1/datanodes/2Gtu4VucUktNoXOdJgAKd2/data",{method:"PUT",headers:n,body:t,redirect:"follow"}).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e)))}(t),console.log(t)},size:"large",children:Object(h.jsx)(p.a,{})})})};t.a=function(e){let{competition:t,onMenuClick:n}=e;const d=Object(s.f)();return Object(h.jsxs)(c.a,{children:[Object(h.jsx)(o.a,{color:"inherit",sx:{ml:"-12px",mr:"20px",display:{lg:"none"}},onClick:n,"aria-label":"Menu",size:"large",children:Object(h.jsx)(b.a,{})}),Object(h.jsx)(r.a,{variant:"h6",color:"inherit",sx:{flexGrow:1,color:"inherit",textDecoration:"none"},noWrap:!0,component:l.b,to:"/competitions/".concat(t.id),children:t.shortName}),Object(h.jsx)(a.a,{sx:{flexGrow:1}}),Object(h.jsx)(x,{competition:t}),t.access.canScoretake&&Object(h.jsx)(i.a,{title:"Admin view",children:Object(h.jsx)(o.a,{color:"inherit",component:l.b,to:"/admin".concat(d.pathname),size:"large",children:Object(h.jsx)(j.a,{})})})]})}},685:function(e,t,n){"use strict";n.r(t);n(499);var c=n(1),i=n.n(c),a=n(410),r=n(13),o=n(777),s=n(83),l=n(775),d=n(171),j=n(782),u=n(215),b=n(759),m=n(783),p=n(780),h=n(796),x=n(420),O=n(148),f=n(322),g=n(175),v=n(462);const y={};function w(e){return"wca-live:".concat(e)}const C="token";function I(){return function(e){if(e in y)return y[e];const t=localStorage.getItem(w(e));return y[e]=t,t}(C)}function k(e){var t,n;n=e,y[t=C]=n,localStorage.setItem(w(t),n)}function S(){var e;delete y[e=C],localStorage.removeItem(w(e))}const A=new j.a({uri:"https://live.worldcubeassociation.org/api",credentials:"same-origin"}),P=new h.a({delay:{initial:2e3},attempts:{max:2}}),E=Object(x.a)(((e,t)=>{let{headers:n}=t;const c=I();return c?{headers:{...n,authorization:"Bearer ".concat(c)}}:{headers:n}})),T=u.a.from([E,P,A]),N=new f.a("wss://".concat(window.location.host,"/socket")),R=g.a(N),D=Object(v.a)(R),F=Object(b.a)((e=>{let{query:t}=e;const n=Object(O.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),D,T),W=new m.a({typePolicies:{Country:{keyFields:["iso2"]},CompetitionBrief:{keyFields:["wcaId"]},Competition:{fields:{access:{merge:(e,t)=>({...e,...t})}}}}}),M=new p.a({cache:W,link:F,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}});var z=n(700),B=n(461),V=n(793),$=n(145),U=n(411),L=n(762),H=n(0);const q={light:Object(B.a)({palette:{primary:{main:$.a[700]},secondary:{main:U.a[900]}}}),dark:Object(B.a)({palette:{mode:"dark",primary:{main:$.a[200]},secondary:{main:L.a.A400}}})},G={light:$.a[700],dark:U.a[900]},_=Object(c.createContext)();function J(){return localStorage.getItem("themeType")}function Q(e){let{children:t}=e;const n=Object(z.a)("(prefers-color-scheme: dark)")?"dark":"light",i=Object(c.useMemo)(J,[]),[a,r]=Object(c.useState)(i||n),o=Object(c.useCallback)((()=>{r((e=>"light"===e?"dark":"light"))}),[]);return Object(c.useEffect)((()=>{!function(e){localStorage.setItem("themeType",e)}(a);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",G[a])}),[a]),Object(H.jsx)(V.a,{theme:q[a],children:Object(H.jsx)(_.Provider,{value:o,children:t})})}var Y=n(776),Z=n(23),X=n(14),K=n(781),ee=n(466),te=n(797),ne=n(754),ce=n(810);var ie=function(){return Object(H.jsx)(ne.a,{in:!0,style:{transitionDelay:"800ms"},children:Object(H.jsx)(ce.a,{sx:{position:"absolute",left:0,right:0,top:0}})})},ae=n(477),re=n(220),oe=n.p+"static/media/error.891f05e0.svg";function se(e,t){return Array.from({length:e},((e,n)=>t(n)))}function le(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}function de(e,t){return e.map(t).reduce(((t,n,c)=>(t[n]=(t[n]||[]).concat(e[c]),t)),{})}function je(e){return[...new Set(e)]}function ue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"function"===typeof t&&(t=[t]),"string"===typeof n&&(n=[n]),e.slice(0).sort(((e,c)=>t.reduce(((t,i,a)=>{if(0===t){const r=i(e),o=i(c),s=r>o?1:r<o?-1:0;t="desc"===n[a]?-s:s}return t}),0)))}function be(e){return(t=e,t.charAt(0).toUpperCase()+t.slice(1)).replace(/\.?$/,".");var t}function me(e){return e&&e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.message)).map(be).join(" "):"Something went wrong."}var pe,he=function(e){let{error:t=null}=e;const n=me(t);return Object(H.jsx)(ae.a,{sx:{width:"100%",py:4},children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(re.a,{variant:"h5",children:"Oh dear!"})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(ae.a,{component:"img",src:oe,height:300,alt:"error",sx:{maxWidth:"100%"}})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(re.a,{variant:"subtitle1",children:n})})]})})},xe=n(811),Oe=n(821),fe=n(813),ge=n(812),ve=n(798),ye=n(832),we=n(764),Ce=n(474),Ie=n(763);function ke(){const{enqueueSnackbar:e}=Object(d.b)();return Object(c.useCallback)((t=>{const n=me(t);e(n,{variant:"error"})}),[e])}const Se=Object(K.a)(pe||(pe=Object(X.a)(["\n  mutation OpenRound($input: OpenRoundInput!) {\n    openRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var Ae,Pe=function(e){let{round:t,competitionEvent:n}=e;const c=Object(s.b)(),i=ke(),[a,{loading:r}]=Object(Ie.a)(Se,{variables:{input:{id:t.id}},onError:i});return Object(H.jsx)(Ce.a,{size:"small",onClick:function(){const e=n.rounds.find((e=>e.number===t.number-1));e&&!e.finished?c({description:"\n          There are some missing results in the previous round.\n          Opening this round will permanently remove them.\n        "}).then(a):a()},disabled:r,children:"Open"})};const Ee=Object(K.a)(Ae||(Ae=Object(X.a)(["\n  mutation ClearRound($input: ClearRoundInput!) {\n    clearRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var Te=function(e){let{round:t,competitionEvent:n}=e;const c=Object(s.b)(),i=ke(),[a,{loading:r}]=Object(Ie.a)(Ee,{variables:{input:{id:t.id}},onError:i});return Object(H.jsx)(Ce.a,{size:"small",onClick:function(){c({description:"\n        This will irreversibly remove all results\n        from ".concat(n.event.name," - ").concat(t.name,".\n      ")}).then(a)},disabled:r,children:"Clear"})};function Ne(e,t){const n=t.rounds.find((t=>t.number===e.number-1));return!e.open&&(!n||n.open)}function Re(e,t){const n=t.rounds.find((t=>t.number===e.number+1));return e.open&&(!n||!n.open)}var De=function(e){let{round:t,competitionEvent:n,competitionId:c}=e;return Object(H.jsxs)(ve.a,{button:!0,component:r.b,to:"/admin/competitions/".concat(c,"/rounds/").concat(t.id),disabled:!t.open,children:[Object(H.jsx)(we.a,{primary:t.name}),Object(H.jsxs)(ye.a,{children:[Ne(t,n)&&Object(H.jsx)(Pe,{round:t,competitionEvent:n}),Re(t,n)&&Object(H.jsx)(Te,{round:t,competitionEvent:n})]})]},t.id)},Fe=n(84);var We,Me=function(e){let{competitionEvent:t,competitionId:n}=e;return Object(H.jsxs)(xe.a,{style:{height:"100%"},children:[Object(H.jsx)(ge.a,{avatar:Object(H.jsx)(Fe.a,{eventId:t.event.id}),title:t.event.name}),Object(H.jsx)(Oe.a,{style:{padding:0},children:Object(H.jsx)(fe.a,{dense:!0,children:t.rounds.map((e=>Object(H.jsx)(De,{round:e,competitionEvent:t,competitionId:n},e.id)))})})]})};const ze=Object(K.a)(We||(We=Object(X.a)(["\n  query CompetitionEvents($id: ID!) {\n    competition(id: $id) {\n      id\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          name\n          open\n          finished\n        }\n      }\n    }\n  }\n"])));var Be,Ve=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(ze,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:{competitionEvents:i}}=t;return Object(H.jsx)(te.a,{container:!0,spacing:2,direction:"row",children:i.map((t=>Object(H.jsx)(te.a,{item:!0,xs:12,md:4,children:Object(H.jsx)(Me,{competitionEvent:t,competitionId:e})},t.id)))})},$e=n(806),Ue=n(766),Le=n(815),He=n(786),qe=n(423),Ge=n.n(qe),_e=n(260),Je=n.n(_e),Qe=n(424),Ye=n.n(Qe),Ze=n(425),Xe=n.n(Ze),Ke=n(465),et=n(765);const tt=Object(K.a)(Be||(Be=Object(X.a)(["\n  mutation Synchronize($input: SynchronizeInput!) {\n    synchronizeCompetition(input: $input) {\n      competition {\n        id\n        synchronizedAt\n      }\n    }\n  }\n"])));var nt=function(e){let{competitionId:t}=e;const n=ke(),[c,{loading:i}]=Object(Ie.a)(tt,{variables:{input:{id:t}},onError:n});return Object(H.jsx)(Ce.a,{variant:"contained",disableElevation:!0,color:"primary",size:"large",onClick:c,disabled:i,children:"Synchronize"})};const ct="https://www.worldcubeassociation.org",it="https://groupifier.jonatanklosko.com",at="https://scrambles-matcher.worldcubeassociation.org";function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat("").concat(e)}function ot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(ct).concat(e)}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="";return"".concat(it).concat(e).concat(t)}function lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="";return"".concat(at).concat(e).concat(t)}var dt;const jt=Object(K.a)(dt||(dt=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      synchronizedAt\n    }\n  }\n"])));var ut=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(jt,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t;return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(nt,{competitionId:i.id})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(re.a,{variant:"caption",component:"div",align:"center",children:["Last synchronized"," ",Object(H.jsx)(Ke.a,{date:Object(et.a)(i.synchronizedAt)}),"."]})})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Synchronization"}),Object(H.jsx)(re.a,{children:"\n          WCA Live is specifically designed to deal with competition results\n          and it relies on the WCA website to provide a lot of competition information\n          (like events, schedule and registered competitors). It is also meant to cooperate\n          with other tools that are dedicated to do specific tasks. Synchronization\n          is the process of getting the latest data from the WCA website, combining it\n          with the local changes (mostly results) and saving that data back to the WCA website,\n          so that other tools can use it.\n          "})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(He.a,{severity:"info",children:"Always make sure to Synchronize before using any other tool if you want it to see\n          the newly entered results. If the tool modifies relevant competition data,\n          synchronize afterwards to see the changes reflected here."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)($e.a,{children:Object(H.jsxs)(fe.a,{dense:!0,children:[Object(H.jsx)(Le.a,{sx:{backgroundColor:"inherit"},children:"WCA website"}),Object(H.jsxs)(ve.a,{button:!0,component:"a",href:ot("/competitions/".concat(i.wcaId,"/events/edit")),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Ge.a,{})}),Object(H.jsx)(we.a,{primary:"Change round details",secondary:"Manage events and rounds on the WCA website."})]}),Object(H.jsxs)(ve.a,{button:!0,component:"a",href:ot("/competitions/".concat(i.wcaId,"/registrations/add")),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Je.a,{})}),Object(H.jsx)(we.a,{primary:"Add competitor",secondary:"Use a form on the WCA website to register someone during the competition (if applicable)."})]}),Object(H.jsx)(Le.a,{sx:{backgroundColor:"inherit"},children:"Additional tools"}),Object(H.jsxs)(ve.a,{button:!0,component:"a",href:st("/competitions/".concat(i.wcaId)),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Ye.a,{})}),Object(H.jsx)(we.a,{primary:"Groupifier",secondary:"Manage competitor groups and print scorecards."})]}),Object(H.jsxs)(ve.a,{button:!0,component:"a",href:lt(),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Xe.a,{})}),Object(H.jsx)(we.a,{primary:"Scrambles Matcher",secondary:"Use it after the competition to attach scrambles to rounds and proceed with results submission."})]})]})})})]})},bt=n(785),mt=n(816),pt=n(822),ht=n(823),xt=n(827),Ot=n(791),ft=n(824),gt=n(825),vt=n(826);const yt=[{role:"organizer",name:"Organizer",editable:!1},{role:"delegate",name:"Delegate",editable:!1},{role:"trainee-delegate",name:"Trainee delegate",editable:!1},{role:"staff-dataentry",name:"Scoretaker",editable:!0}];var wt,Ct=function(e){let{staffMembers:t,onChange:n}=e;return Object(H.jsx)(pt.a,{component:$e.a,children:Object(H.jsxs)(ht.a,{children:[Object(H.jsx)(ft.a,{children:Object(H.jsxs)(gt.a,{children:[Object(H.jsx)(vt.a,{children:"Name"}),yt.map((e=>{let{role:t,name:n}=e;return Object(H.jsx)(vt.a,{children:n},t)}))]})}),Object(H.jsx)(xt.a,{children:t.map((e=>Object(H.jsxs)(gt.a,{sx:{"&:last-child td":{border:0}},children:[Object(H.jsx)(vt.a,{children:e.user.name}),yt.map((c=>{let{role:i,editable:a}=c;return Object(H.jsx)(vt.a,{padding:"checkbox",align:"center",children:Object(H.jsx)(Ot.a,{disabled:!a,checked:e.roles.includes(i),onChange:()=>function(e,c){n(t.map((t=>{return t===e?{...t,roles:(n=t.roles,i=c,n.includes(i)?n.filter((e=>e!==i)):[...n,i])}:t;var n,i})))}(e,i)})},i)}))]},e.user.id)))})]})})},It=n(803),kt=n(794);function St(e,t){const[n,i]=Object(c.useState)(e);return Object(c.useEffect)((()=>{const n=setTimeout((()=>{i(e)}),t);return()=>clearTimeout(n)}),[e,t]),n}const At=Object(K.a)(wt||(wt=Object(X.a)(["\n  query Users($filter: String!) {\n    users(filter: $filter) {\n      id\n      name\n    }\n  }\n"])));var Pt,Et=function(e){let{onChange:t,TextFieldProps:n={}}=e;const[i,a]=Object(c.useState)(""),r=St(i,250),{data:o,loading:s}=Object(ee.b)(At,{variables:{filter:r}}),l=o?o.users:[];return Object(H.jsx)(It.a,{clearOnBlur:!0,blurOnSelect:!0,options:l,getOptionLabel:e=>e.name,loading:s,onInputChange:function(e,t,n){"input"===n&&a(t)},value:null,onChange:function(e,n,c){"selectOption"===c&&t(n)},renderInput:e=>Object(H.jsx)(kt.a,{...e,...n})})};const Tt=Object(K.a)(Pt||(Pt=Object(X.a)(["\n  mutation UpdateCompetitionAccess($input: UpdateCompetitionAccessInput!) {\n    updateCompetitionAccess(input: $input) {\n      competition {\n        id\n        staffMembers {\n          id\n          user {\n            id\n          }\n          roles\n        }\n      }\n    }\n  }\n"])));function Nt(e){const{id:t,user:n,roles:c}=e;return{id:t,userId:n.id,roles:c}}function Rt(e){return e.filter((e=>e.roles.length>0)).map(Nt)}var Dt,Ft=function(e){let{competition:t}=e;const n=ke(),[i,a]=Object(c.useState)(t.staffMembers),[r,{loading:o}]=Object(Ie.a)(Tt,{variables:{input:{id:t.id,staffMembers:Rt(i)}},onError:n});return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(re.a,{children:"Delegates and organizers have full access to the competition.\n            Additionally, you can grant scoretaking access to any WCA Live user."})}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(Ct,{staffMembers:i,onChange:a})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Et,{onChange:function(e){if(null===e)return;if(i.some((t=>t.user.id===e.id)))return;const t={id:null,user:e,roles:[]};a([...i,t])},TextFieldProps:{label:"Add user",sx:{width:250},variant:"outlined",size:"small"}})}),Object(H.jsx)(te.a,{item:!0,sx:{mt:2},children:Object(H.jsx)(Ce.a,{variant:"contained",color:"primary",onClick:r,disabled:o,children:"Save"})})]})};const Wt=Object(K.a)(Dt||(Dt=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      staffMembers {\n        id\n        user {\n          id\n          name\n        }\n        roles\n      }\n    }\n  }\n"])));var Mt=function(){const{competitionId:e}=Object(Z.h)(),[t,n]=Object(c.useState)("access"),{data:i,loading:a,error:r}=Object(ee.b)(Wt,{variables:{id:e}});if(a&&!i)return Object(H.jsx)(ie,{});if(r)return Object(H.jsx)(he,{error:r});const{competition:o}=i;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(bt.a,{indicatorColor:"secondary",textColor:"inherit",value:t,onChange:(e,t)=>n(t),children:Object(H.jsx)(mt.a,{label:"Access",value:"access"})}),Object(H.jsx)(ae.a,{sx:{mt:2},children:"access"===t&&Object(H.jsx)(Ft,{competition:o})})]})},zt=n(814),Bt=n(427),Vt=n.n(Bt),$t=n(428),Ut=n.n($t),Lt=n(817),Ht=n(426),qt=n.n(Ht);const Gt=["d","D","/"],_t=["s","S","*"],Jt=-1,Qt=-2;function Yt(e){return e>0}function Zt(e){return 0===e}function Xt(e,t){return Yt(e)||Yt(t)?!Yt(e)&&Yt(t)?1:Yt(e)&&!Yt(t)?-1:e-t:0}function Kt(e){return 0===e.length?[]:0===e[e.length-1]?Kt(e.slice(0,-1)):e}function en(e){const t=e.filter((e=>!Zt(e))),n=e.filter(Yt);return 0===t.length?0:0===n.length?Math.max(...t):Math.min(...n)}function tn(e,t){if(!t)throw new Error("Missing argument: eventId");if("333mbf"===t)return 0;if(e.some(Zt))return 0;if("333fm"===t){const t=e.map((e=>100*e));switch(e.length){case 3:return an(t);case 5:return cn(t);default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}switch(e.length){case 3:return nn(an(e));case 5:return nn(cn(e));default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}function nn(e){return Yt(e)?e<=6e4?e:100*Math.round(e/100):e}function cn(e){const[,t,n,c]=e.slice().sort(Xt);return an([t,n,c])}function an(e){return e.every(Yt)?function(e,t,n){return Math.round((e+t+n)/3)}(...e):Jt}function rn(e){if(e<=0)return{solved:0,attempted:0,centiseconds:e};const t=e%100,n=Math.floor(e/100)%1e5,c=99-Math.floor(e/1e7)%100+t;return{solved:c,attempted:c+t,centiseconds:99999===n?null:100*n}}function on(e){let{solved:t,attempted:n,centiseconds:c}=e;if(c<=0)return c;const i=n-t;return 1e7*(99-(t-i))+100*Math.round((c||9999900)/100)+i}function sn(e){if(!Number.isFinite(e))throw new Error("Invalid centiseconds, expected positive number, got ".concat(e,"."));return new Date(10*e).toISOString().substr(11,11).replace(/^[0:]*(?!\.)/g,"")}function ln(e,t){return 0===e?"":e===Jt?"DNF":e===Qt?"DNS":"333mbf"===t?function(e){const{solved:t,attempted:n,centiseconds:c}=rn(e),i=sn(c).replace(/\.00$/,"");return"".concat(t,"/").concat(n," ").concat(i)}(e):"333fm"===t?function(e){return e>=1e3?(e/100).toFixed(2):e.toString()}(e):sn(e)}function dn(e,t){if(!t)return!0;const{numberOfAttempts:n,attemptResult:c}=t;return e.slice(0,n).some((e=>e>0&&e<c))}var jn=function(e){let{value:t,onChange:n,label:i,disabled:a,TextFieldProps:r={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(t);return o!==t&&(d(t),s(t)),Object(H.jsx)(kt.a,{...r,label:i,disabled:a,spellCheck:!1,value:(j=l,0===j?"":j===Jt?"DNF":j===Qt?"DNS":j.toString()),onChange:function(e){const t=e.nativeEvent.data;if(Gt.includes(t))d(Jt);else if(_t.includes(t))d(Qt);else{const t=le(e.target.value.replace(/\D/g,""))||0;d(t)}},onBlur:function(){var e;n((e=l)>80?Jt:e),d(t)}});var j};function un(e){if(""===e)return 0;if("DNF"===e)return Jt;if("DNS"===e)return Qt;const t=le(e.replace(/\D/g,""))||0;return 36e4*Math.floor(t/1e6)+6e3*Math.floor(t%1e6/1e4)+100*Math.floor(t%1e4/100)+t%100}function bn(e){return 0===e?"":e===Jt?"DNF":e===Qt?"DNS":sn(e)}var mn=function(e){let{value:t,onChange:n,label:i,disabled:a,TextFieldProps:r={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(bn(t));return o!==t&&(d(bn(t)),s(t)),Object(H.jsx)(kt.a,{...r,label:i,disabled:a,spellCheck:!1,value:l,onChange:function(e){const t=e.nativeEvent.data;Gt.includes(t)?d("DNF"):_t.includes(t)?d("DNS"):d(function(e){const t=le(e.replace(/\D/g,""))||0;if(0===t)return"";const n="00000000"+t.toString().slice(0,8),[,c,i,a,r]=n.match(/(\d\d)(\d\d)(\d\d)(\d\d)$/);return"".concat(c,":").concat(i,":").concat(a,".").concat(r).replace(/^[0:]*(?!\.)/g,"")}(e.target.value))},onBlur:function(){const e=(c=l)===bn(un(c))?nn(un(l)):0;var c;n(e),d(bn(t))}})};var pn=function(e){let{value:t,onChange:n,label:i,disabled:a,TextFieldProps:r={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(t);return o!==t&&(d(t),s(t)),Object(H.jsx)(kt.a,{...r,label:i,disabled:a,spellCheck:!1,value:(j=l,0===j?"":j.toString()),onChange:function(e){const t=le(e.target.value.replace(/\D/g,""))||0;t<=99&&d(t)},onBlur:function(){n(l),d(t)}});var j};var hn=function(e){let{value:t,onChange:n,disabled:i,label:a,TextFieldProps:r={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(rn(t));function j(e){const c=function(e){let{attempted:t,solved:n,centiseconds:c}=e;return!t||n>t?{solved:n,attempted:n,centiseconds:c}:n<t/2||n<=1||c>6e4*Math.min(6,t)+3e3?{solved:0,attempted:0,centiseconds:Jt}:{solved:n,attempted:t,centiseconds:c}}(e);on(c)!==t?(n(on(c)),d(rn(t))):d(c)}return o!==t&&(d(rn(t)),s(t)),Object(H.jsxs)(te.a,{container:!0,direction:"row",spacing:1,onInputCapture:function(e){const t=e.nativeEvent.data;Gt.includes(t)?(j(rn(Jt)),e.preventDefault()):_t.includes(t)&&(j(rn(Qt)),e.preventDefault())},children:[Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(pn,{value:l.solved,onChange:e=>j({...l,solved:e}),disabled:i,TextFieldProps:r})}),Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(pn,{value:l.attempted,onChange:e=>j({...l,attempted:e}),disabled:i,TextFieldProps:r})}),Object(H.jsx)(te.a,{item:!0,xs:8,children:Object(H.jsx)(mn,{label:a,value:l.centiseconds,onChange:e=>j({...l,centiseconds:e}),disabled:i,TextFieldProps:r})})]})};var xn=function(e){let{eventId:t,...n}=e;return"333fm"===t?Object(H.jsx)(jn,{...n}):"333mbf"===t?Object(H.jsx)(hn,{...n}):Object(H.jsx)(mn,{...n})};function On(e){return Array.from(e.querySelectorAll("input, button")).filter((e=>!e.disabled))}function fn(e){return"".concat(e.name," (").concat(e.registrantId,")")}var gn=function(e){let{persons:t,value:n,onChange:c,TextFieldProps:i={}}=e;return Object(H.jsx)(It.a,{options:t,getOptionLabel:fn,value:n,onChange:function(e,t,n){"selectOption"===n&&c(t)},forcePopupIcon:!1,disableClearable:!0,autoHighlight:!0,filterOptions:(e,t)=>{let{inputValue:n}=t;return function(e,t){const n=t.trim().toLowerCase();if(!n)return e;const c=e.find((e=>e.registrantId===le(n)));return c?[c]:je([...e.filter((e=>e.name.toLowerCase().startsWith(n))),...e.filter((e=>e.name.toLowerCase().includes(n)))]).slice(0,5)}(e,n)},renderInput:e=>Object(H.jsx)(kt.a,{...e,label:"Competitor",spellCheck:!1,placeholder:"Type ID or name",...i,inputProps:{...e.inputProps,...i.inputProps||{}}})})};var vn=function(e){let{results:t,value:n,onChange:i,TextFieldProps:a={}}=e;const r=Object(c.useMemo)((()=>t.map((e=>e.person)).sort(((e,t)=>e.name.localeCompare(t.name)))),[t]);return Object(H.jsx)(gn,{persons:r,value:n?r.find((e=>e.id===n.person.id)):null,onChange:e=>{i(e?t.find((t=>t.person.id===e.id)):null)},TextFieldProps:a})};function yn(e,t){return e?"333mbf"===t?"".concat(function(e){const{solved:t,attempted:n}=rn(e);return t-(n-t)}(e.attemptResult)," points"):"333fm"===t?"".concat(e.attemptResult," moves"):sn(e.attemptResult):"None"}function wn(e,t){if(["333mbf","333fm"].includes(t))return"Regulated";const{centiseconds:n,cumulativeRoundWcifIds:c}=e,i=sn(n);return 0===c.length?i:1===c.length?"".concat(i," in total"):"".concat(i," total for ").concat(c.join(", "))}function Cn(e,t){const{numberOfAttempts:n,sortBy:c}=t;if(!In(e,t))return[{name:"Best",field:"best",recordTagField:"singleRecordTag"}];const i=[{name:"Best",field:"best",recordTagField:"singleRecordTag"},{name:3===n?"Mean":"Average",field:"average",recordTagField:"averageRecordTag"}];return"best"===c?i:i.reverse()}function In(e,t){return"333mbf"!==e&&[3,5].includes(t.numberOfAttempts)}function kn(e,t){return function(e,t){return se(t,(t=>t<e.length?e[t]:0))}(e.attempts.map((e=>e.result)),t)}var Sn,An,Pn=function(e){let{result:t,results:n,onResultChange:i,eventId:a,format:r,timeLimit:o,cutoff:l,onSubmit:d,disabled:j=!1,focusOnResultChange:u=!1}=e;const b=Object(s.b)(),{numberOfAttempts:m}=r,p=Object(c.useMemo)((()=>se(m,(()=>0))),[m]),[h,x]=Object(c.useState)(p),O=Object(c.useRef)(null);var f;f=O,Object(c.useEffect)((()=>{const e=f.current;function t(t){if(!["ArrowUp","ArrowDown","Enter","Tab","Escape"].includes(t.key))return;if("Escape"===t.key)return void(t.target.blur&&t.target.blur());const n=Boolean(e.querySelector('.MuiAutocomplete-root[aria-expanded="true"]'));if(!["ArrowUp","ArrowDown","Enter"].includes(t.key)||!n){if(["ArrowUp","ArrowDown"].includes(t.key)&&(t.preventDefault(),t.stopPropagation()),"INPUT"===t.target.tagName&&"attempt-result"===t.target.dataset.type&&t.target.blur(),"Tab"===t.key&&"result-select"===t.target.dataset.type)return t.preventDefault(),t.stopPropagation(),void t.target.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter"}));"Tab"!==t.key&&setTimeout((()=>{const n=On(e),c=n.findIndex((e=>t.target===e));if(-1===c)return;const i=e=>(e+n.length)%n.length;if("ArrowUp"===t.key){const e=n[i(c-1)];e.focus(),e.select&&e.select()}else if("ArrowDown"===t.key||"INPUT"===t.target.tagName&&"Enter"===t.key){const e=n[i(c+1)];e.focus(),e.select&&e.select()}}),0)}}return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}),[f]),Object(c.useEffect)((()=>{const e=f.current;function t(t){if(["ArrowUp","ArrowDown","Enter"].includes(t.key)&&t.target===document.body){t.preventDefault();const[n]=On(e);n&&(n.focus(),n.select())}}return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[f]),Object(c.useEffect)((()=>{x(t?kn(t,m):p)}),[t,m,p]),Object(c.useEffect)((()=>{if(!u)return;const[e,n]=O.current.getElementsByTagName("input");t?setTimeout((()=>{n.focus(),n.select()}),0):e.focus()}),[t,u]);const g=dn(h,l)?m:l.numberOfAttempts;function v(e,t){const n=function(e,t,n){return e.map(((e,c)=>c===t?n:e))}(h,e,t);x(function(e,t){return dn(e,t)?e:e.map(((e,n)=>n<t.numberOfAttempts?e:0))}(function(e,t){if(null===t)return e;if(0===t.cumulativeRoundWcifIds.length)return e.map((e=>e>=t.centiseconds?Jt:e));{const[n]=e.reduce(((e,n)=>{let[c,i]=e;const a=n>0?i+n:i,r=n>0&&a>=t.centiseconds?Jt:n;return[c.concat(r),a]}),[[],0]);return n}}(n,o),l))}return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:1,ref:O,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(re.a,{variant:"body2",children:["Time limit: ",wn(o,a)]})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(re.a,{variant:"body2",children:["Cutoff: ",yn(l,a)]})}),Object(H.jsx)(te.a,{item:!0,sx:{my:2},children:Object(H.jsx)(vn,{results:n,value:t,onChange:i,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined",inputProps:{"data-type":"result-select"}}})}),h.map(((e,n)=>Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(xn,{eventId:a,label:"Attempt ".concat(n+1),disabled:!t||j||n>=g,value:e,onChange:e=>v(n,e),TextFieldProps:{fullWidth:!0,variant:"outlined",inputProps:{"data-type":"attempt-result"}}})},n))),Object(H.jsxs)(te.a,{item:!0,container:!0,children:[Object(H.jsx)(te.a,{item:!0,xs:!0,children:Object(H.jsxs)(re.a,{variant:"body2",children:["Best: ",ln(en(h),a)]})}),In(a,r)&&Object(H.jsx)(te.a,{item:!0,xs:!0,children:Object(H.jsxs)(re.a,{variant:"body2",children:["Average:"," ",ln(tn(h,a),a)]})})]}),Object(H.jsxs)(te.a,{item:!0,container:!0,alignItems:"flex-end",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ce.a,{type:"submit",variant:"outlined",color:"primary",disabled:!t||j,onClick:function(){(function(){const e=function(e,t){const n=Kt(e).indexOf(0);if(-1!==n)return"You've omitted attempt ".concat(n+1,". Make sure it's intentional.");if("333mbf"===t){const t=e.findIndex((e=>{const{attempted:t,centiseconds:n}=rn(e);return e>0&&n/t<3e3}));if(-1!==t)return"\n        The result you're trying to submit seems to be impossible:\n        attempt ".concat(t+1," is done in\n        less than 30 seconds per cube tried.\n        If you want to enter minutes, don't forget to add two zeros\n        for centiseconds at the end of the score.\n      ")}else{const n=e.filter(Yt);if(n.length>0){const e=Math.min(...n),c=Math.max(...n);if(c>4*e)return"\n          The result you're trying to submit seem to be inconsistent.\n          There's a big difference between the best single\n          (".concat(ln(e,t),") and the worst single\n          (").concat(ln(c,t),").\n          Please check that the results are accurate.\n        ")}}return null}(h,a);return e?b({description:e,confirmationText:"Submit"}):Promise.resolve()})().then((()=>{const e=Kt(h).map((e=>({result:e})));d(e)}))},children:"Submit"})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Lt.a,{title:Object(H.jsxs)("div",{children:["Key bindings:",Object(H.jsx)("div",{children:"/ or d - DNF"}),Object(H.jsx)("div",{children:"* or s - DNS"}),Object(H.jsx)("div",{children:"Up, Down, Enter - navigation"})]}),children:Object(H.jsx)(qt.a,{sx:{verticalAlign:"middle"},color:"action"})})})]})]})};const En=Object(K.a)(Sn||(Sn=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        attempts {\n          result\n        }\n        person {\n          id\n          name\n          registrantId\n        }\n        enteredAt\n      }\n    }\n  }\n"]))),Tn=Object(K.a)(An||(An=Object(X.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        attempts {\n          result\n        }\n      }\n    }\n  }\n"])));var Nn=function(){const e=ke(),{roundId:t}=Object(Z.h)(),[n,i]=Object(c.useState)(0),a=Object(c.useRef)(null),r=Object(c.useRef)(null);Object(c.useEffect)((()=>{function e(e){"INPUT"!==e.target.tagName.toUpperCase()&&("ArrowLeft"===e.key?a.current.click():"ArrowRight"===e.key&&r.current.click())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const{data:o,loading:s,error:l}=Object(ee.b)(En,{variables:{id:t}}),[d,{error:j}]=Object(Ie.a)(Tn,{onCompleted:()=>{r.current.focus()},onError:e});if(s&&!o)return Object(H.jsx)(ie,{});if(l)return Object(H.jsx)(he,{error:l});const{round:u}=o,b=ue(u.results,(e=>-Object(et.a)(e.enteredAt))),m=Math.round((n+1)/b.length*100);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ce.a,{variant:"determinate",value:m,sx:{position:"absolute",top:0,left:0,right:0}}),Object(H.jsxs)(re.a,{variant:"subtitle1",align:"right",children:[n+1," of ",b.length]}),Object(H.jsxs)(te.a,{container:!0,direction:"row",alignItems:"center",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(H.jsx)(zt.a,{ref:a,onClick:()=>i(n-1),disabled:0===n,size:"large",children:Object(H.jsx)(Vt.a,{})})}),Object(H.jsx)(te.a,{item:!0,md:3,children:Object(H.jsx)(Pn,{result:b[n],results:u.results,onResultChange:function(e){null!==e&&i(b.indexOf(e))},eventId:u.competitionEvent.event.id,format:u.format,timeLimit:u.timeLimit,cutoff:u.cutoff,disabled:j,onSubmit:function(e){d({variables:{input:{id:b[n].id,attempts:e}}})}})}),Object(H.jsx)(te.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(H.jsx)(zt.a,{ref:r,autoFocus:!0,onClick:()=>i(n+1),disabled:n===b.length-1,size:"large",children:Object(H.jsx)(Ut.a,{})})}),Object(H.jsxs)(te.a,{item:!0,md:5,children:[Object(H.jsxs)(re.a,{variant:"h5",align:"center",children:[u.competitionEvent.event.name," - ",u.name]}),Object(H.jsx)(re.a,{variant:"subtitle1",align:"center",gutterBottom:!0,children:"Double-check"}),Object(H.jsx)(re.a,{align:"justify",children:"Here you can iterate over results ordered by entry time (newest first).\n              When doing double-check you can place a scorecard\n              next to the form to quickly compare attempt results.\n              For optimal experience make sure to always put entered/updated\n              scorecard at the top of the pile."})]})]})]})},Rn=n(804),Dn=n(147),Fn=n(146),Wn=n(770);const Mn={wr:{color:e=>e.palette.getContrastText(Fn.a[500]),backgroundColor:Fn.a[500]},cr:{color:e=>e.palette.getContrastText(Wn.a[500]),backgroundColor:Wn.a[500]},nr:{color:e=>e.palette.getContrastText(Dn.a.A400),backgroundColor:Dn.a.A400},pb:{color:e=>e.palette.getContrastText($.a[700]),backgroundColor:$.a[700]}};var zn=function(e){let{recordTag:t,sx:n}=e;return Object(H.jsx)(ae.a,{component:"span",sx:{display:"block",lineHeight:1,py:.8,px:1,borderRadius:1,fontWeight:600,fontSize:"0.7em",...n,...Mn[t.toLowerCase()]||{}},children:t})};var Bn=function(e){let{recordTag:t,hidePb:n=!1,children:c}=e;return!t||n&&"PB"===t?c:Object(H.jsxs)(ae.a,{component:"span",sx:{position:"relative"},children:[c,Object(H.jsx)(zn,{recordTag:t,sx:{position:"absolute",top:0,right:0,transform:"translate(110%, -40%)",fontSize:"0.6em",py:"0.3em",px:"0.4em"}})]})};const Vn={ranking:{pr:2,width:50},advancing:{color:e=>e.palette.getContrastText(Dn.a.A400),backgroundColor:Dn.a.A400}};function $n(e,t,n){return null===t?e:e.slice().sort(((e,c)=>{if("registrantId"===t){const t=e.person.registrantId-c.person.registrantId;return"asc"===n?t:-t}if("name"===t){const t=e.person.name.localeCompare(c.person.name);return"asc"===n?t:-t}throw new Error("Unrecognized order rule: ".concat(t))}))}var Un=i.a.memo((e=>{let{results:t,eventId:n,format:i,onResultClick:a}=e;const[r,o]=Object(c.useState)("asc"),[s,l]=Object(c.useState)(null);function d(e){s!==e?(l(e),o("asc")):"asc"===r?o("desc"):(l(null),o("asc"))}const j=Cn(n,i);return Object(H.jsxs)(ht.a,{size:"small",children:[Object(H.jsx)(ft.a,{children:Object(H.jsxs)(gt.a,{children:[Object(H.jsx)(vt.a,{align:"right",sx:Vn.ranking,children:"#"}),Object(H.jsx)(vt.a,{align:"right",children:Object(H.jsx)(Rn.a,{active:"registrantId"===s,direction:r,onClick:()=>d("registrantId"),children:"ID"})}),Object(H.jsx)(vt.a,{children:Object(H.jsx)(Rn.a,{active:"name"===s,direction:r,onClick:()=>d("name"),children:"Name"})}),se(i.numberOfAttempts,(e=>Object(H.jsx)(vt.a,{align:"right",children:e+1},e))),j.map((e=>{let{name:t}=e;return Object(H.jsx)(vt.a,{align:"right",children:t},t)}))]})}),Object(H.jsx)(xt.a,{children:$n(t,s,r).map((e=>Object(H.jsxs)(gt.a,{hover:!0,sx:{whiteSpace:"nowrap",cursor:"pointer","&:last-child td":{border:0}},onClick:t=>a(e,t),children:[Object(H.jsx)(vt.a,{align:"right",sx:{...Vn.ranking,...e.advancing?Vn.advancing:{}},children:e.ranking}),Object(H.jsx)(vt.a,{align:"right",children:e.person.registrantId}),Object(H.jsx)(vt.a,{children:e.person.name}),kn(e,i.numberOfAttempts).map(((e,t)=>Object(H.jsx)(vt.a,{align:"right",children:ln(e,n)},t))),j.map(((t,c)=>{let{name:i,field:a,recordTagField:r}=t;return Object(H.jsx)(vt.a,{align:"right",sx:{fontWeight:0===c?600:400},children:Object(H.jsx)(Bn,{recordTag:e[r],hidePb:!0,children:ln(e[a],n)})},i)}))]},e.person.id)))})]})})),Ln=n(463),Hn=n(828);var qn,Gn=function(e){let{result:t,position:n,onClose:c,onEditClick:i,onQuitClick:a,onClearClick:o,competitionId:s}=e;return Object(H.jsx)($e.a,{children:Object(H.jsxs)(Ln.a,{open:Boolean(t&&n),onClose:c,anchorReference:"anchorPosition",anchorPosition:n,transformOrigin:{vertical:0,horizontal:"center"},MenuListProps:{subheader:Object(H.jsx)(Le.a,{sx:{backgroundColor:"inherit"},children:t&&t.person.name})},children:[Object(H.jsx)(Hn.a,{onClick:function(){i(t),c()},children:"Edit"}),Object(H.jsx)(Hn.a,{component:r.b,to:"/competitions/".concat(s,"/competitors/").concat(t&&t.person.id),children:"Results"}),t&&t.attempts.length>0?Object(H.jsx)(Hn.a,{onClick:function(){o(t),c()},children:"Clear"}):Object(H.jsx)(Hn.a,{onClick:function(){a(t),c()},children:"Quit"})]})})},_n=n(430),Jn=n.n(_n),Qn=n(263),Yn=n.n(Qn),Zn=n(706),Xn=n(708),Kn=n(475),ec=n(707),tc=n(695),nc=n(771);const cc=Object(K.a)(qn||(qn=Object(X.a)(["\n  fragment adminRoundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      id\n      registrantId\n      name\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"])));var ic,ac;const rc=Object(K.a)(ic||(ic=Object(X.a)(["\n  query AdvancementCandidates($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      advancementCandidates {\n        qualifying {\n          id\n          name\n          registrantId\n        }\n        revocable {\n          id\n          name\n          registrantId\n        }\n      }\n    }\n  }\n"]))),oc=Object(K.a)(ac||(ac=Object(X.a)(["\n  mutation AddPersonToRound($input: AddPersonToRoundInput!) {\n    addPersonToRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),cc);var sc=function(e){let{open:t,onClose:n,roundId:i}=e;const a=ke(),[r,o]=Object(c.useState)(null),[s,{data:l,loading:d,error:j}]=Object(nc.a)(rc,{variables:{roundId:i}});Object(c.useEffect)((()=>{t&&(s(),o(null))}),[t,s]);const[u,{loading:b}]=Object(Ie.a)(oc,{variables:{input:{roundId:i,personId:r&&r.id}},onCompleted:m,onError:a});function m(){o(null),n()}return Object(H.jsxs)(Zn.a,{open:t,onClose:m,children:[d&&Object(H.jsx)(ie,{}),Object(H.jsx)(tc.a,{children:"Add competitor"}),Object(H.jsxs)(Kn.a,{children:[j&&Object(H.jsx)(he,{error:j}),l&&(l.round.advancementCandidates.qualifying.length>0?Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(ec.a,{children:"You can add any competitor who qualifies for this round. This is a way to quickly register someone for the first round without going to the WCA website or to bring back a competitor you have quit before."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(gn,{persons:l.round.advancementCandidates.qualifying,value:r,onChange:o,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined"}})}),l.round.advancementCandidates.revocable.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(re.a,{color:"error",children:["This will also remove the following competitors from this round: ",Object(H.jsx)("span",{style:{fontWeight:500},children:l.round.advancementCandidates.revocable.map((e=>e.name)).join(", ")})]})})]}):Object(H.jsx)(ec.a,{children:"No one else qualifies to this round."}))]}),Object(H.jsxs)(Xn.a,{children:[Object(H.jsx)(Ce.a,{onClick:m,children:"Cancel"}),Object(H.jsx)(Ce.a,{onClick:u,color:"primary",disabled:!r||b,children:"Confirm"})]})]})};function lc(e){const t=e.results.filter((e=>e.attempts.length>0));return"".concat(t.length," of ").concat(e.results.length," entered")}var dc,jc,uc=function(e){let{round:t,competitionId:n}=e;const[i,a]=Object(c.useState)(!1);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsxs)(re.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]}),Object(H.jsx)(re.a,{variant:"body2",color:"textSecondary",children:lc(t)})]}),Object(H.jsx)(te.a,{item:!0,style:{flexGrow:1}}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Lt.a,{title:"PDF",placement:"top",children:Object(H.jsx)(zt.a,{component:"a",target:"_blank",href:rt("/pdf/rounds/".concat(t.id)),size:"large",children:Object(H.jsx)(Yn.a,{})})}),Object(H.jsx)(Lt.a,{title:"Add competitor",placement:"top",children:Object(H.jsx)(zt.a,{onClick:()=>a(!0),size:"large",children:Object(H.jsx)(Je.a,{})})}),Object(H.jsx)(Lt.a,{title:"Double-check",placement:"top",children:Object(H.jsx)(zt.a,{component:r.b,to:"/admin/competitions/".concat(n,"/rounds/").concat(t.id,"/doublecheck"),size:"large",children:Object(H.jsx)(Jn.a,{})})})]})]}),Object(H.jsx)(sc,{open:i,onClose:()=>a(!1),roundId:t.id})]})},bc=n(805),mc=n(834),pc=n(787);const hc=Object(K.a)(dc||(dc=Object(X.a)(["\n  query NextQualifying($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      nextQualifying {\n        id\n        name\n      }\n    }\n  }\n"]))),xc=Object(K.a)(jc||(jc=Object(X.a)(["\n  mutation RemovePersonFromRound($input: RemovePersonFromRoundInput!) {\n    removePersonFromRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),cc);var Oc,fc=e=>{let{open:t,onClose:n,competitor:i,roundId:a}=e;const r=ke(),[o,s]=Object(c.useState)(""),[l,{data:d,loading:j,error:u}]=Object(nc.a)(hc,{variables:{roundId:a}});Object(c.useEffect)((()=>{t&&(l(),s(""))}),[t,l]);const[b,{loading:m}]=Object(Ie.a)(xc,{variables:{input:{roundId:a,personId:i&&i.id,replace:"yes"===o}},onCompleted:n,onError:r});return Object(H.jsxs)(Zn.a,{open:t,onClose:n,children:[j&&Object(H.jsx)(ie,{}),Object(H.jsxs)(tc.a,{children:["Quit ",i&&i&&i.name]}),Object(H.jsxs)(Kn.a,{children:[u&&Object(H.jsx)(he,{error:u}),d&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(ec.a,{children:["Going to permanently remove ",i&&i.name," from this round. Are you sure you want to proceed?"]}),Object(H.jsxs)(bc.a,{value:o,onChange:e=>s(e.target.value),children:[d.round.nextQualifying.length>0&&Object(H.jsx)(mc.a,{control:Object(H.jsx)(pc.a,{}),value:"yes",label:"\n                    Yes, remove ".concat(i&&i.name,"\n                    and replace they with other qualifying competitors:\n                    ").concat(d.round.nextQualifying.map((e=>{let{name:t}=e;return t})).join(", "),".\n                  ")}),Object(H.jsx)(mc.a,{control:Object(H.jsx)(pc.a,{}),value:"no",label:d.round.nextQualifying.length>0?"Yes, just remove ".concat(i&&i.name," and don't replace them."):"Yes, remove ".concat(i&&i.name,".")})]})]})]}),Object(H.jsxs)(Xn.a,{children:[Object(H.jsx)(Ce.a,{onClick:n,children:"Cancel"}),Object(H.jsx)(Ce.a,{onClick:b,color:"primary",disabled:""===o||m,children:"Confirm"})]})]})};const gc=Object(K.a)(Oc||(Oc=Object(X.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        round {\n          id\n          results {\n            id\n            ...adminRoundResult\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),cc);var vc,yc=function(e){let{round:t,competitionId:n}=e;const i=Object(s.b)(),{enqueueSnackbar:a}=Object(d.b)(),r=ke(),[o,l]=Object(c.useState)(null),[j,u]=Object(c.useState)({}),[b,m]=Object(c.useState)(null),[p,{loading:h}]=Object(Ie.a)(gc,{onCompleted:()=>{l(null)},onError:r}),x=Object(c.useCallback)(((e,t)=>{u({position:{left:t.clientX,top:t.clientY},result:e})}),[]),O=t.competitionEvent.rounds.find((e=>e.number===t.number+1)),f=O&&O.open;return Object(c.useEffect)((()=>{f&&a("The next round has already been open, any changes won't affect it!",{variant:"info"})}),[f,a]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"row",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,xs:12,md:3,children:Object(H.jsx)(Pn,{result:o,results:t.results,onResultChange:l,eventId:t.competitionEvent.event.id,format:t.format,timeLimit:t.timeLimit,cutoff:t.cutoff,focusOnResultChange:!0,disabled:h,onSubmit:function(e){p({variables:{input:{id:o.id,attempts:e}}})}})}),Object(H.jsxs)(te.a,{item:!0,xs:12,md:9,container:!0,direction:"column",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(uc,{round:t,competitionId:n})}),Object(H.jsx)(te.a,{item:!0,sx:{maxWidth:"100%"},children:Object(H.jsx)(pt.a,{component:$e.a,sx:{pr:.5},children:Object(H.jsx)(Un,{results:t.results,format:t.format,eventId:t.competitionEvent.event.id,onResultClick:x})})})]})]}),Object(H.jsx)(Gn,{...j,onClose:()=>u({}),onEditClick:e=>l(e),onQuitClick:e=>m(e.person),onClearClick:function(e){i({description:"This will clear all attempts of ".concat(e.person.name,".")}).then((()=>{p({variables:{input:{id:e.id,attempts:[]}}})}))},competitionId:n}),Object(H.jsx)(fc,{open:Boolean(b),onClose:()=>m(null),competitor:b,roundId:t.id})]})};const wc=Object(K.a)(vc||(vc=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      number\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          open\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        ...adminRoundResult\n      }\n    }\n  }\n  ","\n"])),cc);var Cc=function(){const{competitionId:e,roundId:t}=Object(Z.h)(),{data:n,loading:c,error:i}=Object(ee.b)(wc,{variables:{id:t}});if(c&&!n)return Object(H.jsx)(ie,{});if(i)return Object(H.jsx)(he,{error:i});const{round:a}=n;return Object(H.jsx)(yc,{round:a,competitionId:e})},Ic=n(790),kc=n(799),Sc=n(818);var Ac,Pc=i.a.memo((e=>{let{competitors:t,competitionEvents:n,competitionId:i}=e;const[a,o]=Object(c.useState)(0),[s,l]=Object(c.useState)(10),[d,j]=Object(c.useState)("");const u=function(e,t){return t?e.filter((e=>{const n=[e.name,e.wcaId,e.country.name,e.registrantId.toString()];return t.toLowerCase().split(/\s+/).every((e=>n.some((t=>t&&t.toLowerCase().includes(e)))))})):e}(Object(c.useMemo)((()=>t.slice().sort(((e,t)=>e.name.localeCompare(t.name)))),[t]),d),b=u.slice(a*s,a*s+s);return Object(H.jsxs)($e.a,{children:[Object(H.jsx)(Sc.a,{children:Object(H.jsx)(kt.a,{variant:"standard",label:"Search",value:d,onChange:function(e){j(e.target.value),o(0)}})}),Object(H.jsx)(pt.a,{children:Object(H.jsxs)(ht.a,{size:"small",children:[Object(H.jsx)(ft.a,{children:Object(H.jsxs)(gt.a,{children:[Object(H.jsx)(vt.a,{align:"right",children:"#"}),Object(H.jsx)(vt.a,{children:"Name"}),Object(H.jsx)(vt.a,{children:"Country"}),Object(H.jsx)(vt.a,{children:"WCA ID"}),Object(H.jsx)(vt.a,{align:"center",colSpan:n.length,children:"Results"})]})}),Object(H.jsx)(xt.a,{children:b.map((e=>Object(H.jsxs)(gt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(H.jsx)(vt.a,{align:"right",children:e.registrantId}),Object(H.jsx)(vt.a,{children:Object(H.jsx)(kc.a,{component:r.b,to:"/competitions/".concat(i,"/competitors/").concat(e.id),underline:"hover",children:e.name})}),Object(H.jsx)(vt.a,{children:e.country.name}),Object(H.jsx)(vt.a,{children:e.wcaId&&Object(H.jsx)(kc.a,{href:ot("/persons/".concat(e.wcaId)),target:"_blank",underline:"hover",children:e.wcaId})}),n.map((t=>{const n=t.rounds[0].results.find((t=>t.person.id===e.id));return Object(H.jsx)(vt.a,{align:"center",sx:{opacity:n&&0===n.attempts.length?.5:1},padding:"none",children:n&&Object(H.jsx)(Lt.a,{title:n.attempts.length>0?"Competed":"Awaiting result",placement:"top",children:Object(H.jsx)("span",{children:Object(H.jsx)(Fe.a,{eventId:t.event.id,small:!0})})})},t.id)}))]},e.id)))})]})}),Object(H.jsx)(Ic.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:t.length,rowsPerPage:s,page:a,onPageChange:function(e,t){o(t)},onRowsPerPageChange:function(e){l(parseInt(e.target.value,10)),o(0)}})]})}));const Ec=Object(K.a)(Ac||(Ac=Object(X.a)(["\n  query Competitors($id: ID!) {\n    competition(id: $id) {\n      id\n      competitors {\n        id\n        registrantId\n        name\n        wcaId\n        country {\n          iso2\n          name\n        }\n      }\n      competitionEvents {\n        id\n        event {\n          id\n        }\n        rounds {\n          id\n          results {\n            id\n            person {\n              id\n            }\n            attempts {\n              result\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var Tc=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Ec,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Competitors"}),Object(H.jsx)(Pc,{competitors:i.competitors,competitionEvents:i.competitionEvents,competitionId:i.id})]})},Nc=n(709),Rc=n(435),Dc=n.n(Rc),Fc=n(434),Wc=n.n(Fc),Mc=n(432),zc=n.n(Mc),Bc=n(431),Vc=n.n(Bc),$c=n(433),Uc=n.n($c),Lc=n(265),Hc=n.n(Lc);var qc=function(e){let{competition:t}=e;const n=Object(Z.f)();return Object(H.jsxs)(Sc.a,{sx:{justifyContent:{xs:"center",md:"flex-start"}},children:[Object(H.jsxs)(ae.a,{component:r.b,to:"/admin/competitions/".concat(t.id),sx:{color:"inherit",textDecoration:"none",display:{xs:"none",md:"unset"}},children:[Object(H.jsx)(re.a,{variant:"h6",color:"inherit",component:"span",children:t.shortName}),Object(H.jsx)(re.a,{variant:"overline",component:"span",sx:{ml:1},children:"Admin"})]}),Object(H.jsx)(ae.a,{sx:{flexGrow:1,display:{xs:"none",md:"unset"}}}),Object(H.jsx)(Lt.a,{title:"Events",children:Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:"/admin/competitions/".concat(t.id),size:"large",children:Object(H.jsx)(Vc.a,{})})}),t.access.canManage&&Object(H.jsx)(Lt.a,{title:"Synchronization",children:Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:"/admin/competitions/".concat(t.id,"/sync"),size:"large",children:Object(H.jsx)(zc.a,{})})}),Object(H.jsx)(Lt.a,{title:"Competitors",children:Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:"/admin/competitions/".concat(t.id,"/competitors"),size:"large",children:Object(H.jsx)(Hc.a,{})})}),t.access.canManage&&Object(H.jsx)(Lt.a,{title:"Settings",children:Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:"/admin/competitions/".concat(t.id,"/settings"),size:"large",children:Object(H.jsx)(Uc.a,{})})}),Object(H.jsx)(Lt.a,{title:"Public view",children:Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:n.pathname.replace(/^\/admin/,""),size:"large",children:Object(H.jsx)(Wc.a,{})})}),Object(H.jsx)(Lt.a,{title:"My competitions",children:Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:"/my-competitions",size:"large",children:Object(H.jsx)(Dc.a,{})})})]})};var Gc,_c=function(e){let{competition:t,children:n}=e;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Nc.a,{position:"sticky",children:Object(H.jsx)(qc,{competition:t})}),Object(H.jsx)(ae.a,{sx:{position:"relative",p:3},children:n})]})};const Jc=Object(K.a)(Gc||(Gc=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      access {\n        canManage\n        canScoretake\n      }\n    }\n  }\n"])));var Qc=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Jc,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t;return i.access.canScoretake?Object(H.jsx)(_c,{competition:i,children:Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Ve,{})}),i.access.canManage&&Object(H.jsx)(Z.b,{path:"sync",element:Object(H.jsx)(ut,{})}),i.access.canManage&&Object(H.jsx)(Z.b,{path:"settings",element:Object(H.jsx)(Mt,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId/doublecheck",element:Object(H.jsx)(Nn,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId",element:Object(H.jsx)(Cc,{})}),Object(H.jsx)(Z.b,{path:"competitors",element:Object(H.jsx)(Tc,{})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/admin/competitions/".concat(i.id)})})]})}):Object(H.jsx)(Z.a,{to:"/sign-in"})},Yc=n(820),Zc=n(436),Xc=n.n(Zc);var Kc=function(e){let{room:t}=e;return Object(H.jsx)(Lt.a,{title:t.name,placement:"top",children:Object(H.jsx)(ae.a,{sx:{display:"inline-block",width:10,height:10,borderRadius:"100%",backgroundColor:t.color}})})};function ei(e){if(e.startsWith("other-"))return{type:"other",id:e.replace(/^other-/,"")};{const t=e.match(/^(\w+)(?:-r(\d+))?(?:-g(\d+))?(?:-a(\d+))?$/);if(!t)throw new Error("Invalid activity code: '".concat(e,"'."));const[,n,c,i,a]=t;return{type:"official",eventId:n,roundNumber:c?parseInt(c,10):null,groupName:i||null,attemptNumber:a?parseInt(a,10):null}}}var ti=n(800);const ni="geolocation"in navigator;function ci(e){return e*Math.PI/180}function ii(e){const t=Object(et.a)(e.endTime);return Object(ti.a)(new Date,t)>60}function ai(e){const t=Object(et.a)(e.startTime);return Object(ti.a)(t,new Date)>60}function ri(e){return!ii(e)&&!ai(e)}function oi(e){const t=e.venues.map((e=>e.country));return je(t.map((e=>e.iso2))).map((e=>t.find((t=>t.iso2===e))))}function si(e,t){const{eventId:n,roundNumber:c}=ei(t),i=e.find((e=>{let{event:t}=e;return t.id===n}));if(!i)return null;const a=i.rounds.find((e=>e.number===c));return a?{event:i.event,round:a}:null}async function li(e){const{latitude:t,longitude:n}=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:c}=t.coords;e({latitude:n,longitude:c})}),t,{maximumAge:3e5})}));return c=e=>{const c=e.venues.map((e=>function(e,t,n,c){const i=ci(c-t)*Math.cos(ci(e+n)/2),a=ci(n-e);return 6371*Math.sqrt(i*i+a*a)}(t,n,e.latitude,e.longitude)));return Math.min(...c)},e.reduce(((e,t)=>c(e)<c(t)?e:t));var c}var di=n(779),ji=n(772),ui=n(819),bi=n(789),mi=n(773);function pi(e,t){const[n,c,i]=Object(di.a)(Object(et.a)(e),"d MMM yyyy").split(" "),[a,r,o]=Object(di.a)(Object(et.a)(t),"d MMM yyyy").split(" ");return e===t?"".concat(c," ").concat(n,", ").concat(i):c===r&&i===o?"".concat(c," ").concat(n," - ").concat(a,", ").concat(o):i===o?"".concat(c," ").concat(n," - ").concat(r," ").concat(a,", ").concat(i):"".concat(c," ").concat(n,", ").concat(i," - ").concat(r," ").concat(a,", ").concat(o)}function hi(e){return Object(di.a)(Object(et.a)(e),"HH:mm")}function xi(e){return Object(di.a)(Object(et.a)(e),"yyyy-MM-dd")}function Oi(){const e=Object(bi.a)(Object(ui.a)(),{months:1});return Object(mi.a)(e,{representation:"date"})}var fi=function(e){let{activityCode:t,activities:n,competitionEvents:c,competitionId:i}=e;const{attemptNumber:a}=ei(t),{event:o,round:s}=si(c,t),l=a?"".concat(o.name," - ").concat(s.name," (Attempt ").concat(a,")"):"".concat(o.name," - ").concat(s.name),d=n.map((e=>e.startTime)).reduce(((e,t)=>e<t?e:t)),j=function(e){return e.reduce(((e,t)=>e>t?e:t))}(n.map((e=>e.endTime))),u=Object(et.a)(j)-Object(et.a)(d),b=new Date-Object(et.a)(d),m=Math.round(100*(p=b,h=0,x=u,Math.min(Math.max(p,h),x)/u));var p,h,x;return Object(H.jsxs)(xe.a,{sx:{height:"100%",position:"relative"},children:[Object(H.jsx)(Yc.a,{component:r.b,to:"/competitions/".concat(i,"/rounds/").concat(s.id),disabled:!s.open,children:Object(H.jsx)(ge.a,{avatar:Object(H.jsx)(Fe.a,{eventId:o.id}),title:l})}),Object(H.jsx)(Oe.a,{children:Object(H.jsx)(te.a,{container:!0,spacing:1,children:n.map((e=>{return Object(H.jsxs)(te.a,{item:!0,xs:6,children:[Object(H.jsx)(Kc,{room:e.room}),Object(H.jsx)(re.a,{component:"span",variant:"body2",sx:{ml:1},children:(t=e.startTime,n=e.endTime,"".concat(hi(t)," - ").concat(hi(n)))})]},e.id);var t,n}))})}),0<m&&m<100&&Object(H.jsx)(ce.a,{variant:"determinate",value:m,sx:{position:"absolute",bottom:0,left:0,right:0}})]})};var gi,vi=function(e){let{venues:t,competitionEvents:n,competitionId:i}=e;const a=ue(t.flatMap((e=>e.rooms)).flatMap((e=>e.activities.map((t=>({...t,room:e}))))).filter((e=>"official"===ei(e.activityCode).type&&si(n,e.activityCode))),(e=>e.startTime)),r=je(a.map((e=>xi(e.startTime)))),[o,s]=Object(c.useState)(function(e){const t=Object(ji.a)(Object(ui.a)(),e.map(et.a));return e[t]}(r)),l=de(a.filter((e=>xi(e.startTime)===o)),(e=>e.activityCode));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(bt.a,{indicatorColor:"secondary",variant:"scrollable",textColor:"inherit",value:o,onChange:(e,t)=>s(t),sx:{mb:2},children:r.map((e=>{return Object(H.jsx)(mt.a,{label:(t=e,Object(di.a)(Object(et.a)(t),"EEEE, MMM d")),value:e},e);var t}))}),Object(H.jsx)(te.a,{container:!0,spacing:1,children:Object.entries(l).map((e=>{let[t,c]=e;return Object(H.jsx)(te.a,{item:!0,xs:12,sm:6,lg:4,children:Object(H.jsx)(fi,{activityCode:t,activities:c,competitionEvents:n,competitionId:i})},t)}))})]})};const yi=Object(K.a)(gi||(gi=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      name\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          active\n          open\n          number\n        }\n      }\n      venues {\n        id\n        name\n        country {\n          iso2\n          name\n        }\n        rooms {\n          id\n          name\n          color\n          activities {\n            id\n            activityCode\n            name\n            startTime\n            endTime\n          }\n        }\n      }\n    }\n  }\n"])));var wi=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(yi,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t,a=oi(i),o=(s=i.competitionEvents,l=e=>e.rounds.filter((e=>e.active)).map((t=>[e,t])),s.reduce(((e,t)=>e.concat(l(t))),[]));var s,l;return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsxs)(re.a,{variant:"h5",gutterBottom:!0,noWrap:!0,children:["Welcome to ",i.name,"!"]}),Object(H.jsxs)(re.a,{children:["This competition takes place in\n            ".concat(1===a.length?a[0].name:"multiple countries",". Check out the "),Object(H.jsx)(kc.a,{href:ot("/competitions/".concat(i.wcaId)),target:"_blank",underline:"hover",children:"WCA website"})," for more details on the competition."]})]}),o.length>0&&Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Active rounds"}),Object(H.jsx)(te.a,{container:!0,spacing:1,children:o.map((e=>{let[t,n]=e;return Object(H.jsx)(te.a,{item:!0,xs:12,sm:6,lg:4,children:Object(H.jsx)(xe.a,{children:Object(H.jsx)(Yc.a,{component:r.b,to:"/competitions/".concat(i.id,"/rounds/").concat(n.id),children:Object(H.jsx)(ge.a,{avatar:Object(H.jsx)(Fe.a,{eventId:t.event.id}),title:"".concat(t.event.name," - ").concat(n.name)})})})},n.id)}))})]}),Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsxs)(te.a,{container:!0,alignContent:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(re.a,{variant:"h5",children:"Schedule"})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Lt.a,{title:"\n              All the dates and times below are displayed in your local timezone: ".concat(Intl.DateTimeFormat().resolvedOptions().timeZone,"\n              "),children:Object(H.jsx)(Xc.a,{color:"action"})})})]}),Object(H.jsx)(vi,{venues:i.venues,competitionEvents:i.competitionEvents,competitionId:i.id})]})]})},Ci=n(758),Ii=n(440),ki=n.n(Ii),Si=n(460);var Ai=Object(Si.a)(i.a,{useCssModules:!1});const Pi={cell:{fontSize:"1.5rem",pr:0,"&:last-child":{pr:4}},ranking:{width:75,pr:2},advancing:{color:e=>e.palette.getContrastText(Dn.a.A400),backgroundColor:Dn.a.A400},name:{width:"22%",overflow:"hidden",textOverflow:"ellipsis"},country:{width:50}},Ei={SHOWING:Symbol("showing"),SHOWN:Symbol("shown"),HIDING:Symbol("hiding")},Ti=1e4,Ni=1e3,Ri=1e3;function Di(){return Math.floor((window.innerHeight-64-50)/63)}var Fi=function(e){let{results:t,format:n,eventId:i,title:a,exitUrl:o}=e;const[s,l]=Object(c.useState)(Ei.SHOWING),[d,j]=Object(c.useState)(0),u=Cn(i,n),b=t.filter((e=>e.attempts.length>0));return Object(c.useEffect)((()=>{if(s!==Ei.SHOWN){if(s===Ei.SHOWING){const e=setTimeout((()=>{l(Ei.SHOWN)}),Ni);return()=>clearTimeout(e)}if(s===Ei.HIDING){const e=setTimeout((()=>{l(Ei.SHOWING),j((e=>{const t=e+Di();return t>=b.length?0:t}))}),Ri);return()=>clearTimeout(e)}throw new Error("Unrecognized status: ".concat(s))}if(b.length>Di()){const e=setTimeout((()=>{l(Ei.HIDING)}),Ti);return()=>clearTimeout(e)}}),[s,b.length]),Object(H.jsx)(Zn.a,{fullScreen:!0,open:!0,TransitionComponent:Ci.a,TransitionProps:{direction:"up"},transitionDuration:500,children:Object(H.jsxs)(ae.a,{sx:{maxHeight:"100vh",overflow:"hidden"},children:[Object(H.jsx)(Nc.a,{position:"sticky",children:Object(H.jsxs)(Sc.a,{children:[Object(H.jsx)(re.a,{variant:"h4",color:"inherit",children:a}),Object(H.jsx)(ae.a,{sx:{flexGrow:1}}),Object(H.jsx)(zt.a,{color:"inherit",component:r.b,to:o,size:"large",children:Object(H.jsx)(ki.a,{})})]})}),Object(H.jsxs)(ht.a,{sx:{tableLayout:"fixed"},children:[Object(H.jsx)(ft.a,{children:Object(H.jsxs)(gt.a,{children:[Object(H.jsx)(vt.a,{sx:{...Pi.cell,...Pi.ranking},align:"right",children:"#"}),Object(H.jsx)(vt.a,{sx:{...Pi.cell,...Pi.name},children:"Name"}),Object(H.jsx)(vt.a,{sx:{...Pi.cell,...Pi.country}}),se(n.numberOfAttempts,(e=>Object(H.jsx)(vt.a,{sx:Pi.cell,align:"right",children:e+1},e))),u.map((e=>{let{name:t}=e;return Object(H.jsx)(vt.a,{sx:Pi.cell,align:"right",children:t},t)}))]})}),Object(H.jsx)(xt.a,{children:b.slice(d,d+Di()).map(((e,t)=>Object(H.jsx)(ne.a,{timeout:{enter:Ni,exit:Ri},style:s===Ei.SHOWING?{transitionDelay:"".concat(150*t,"ms")}:{},in:[Ei.SHOWING,Ei.SHOWN].includes(s),children:Object(H.jsxs)(gt.a,{sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(H.jsx)(vt.a,{align:"right",sx:{...Pi.cell,...Pi.ranking,...e.advancing?Pi.advancing:{}},children:e.ranking}),Object(H.jsx)(vt.a,{sx:{...Pi.cell,...Pi.name},children:e.person.name}),Object(H.jsx)(vt.a,{sx:Pi.cell,align:"center",children:Object(H.jsx)(Ai,{code:e.person.country.iso2.toLowerCase()})}),kn(e,n.numberOfAttempts).map(((e,t)=>Object(H.jsx)(vt.a,{align:"right",sx:Pi.cell,children:ln(e,i)},t))),u.map(((t,n)=>{let{name:c,field:a,recordTagField:r}=t;return Object(H.jsx)(vt.a,{align:"right",sx:{...Pi.cell,fontWeight:0===n?600:400},children:Object(H.jsx)(Bn,{recordTag:e[r],hidePb:!0,children:ln(e[a],i)})},c)}))]})},e.person.id)))})]})]})})},Wi=n(139),Mi=n.n(Wi);function zi(e){switch(e){case"222":return"2x2x2";case"333":return"3x3x3";case"333oh":return"3x3x3 One-Handed";case"333fm":return"3x3x3 Fewest Moves";case"333bf":return"3x3x3 Blindfolded";case"333mbf":return"3x3x3 Multi-Blindfolded";case"444":return"4x4x4";case"444bf":return"4x4x4 Blindfolded";case"555":return"5x5x5";case"555bf":return"5x5x5 Blindfolded";case"666":return"6x6x6";case"777":return"7x7x7";case"clock":return"Clock";case"minx":return"Megaminx";case"sq1":return"Square-1";case"skewb":return"Skewb";case"pyram":return"Pyraminx"}}var Bi=function(e){let{type:t,eventId:n,wcaId:c}=e;return Object(H.jsx)(Lt.a,{title:"Update Stream",children:Object(H.jsx)(zt.a,{color:"inherit",onClick:()=>{!async function(e,t,n){var c=new Headers;c.append("Content-Type","application/json");const i=await fetch("https://raw.githubusercontent.com/robiningelbrecht/wca-rest-api/master/api/persons/".concat(n,".json")),a=JSON.parse(await i.text()),r=a.rank.singles.find((e=>e.eventId===t));let o="First Time Solver";void 0!==r&&(o="".concat(zi(t)," PR Single: ").concat(ln(r.best,t)));const s=a.rank.averages.find((e=>e.eventId===t));let l="First Time Solver";void 0!==s&&(l="".concat(zi(t)," PR Average: ").concat(ln(s.best,t)));const d={model:{fields:[{defaultValue:"Player Name",id:"name",title:"Player Name",type:"text"},{defaultValue:"0",id:"single",title:"Player Best Single",type:"text"},{defaultValue:"0",id:"average",title:"Player Best Average",type:"text"}]},payload:{name:a.name+"",single:"single"===e?o:l}};console.log(a);var j={method:"PUT",headers:c,body:JSON.stringify(d),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/0NdPtR2WpFYZtDZ6qflFxT/data",j).then((e=>e.text())).then((e=>console.log(e))).catch((e=>{console.log("error",e)}))}(t,n,c)},size:"small",children:Object(H.jsx)(Mi.a,{})})})};const Vi={cell:{pr:{xs:"6px",md:"16px"},pl:{xs:"10px",md:"16px"},"&:last-child":{pr:2}},ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:e=>e.palette.getContrastText(Dn.a.A400),backgroundColor:Dn.a.A400},name:{textOverflow:"ellipsis",overflow:"hidden",pr:0,maxWidth:{xs:150,md:250}}};var $i=i.a.memo((e=>{let{results:t,format:n,eventId:c,competitionId:i,onResultClick:a}=e;const o=Object(z.a)((e=>e.breakpoints.up("sm"))),s=Object(z.a)((e=>e.breakpoints.up("md"))),l=Cn(c,n);return Object(H.jsx)($e.a,{children:Object(H.jsxs)(ht.a,{size:"small",children:[Object(H.jsx)(ft.a,{children:Object(H.jsxs)(gt.a,{children:[Object(H.jsx)(vt.a,{sx:{...Vi.cell,...Vi.ranking},align:"right",children:"#"}),Object(H.jsx)(vt.a,{sx:{...Vi.cell,...Vi.ranking},align:"right",children:"PR"}),Object(H.jsx)(vt.a,{sx:{...Vi.cell,...Vi.ranking},align:"right",children:"AVG"}),Object(H.jsx)(vt.a,{sx:Vi.cell,children:"Name"}),s&&Object(H.jsx)(vt.a,{sx:Vi.cell,children:"Country"}),o&&se(n.numberOfAttempts,(e=>Object(H.jsx)(vt.a,{sx:Vi.cell,align:"right",children:e+1},e))),l.map((e=>{let{name:t}=e;return Object(H.jsx)(vt.a,{sx:Vi.cell,align:"right",children:t},t)}))]})}),Object(H.jsx)(xt.a,{children:t.map((e=>Object(H.jsxs)(gt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:()=>a&&a(e),children:[Object(H.jsx)(vt.a,{align:"right",sx:{...Vi.cell,...Vi.ranking,...e.advancing?Vi.advancing:{}},children:e.ranking}),Object(H.jsx)(vt.a,{align:"right",sx:{...Vi.cell,...Vi.ranking},children:Object(H.jsx)(Bi,{type:"single",eventId:c,wcaId:e.person.wcaId})}),Object(H.jsx)(vt.a,{align:"right",sx:{...Vi.cell,...Vi.ranking},children:Object(H.jsx)(Bi,{type:"average",eventId:c,wcaId:e.person.wcaId})}),Object(H.jsx)(vt.a,{sx:{...Vi.cell,...Vi.name},children:o?Object(H.jsx)(kc.a,{component:r.b,to:"/competitions/".concat(i,"/competitors/").concat(e.person.id),underline:"hover",children:e.person.name}):e.person.name}),s&&Object(H.jsx)(vt.a,{sx:Vi.cell,children:e.person.country.name}),o&&kn(e,n.numberOfAttempts).map(((e,t)=>Object(H.jsx)(vt.a,{align:"right",sx:Vi.cell,children:ln(e,c)},t))),l.map(((t,n)=>{let{name:i,field:a,recordTagField:r}=t;return Object(H.jsx)(vt.a,{align:"right",sx:{...Vi.cell,fontWeight:0===n?600:400},children:Object(H.jsx)(Bn,{recordTag:e[r],hidePb:!0,children:ln(e[a],c)})},i)}))]},e.id)))})]})})}));var Ui=function(e){let{result:t,format:n,eventId:c,competitionId:i,onClose:a}=e;const o=Cn(c,n);return Object(H.jsx)(Zn.a,{open:!!t,fullWidth:!0,onClose:a,children:!!t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(tc.a,{children:[t.person.name," ",t.ranking&&"#".concat(t.ranking)]}),Object(H.jsx)(Kn.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:"Name"}),Object(H.jsx)(re.a,{variant:"body2",children:t.person.name}),Object(H.jsx)(kc.a,{component:r.b,to:"/competitions/".concat(i,"/competitors/").concat(t.person.id),underline:"hover",children:"All results"})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:"Country"}),Object(H.jsx)(re.a,{variant:"body2",children:t.person.country.name})]}),t.ranking&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:"Attempts"}),Object(H.jsx)(re.a,{variant:"body2",children:t.attempts.map((e=>ln(e.result,c))).join(", ")})]}),o.map((e=>{let{name:n,field:i,recordTagField:a}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:n}),Object(H.jsx)(re.a,{variant:"body2",children:Object(H.jsx)(Bn,{recordTag:t[a],hidePb:!0,children:ln(t[i],c)})})]},n)}))]})]})}),Object(H.jsx)(Xn.a,{children:Object(H.jsx)(Ce.a,{color:"primary",onClick:a,children:"Close"})})]})})};const Li=100;var Hi=function(e){let{results:t,format:n,eventId:i,competitionId:a}=e;const r=Object(z.a)((e=>e.breakpoints.up("sm"))),[o,s]=Object(c.useState)(null),[l,d]=Object(c.useState)(t.length<=Li);Object(c.useEffect)((()=>{d(t.length<=Li)}),[t]);const j=Object(c.useCallback)((e=>{s(e)}),[]),u=Object(c.useMemo)((()=>l?t:t.slice(0,Li)),[t,l]);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,style:{width:"100%"},children:Object(H.jsx)($i,{results:u,format:n,eventId:i,competitionId:a,onResultClick:j})}),!l&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Ce.a,{variant:"contained",disableElevation:!0,size:"small",onClick:()=>d(!0),children:[t.length-Li," more"]})})]}),!r&&Object(H.jsx)(Ui,{result:o,format:n,eventId:i,competitionId:a,onClose:()=>s(null)})]})},qi=n(442),Gi=n.n(qi),_i=n(833),Ji=n(792),Qi=n(795),Yi=n(441),Zi=n.n(Yi);function Xi(e,t){if(e<t)switch(e){case 1:return 5===t?"\u2074":"\xb2";case 2:return 5===t?"\xb3":"\xb9";case 3:return"\xb2";case 4:return"\xb9";default:return""}return""}function Ki(e){let t=e;return e.includes("(")&&(t=e.split("(")[0].trim()),function(e){const t=e.trim().split(/\s+/);if(t.length<2)return e;const n=t[0],c=t[t.length-1],i=n.charAt(0);return"".concat(i,". ").concat(c)}(t)}function ea(e){return void 0===e||null===e?"":e.penalty<0?"DNF":null===e.result?"":Math.trunc(100*e.result)}function ta(e,t){const n={};if(n["p".concat(t,"Name")]="",n["p".concat(t,"Score1")]="",n["p".concat(t,"Score2")]="",n["p".concat(t,"Score3")]="",n["p".concat(t,"Score4")]="",n["p".concat(t,"Score5")]="",n["p".concat(t,"Count")]="",n["p".concat(t,"Remaining")]="",n["p".concat(t,"Mean")]="--",n["p".concat(t,"Best")]="--",n["p".concat(t,"Average")]="--",n["p".concat(t,"Worst")]="--",null===e)return n;const c=[];c.push(ea(e.current_results[0])),c.push(ea(e.current_results[1])),c.push(ea(e.current_results[2])),c.push(ea(e.current_results[3])),c.push(ea(e.current_results[4]));const i=c.filter((e=>e<0)).length,a=c.filter((e=>""===e)).length;let r=na(function(e){if(e.filter((e=>""===e)).length>0)return"--";if(e.filter((e=>"DNF"===e)).length>1)return-1;const t=e.filter((e=>"DNF"!==e));return e.length!==t.length?(t.sort(((e,t)=>t-e)),t.slice(0,3).reduce(((e,t)=>e+t),0)/3):(t.sort(((e,t)=>e-t)),t.slice(1,4).reduce(((e,t)=>e+t),0)/3)}(c));r<0&&0===a&&(r="DNF"),a>0&&(r="--");let o=1===a?na(function(e){if(4!==e.filter((e=>""!==e)).length)return"--";if(e.filter((e=>"DNF"===e)).length>1)return-1;const t=e.filter((e=>"DNF"!==e&&""!==e));return t.push(0),t.sort(((e,t)=>e-t)),t.slice(1,4).reduce(((e,t)=>e+t),0)/3}(c)):"--";o<0&&(o="DNF");let s=1===a?na(function(e){if(4!==e.filter((e=>""!==e)).length)return"--";if(e.filter((e=>"DNF"===e)).length>0)return-1;const t=e.filter((e=>"DNF"!==e&&""!==e));return t.sort(((e,t)=>t-e)),t.slice(0,3).reduce(((e,t)=>e+t),0)/3}(c)):"--";return s<0&&(s="DNF"),n["p".concat(t,"Name")]=e.name,n["p".concat(t,"Score1")]=""!==c[0]?na(c[0]):"",n["p".concat(t,"Score2")]=""!==c[1]?na(c[1]):"",n["p".concat(t,"Score3")]=""!==c[2]?na(c[2]):"",n["p".concat(t,"Score4")]=""!==c[3]?na(c[3]):"",n["p".concat(t,"Score5")]=""!==c[4]?na(c[4]):"",n["p".concat(t,"Count")]=i,n["p".concat(t,"Remaining")]=a,n["p".concat(t,"Mean")]=r,n["p".concat(t,"Best")]=o,n["p".concat(t,"Average")]=r,n["p".concat(t,"Worst")]=s,n}function na(e){const t=e/100,n=Math.floor(t/3600),c=Math.floor(t%3600/60),i=t%60;return n>0?"".concat(String(n),":").concat(String(c).padStart(2,"0"),":").concat(String(i.toFixed(2)).padStart(2,"0")):c>0&&i>9?"".concat(String(c),":").concat(String(i.toFixed(2)).padStart(2,"0")):c>0&&i<10?"".concat(String(c),":0").concat(String(i.toFixed(2))):"".concat(String(i.toFixed(2)))}function ca(e,t,n){if("average"===t){if(5===n)return function(e){if(e.filter((e=>""===e)).length>0)return"";if(e.filter((e=>e<=0)).length>1)return-1;const t=e.filter((e=>e>0));switch(t.length){case 0:default:return"--";case 1:return t[0];case 2:return e.length===t.length?t.reduce(((e,t)=>e+t),0)/2:(t.sort(((e,t)=>e-t)),t[1]);case 3:return e.length===t.length?(t.sort(((e,t)=>e-t)),t[1]):(t.sort(((e,t)=>e-t)),(t[1]+t[2])/2);case 4:return e.length===t.length?(t.sort(((e,t)=>e-t)),(t[1]+t[2])/2):(t.sort(((e,t)=>e-t)),(t[1]+t[2]+t[3])/3);case 5:return t.sort(((e,t)=>e-t)),(t[1]+t[2]+t[3])/3}}(e);if(3===n)return function(e){if(e.filter((e=>""===e)).length>0)return"";if(e.filter((e=>e<=0)).length>0)return-1;switch(e.length){case 1:return e[0];case 2:return e.reduce(((e,t)=>e+t),0)/2;case 3:return e.reduce(((e,t)=>e+t),0)/3}return""}(e)}if("best"===t){const t=e.filter((e=>e>0));return 0===t.length?-1:(t.sort(((e,t)=>e-t)),t[0])}}var ia=function(e){let{round:t,projections:n}=e;const[i,a]=Object(c.useState)(0);return Object(c.useEffect)((()=>{a(0)}),t.competitionEvent.competition.id),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Lt.a,{title:n?"Update Projections":"Update Fulltext",children:Object(H.jsxs)(zt.a,{color:"inherit",onClick:()=>{n&&async function(e,t){const n={model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"},{defaultValue:"1",id:"roundId",title:"Round Id",type:"text"},{defaultValue:"Round 1",id:"roundName",title:"Round Name",type:"text"},{defaultValue:"Round Format",id:"roundFormat",title:"Round Format",type:"text"}]},payload:{competitionName:e.competitionEvent.competition.name,competitionId:e.competitionEvent.competition.id,eventName:e.competitionEvent.event.name,eventId:e.competitionEvent.event.id,roundName:e.name,roundId:e.id,roundFormat:e.format.sortBy}};let c=e.competitionEvent.event.id;const i=[];e.results.forEach((t=>{const n={},a=[];n.rawSolves=[],n.solves=[],t.attempts.forEach(((e,t)=>{a.push(e.result),n.rawSolves.push(e.result),n.solves.push(ln(e.result,c))})),null!==t.ranking&&null!==t.attempts&&i.push({...n,name:t.person.name,country:t.person.country.iso2,average:ln(t.average,c),best:ln(t.best,c),ranking:t.ranking,advancing:t.advancing,solveCount:t.attempts.length,solveProjection:ln(ca(a,e.format.sortBy,e.format.numberOfAttempts))})})),i.sort(((t,n)=>{switch(e.format.sortBy){case"average":const c=t.solveCount===e.format.numberOfAttempts?t.average:t.solveProjection,i=n.solveCount===e.format.numberOfAttempts?n.average:n.solveProjection;return"DNF"===c?1e6:"DNF"===i?c:c-i;case"best":return"DNF"===t.best?1e6:"DNF"===n.best?t.best:t.best-n.best;default:return 0}}));for(var a=0;a<8;a++){const t=i[a];n.model.fields.push({defaultValue:"",id:"player".concat(a,"name"),title:"Player ".concat(a," Name"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"country"),title:"Player ".concat(a," Country"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"solveAverage"),title:"Player ".concat(a," Average"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"solveProjection"),title:"Player ".concat(a," Projection"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"solveBest"),title:"Player ".concat(a," Best"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"solveRank"),title:"Player ".concat(a," Rank"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"solveAdvancing"),title:"Player ".concat(a," Advancing"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"solveCount"),title:"Player ".concat(a," Solve Count"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"BPA"),title:"Player ".concat(a," BPA"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(a,"WPA"),title:"Player ".concat(a," WPA"),type:"text"}),n.payload["player".concat(a,"name")]="",n.payload["player".concat(a,"country")]="",n.payload["player".concat(a,"solveAverage")]="",n.payload["player".concat(a,"solveBest")]="",n.payload["player".concat(a,"solveRank")]="",n.payload["player".concat(a,"solveAdvancing")]="",n.payload["player".concat(a,"solveCount")]=0,n.payload["player".concat(a,"solveProjection")]="",n.payload["player".concat(a,"BPA")]="",n.payload["player".concat(a,"WPA")]="";for(var r=0;r<e.format.numberOfAttempts;r++)n.model.fields.push({defaultValue:"",id:"player".concat(a,"solve").concat(r),title:"Player ".concat(a," Solve ").concat(r),type:"text"}),n.payload["player".concat(a,"solve").concat(r)]="";if(null!==t&&void 0!==t)if(n.payload["player".concat(a,"name")]=Ki(t.name),n.payload["player".concat(a,"country")]=t.country,n.payload["player".concat(a,"solveAverage")]=t.average,n.payload["player".concat(a,"solveBest")]=t.best,n.payload["player".concat(a,"solveRank")]=a+1,n.payload["player".concat(a,"solveAdvancing")]=t.advancing,n.payload["player".concat(a,"solveCount")]=t.solveCount,n.payload["player".concat(a,"solveProjection")]=e.format.numberOfAttempts!==t.solveCount?Xi(t.solveCount,e.format.numberOfAttempts)+t.solveProjection:"average"===e.format.sortBy?t.average:t.solveProjection,t.solves.forEach(((e,t)=>{n.model.fields.push({defaultValue:"",id:"player".concat(a,"solve").concat(t),title:"Player ".concat(a," Solve ").concat(t),type:"text"}),n.payload["player".concat(a,"solve").concat(t)]=e})),e.format.numberOfAttempts===t.rawSolves.length+1)n.payload["player".concat(a,"BPA")]=ln(tn(t.rawSolves.concat(.01),c),c),n.payload["player".concat(a,"WPA")]=ln(tn(t.rawSolves.concat(-1),c),c);else if(e.format.numberOfAttempts===t.rawSolves.length){const e=t.rawSolves.slice(0,t.rawSolves.length-1);n.payload["player".concat(a,"BPA")]=ln(tn(e.concat(.01),c),c),n.payload["player".concat(a,"WPA")]=ln(tn(e.concat(-1),c),c)}else n.payload["player".concat(a,"BPA")]="--",n.payload["player".concat(a,"WPA")]="--"}var o=new Headers;o.append("Content-Type","application/json");var s={method:"PUT",headers:o,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/2qr0ERS5HntVvFVGGEpxEH/data",s).then((e=>e.text())).then((e=>console.log(JSON.parse(e)))).catch((e=>console.log("error",e)))}(t),n||async function(e,t){const n={model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"},{defaultValue:"1",id:"roundId",title:"Round Id",type:"text"},{defaultValue:"Round 1",id:"roundName",title:"Round Name",type:"text"}]},payload:{competitionName:e.competitionEvent.competition.name,competitionId:e.competitionEvent.competition.id,eventName:e.competitionEvent.event.name,eventId:e.competitionEvent.event.id,roundName:e.name,roundId:e.id}};let c=e.competitionEvent.event.id;e.results.forEach(((e,i)=>{if(null!==e.ranking&&e.ranking>t&&e.ranking<t+9){const t=i%8;n.model.fields.push({defaultValue:"",id:"player".concat(t,"name"),title:"Player ".concat(t," Name"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"country"),title:"Player ".concat(t," Country"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveAverage"),title:"Player ".concat(t," Average"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveBest"),title:"Player ".concat(t," Best"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveRank"),title:"Player ".concat(t," Rank"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveAdvancing"),title:"Player ".concat(t," Advancing"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveCount"),title:"Player ".concat(t," Solve Count"),type:"text"}),n.payload["player".concat(t,"name")]=e.person.name,n.payload["player".concat(t,"country")]=e.person.country.iso2,n.payload["player".concat(t,"solveAverage")]=ln(e.average,c),n.payload["player".concat(t,"solveBest")]=ln(e.best,c),n.payload["player".concat(t,"solveRank")]=e.ranking,n.payload["player".concat(t,"solveAdvancing")]=e.advancing,n.payload["player".concat(t,"solveCount")]=e.attempts.length,e.attempts.forEach(((e,i)=>{n.model.fields.push({defaultValue:"",id:"player".concat(t,"solve").concat(i),title:"Player ".concat(t," Solve ").concat(i),type:"text"}),n.payload["player".concat(t,"solve").concat(i)]=ln(e.result,c)}))}}));var i=new Headers;i.append("Content-Type","application/json");var a={method:"PUT",headers:i,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/2dVw6vmF70TLbJ0h7xjSWb/data",a).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e)))}(t,i)},size:"large",children:[n&&Object(H.jsx)(Zi.a,{}),!n&&Object(H.jsx)(Mi.a,{})]})}),!n&&Object(H.jsxs)(_i.a,{children:[Object(H.jsx)(Qi.a,{id:"demo-simple-select-label",children:"Rank Range"}),Object(H.jsx)(Ji.a,{labelId:"demo-simple-select-label",id:t.eventId,value:i,label:"Rank Range",onChange:e=>{console.log(e.target.value),a(e.target.value)},children:t.results.map(((e,n)=>{if(n%8===0)return console.log(n),Object(H.jsxs)(Hn.a,{value:n,children:[n+1," to ",n+8]},"".concat(t.competitionEvent.competition.id,"-").concat(n))}))})]})]})};var aa,ra,oa,sa=function(e){let{round:t,competitionId:n}=e;const c=Object(z.a)((e=>e.breakpoints.up("md")));return Object(H.jsxs)(te.a,{item:!0,container:!0,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(re.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]})}),Object(H.jsx)(te.a,{item:!0,style:{flexGrow:1}}),c&&Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Lt.a,{title:"PDF",placement:"top",children:Object(H.jsx)(zt.a,{component:"a",target:"_blank",href:rt("/pdf/rounds/".concat(t.id)),size:"large",children:Object(H.jsx)(Yn.a,{})})}),Object(H.jsx)(Lt.a,{title:"Projector view",placement:"top",children:Object(H.jsx)(zt.a,{component:r.b,to:"/competitions/".concat(n,"/rounds/").concat(t.id,"/projector"),size:"large",children:Object(H.jsx)(Gi.a,{})})}),Object(H.jsx)(ia,{round:t,projections:!0}),Object(H.jsx)(ia,{round:t,projections:!1})]})]})};const la=Object(K.a)(aa||(aa=Object(X.a)(["\n  fragment roundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      wcaId\n      id\n      name\n      wcaId\n      country {\n        iso2\n        name\n      }\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"]))),da=Object(K.a)(ra||(ra=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      finished\n      active\n      competitionEvent {\n        id\n        competition {\n          id\n          name\n        }\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),la),ja=Object(K.a)(oa||(oa=Object(X.a)(["\n  subscription RoundUpdated($id: ID!) {\n    roundUpdated(id: $id) {\n      id\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),la);var ua=function(){const{competitionId:e,roundId:t}=Object(Z.h)(),{data:n,loading:a,error:r,subscribeToMore:o}=Object(ee.b)(da,{variables:{id:t}}),[s,l]=i.a.useState(void 0);Object(c.useEffect)((()=>{n&&l(n)}),[n]);const d=n||s,j=d&&d.round&&(!d.round.finished||d.round.active);if(Object(c.useEffect)((()=>{if(j){return o({document:ja,variables:{id:t}})}}),[o,t,j]),!d)return Object(H.jsx)(ie,{});if(r)return Object(H.jsx)(he,{error:r});const{round:u}=d;return Object(H.jsxs)(H.Fragment,{children:[a&&Object(H.jsx)(ie,{}),Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(sa,{round:u,competitionId:e})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"projector",element:Object(H.jsx)(Fi,{results:u.results,format:u.format,eventId:u.competitionEvent.event.id,title:"".concat(u.competitionEvent.event.name," - ").concat(u.name),exitUrl:"/competitions/".concat(e,"/rounds/").concat(t)})}),Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Hi,{results:u.results,format:u.format,eventId:u.competitionEvent.event.id,competitionId:e})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/competitions/".concat(e,"/rounds/").concat(t)})})]})})]})]})},ba=n(50),ma=n(266),pa=n.n(ma);var ha,xa=function(e){let{competitors:t,competitionId:n}=e;const[i,a]=Object(c.useState)(""),o=function(e,t){const n=t.toLowerCase().split(/\s+/);return e.filter((e=>n.every((t=>e.name.toLowerCase().includes(t)))))}(t,i).sort(((e,t)=>e.name.localeCompare(t.name)));return Object(H.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)($e.a,{sx:{p:"2px 2px 2px 16px",display:"inline-block"},children:[Object(H.jsx)(ba.c,{autoFocus:!0,value:i,placeholder:"Search competitor",onChange:e=>a(e.target.value)}),Object(H.jsx)(zt.a,{disabled:!0,size:"large",children:Object(H.jsx)(pa.a,{})})]})}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(fe.a,{children:o.map((e=>Object(H.jsxs)(ve.a,{button:!0,component:r.b,to:"/competitions/".concat(n,"/competitors/").concat(e.id),children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Ai,{code:e.country.iso2.toLowerCase(),size:"lg"})}),Object(H.jsx)(we.a,{primary:e.name})]},e.id)))})})]})};const Oa=Object(K.a)(ha||(ha=Object(X.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var fa=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Oa,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t;return Object(H.jsx)(xa,{competitors:i.competitors,competitionId:i.id})},ga=n.p+"static/media/wca-logo.513c1572.svg";const va={ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:e=>e.palette.getContrastText(Dn.a.A400),backgroundColor:Dn.a.A400},roundName:{width:{xs:150,lg:200}}};var ya=function(e){let{results:t,competitionId:n,onResultClick:c}=e;const i=Object(z.a)((e=>e.breakpoints.up("sm"))),{format:a,competitionEvent:{event:o}}=t[0].round,s=Cn(o.id,a),l=Math.max(...t.map((e=>e.round.format.numberOfAttempts)));return Object(H.jsx)($e.a,{children:Object(H.jsxs)(ht.a,{size:"small",sx:{tableLayout:"fixed"},children:[Object(H.jsx)(ft.a,{children:Object(H.jsxs)(gt.a,{children:[Object(H.jsx)(vt.a,{align:"right",sx:va.ranking,children:"#"}),Object(H.jsx)(vt.a,{sx:va.roundName,children:"Round"}),i&&se(l,(e=>Object(H.jsx)(vt.a,{align:"right",children:e+1},e))),s.map((e=>{let{name:t}=e;return Object(H.jsx)(vt.a,{align:"right",children:t},t)}))]})}),Object(H.jsx)(xt.a,{children:t.map((e=>Object(H.jsxs)(gt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:t=>c(e,t),children:[Object(H.jsx)(vt.a,{align:"right",sx:{...va.ranking,...e.advancing?va.advancing:{}},children:e.ranking}),Object(H.jsx)(vt.a,{sx:va.roundName,children:i?Object(H.jsx)(kc.a,{component:r.b,to:"/competitions/".concat(n,"/rounds/").concat(e.round.id),underline:"hover",children:e.round.name}):e.round.name}),i&&kn(e,a.numberOfAttempts).map(((e,t)=>Object(H.jsx)(vt.a,{align:"right",children:ln(e,o.id)},t))),s.map(((t,n)=>{let{name:c,field:i,recordTagField:a}=t;return Object(H.jsx)(vt.a,{align:"right",sx:{fontWeight:0===n?600:400},children:Object(H.jsx)(Bn,{recordTag:e[a],children:ln(e[i],o.id)})},c)}))]},e.round.id)))})]})})};var wa=function(e){let{result:t,competitionId:n,onClose:c}=e;return Object(H.jsxs)(Zn.a,{open:!!t,fullWidth:!0,onClose:c,children:[!!t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(tc.a,{children:["#",t.ranking]}),Object(H.jsx)(Kn.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:"Event"}),Object(H.jsx)(re.a,{variant:"body2",children:t.round.competitionEvent.event.name})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:"Round"}),Object(H.jsx)(re.a,{variant:"body2",children:t.round.name}),Object(H.jsx)(kc.a,{component:r.b,to:"/competitions/".concat(n,"/rounds/").concat(t.round.id),underline:"hover",children:"All results"})]}),t.ranking&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:"Attempts"}),Object(H.jsx)(re.a,{variant:"body2",children:t.attempts.map((e=>ln(e.result,t.round.competitionEvent.event.id))).join(", ")})]}),Cn(t.round.competitionEvent.event.id,t.round.format).map((e=>{let{name:n,field:c,recordTagField:i}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle2",children:n}),Object(H.jsx)(re.a,{variant:"body2",children:Object(H.jsx)(Bn,{recordTag:t[i],children:ln(t[c],t.round.competitionEvent.event.id)})})]},n)}))]})]})})]}),Object(H.jsx)(Xn.a,{children:Object(H.jsx)(Ce.a,{color:"primary",onClick:c,children:"Close"})})]})};var Ca,Ia=function(e){let{results:t,competitionId:n}=e;const i=Object(z.a)((e=>e.breakpoints.up("sm"))),[a,r]=Object(c.useState)(null),o=de(ue(t.filter((e=>e.attempts.length>0)),[e=>e.round.competitionEvent.event.rank,e=>e.round.number]),(e=>e.round.competitionEvent.event.name));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(te.a,{container:!0,direction:"column",spacing:2,children:Object.entries(o).map((e=>{let[t,c]=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle1",gutterBottom:!0,children:t}),Object(H.jsx)(ya,{results:c,competitionId:n,onResultClick:e=>r(e)})]},t)}))}),!i&&Object(H.jsx)(wa,{result:a,competitionId:n,onClose:()=>r(null)})]})};const ka=Object(K.a)(Ca||(Ca=Object(X.a)(["\n  query Competitor($id: ID!) {\n    person(id: $id) {\n      id\n      name\n      wcaId\n      country {\n        iso2\n      }\n      results {\n        id\n        ranking\n        advancing\n        attempts {\n          result\n        }\n        best\n        average\n        singleRecordTag\n        averageRecordTag\n        round {\n          id\n          name\n          number\n          competitionEvent {\n            id\n            event {\n              id\n              name\n              rank\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n      }\n    }\n  }\n"])));var Sa,Aa=function(){const{competitionId:e,competitorId:t}=Object(Z.h)(),{data:n,loading:c,error:i}=Object(ee.b)(ka,{variables:{id:t}});if(c&&!n)return Object(H.jsx)(ie,{});if(i)return Object(H.jsx)(he,{error:i});const{person:a}=n;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,alignContent:"center",sx:{mb:2},children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(re.a,{variant:"h5",children:[a.name," ",Object(H.jsx)(Ai,{code:a.country.iso2.toLowerCase()})]})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),a.wcaId&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)("a",{href:ot("/persons/".concat(a.wcaId)),target:"_blank",rel:"noopener noreferrer",children:Object(H.jsx)("img",{src:ga,alt:"WCA Profile",height:"32",width:"32"})})})]}),Object(H.jsx)(Ia,{results:a.results,competitionId:e})]})};const Pa=Object(K.a)(Sa||(Sa=Object(X.a)(["\n  query Podiums($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      podiums {\n        round {\n          id\n          finished\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n        results {\n          id\n          ranking\n          advancing\n          attempts {\n            result\n          }\n          best\n          average\n          person {\n            id\n            name\n            country {\n              iso2\n              name\n            }\n          }\n          singleRecordTag\n          averageRecordTag\n        }\n      }\n    }\n  }\n"])));var Ea=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Pa,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t,[a,r]=(o=i.podiums,s=e=>e.round.finished,o.reduce(((e,t,n,c)=>(e[s(t,n,c)?0:1].push(t),e)),[[],[]]));var o,s;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Podiums"}),a.length>0?Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[a.map((e=>{let{round:t,results:n}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"subtitle1",gutterBottom:!0,children:t.competitionEvent.event.name}),Object(H.jsx)(Hi,{results:n,format:t.format,eventId:t.competitionEvent.event.id,competitionId:i.id})]},t.id)})),r.length>0&&Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{gutterBottom:!0,children:"Podiums for the following events are yet to be determined:"}),Object(H.jsx)(te.a,{container:!0,direction:"row",spacing:3,children:r.map((e=>{let{round:t}=e;return t.competitionEvent.event})).map((e=>Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Lt.a,{title:e.name,children:Object(H.jsx)("span",{children:Object(H.jsx)(Fe.a,{eventId:e.id})})})},e.id)))})]})]}):Object(H.jsx)(re.a,{children:"There are no podiums yet!"})]})},Ta=n(443),Na=n.n(Ta);var Ra=function(e){let{competitionId:t,index:n,onData:i}=e;const[a,r]=Object(c.useState)(null),[o,s]=Object(c.useState)("#CCCCCC");return Object(c.useEffect)((()=>{i(a,n)}),[a]),(e=>{const n=new WebSocket("wss://api.timebase.live/livestream/".concat(t,"/").concat(e));n.addEventListener("open",(t=>{console.log("Hello - "+e),s("#00ff00"),c()})),n.addEventListener("close",(t=>{console.log("Closed - "+e),s("#ff0000")})),n.addEventListener("message",(t=>{console.log("Message from server - "+e,t.data);const n=JSON.parse(t.data);r(n)}));const c=()=>{n.send("ping"),setTimeout(c,3e3)}})(n),Object(H.jsxs)($e.a,{style:{margin:16},children:[Object(H.jsxs)(te.a,{container:!0,children:[Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(Na.a,{style:{color:o}})}),Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsxs)(re.a,{variant:"body",children:["#",n]})}),Object(H.jsxs)(te.a,{item:!0,xs:8,children:[a&&Object(H.jsx)(re.a,{variant:"body",children:a.name}),!a&&Object(H.jsx)(re.a,{variant:"body",children:"--"})]})]}),Object(H.jsx)(Ce.a,{button:!0,onClick:()=>{i(a,n)},style:{paddingTop:0,paddingBottom:0},children:Object(H.jsx)(xe.a,{children:Object(H.jsx)(Oe.a,{children:Object(H.jsx)(re.a,{variant:"caption",children:"Send Stream"})})})},"Singular"+n),Object(H.jsx)(Ce.a,{button:!0,onClick:()=>{!function(e,t){var n=new Headers;n.append("Content-Type","application/json");var c={method:"GET",headers:n,redirect:"follow"};fetch("https://api.timebase.live/ping/".concat(e),c).then((e=>e.text())).then((e=>t(e))).catch((e=>{console.log("error",e)}))}(n,(e=>{null!==e&&r(JSON.parse(e))}))},children:Object(H.jsx)(xe.a,{children:Object(H.jsx)(Oe.a,{children:Object(H.jsx)(re.a,{variant:"caption",children:"Pull Timebase"})})})},"Timebase"+n)]},"paper"+n)};var Da,Fa=function(e){let{competitors:t,competitionId:n}=e;const[i,a]=Object(c.useState)([{channel:1,player:null},{channel:2,player:null}]);return Object(c.useEffect)((()=>{!function(e,t){const n={model:{fields:[{defaultValue:"Player 1 Name",id:"p1Name",title:"Player 1 Name",type:"text"},{defaultValue:"",id:"p1Score1",title:"Player 1 Score 1",type:"text"},{defaultValue:"",id:"p1Score2",title:"Player 1 Score 2",type:"text"},{defaultValue:"",id:"p1Score3",title:"Player 1 Score 3",type:"text"},{defaultValue:"",id:"p1Score4",title:"Player 1 Score 4",type:"text"},{defaultValue:"",id:"p1Score5",title:"Player 1 Score 5",type:"text"},{defaultValue:"",id:"p1Count",title:"Player 1 DNF Count",type:"text"},{defaultValue:"",id:"p1Remaining",title:"Player 1 Remaining Solves",type:"text"},{defaultValue:"",id:"p1Mean",title:"Player 1 Mean",type:"text"},{defaultValue:"",id:"p1Best",title:"Player 1 Best",type:"text"},{defaultValue:"",id:"p1Average",title:"Player 1 Average",type:"text"},{defaultValue:"",id:"p1Worst",title:"Player 1 Worst",type:"text"},{defaultValue:"Player 2 Name",id:"p2Name",title:"Player 2 Name",type:"text"},{defaultValue:"",id:"p2Score1",title:"Player 2 Score 1",type:"text"},{defaultValue:"",id:"p2Score2",title:"Player 2 Score 2",type:"text"},{defaultValue:"",id:"p2Score3",title:"Player 2 Score 3",type:"text"},{defaultValue:"",id:"p2Score4",title:"Player 2 Score 4",type:"text"},{defaultValue:"",id:"p2Score5",title:"Player 2 Score 5",type:"text"},{defaultValue:"",id:"p2Count",title:"Player 2 DNF Count",type:"text"},{defaultValue:"",id:"p2Remaining",title:"Player 2 Remaining Solves",type:"text"},{defaultValue:"",id:"p2Mean",title:"Player 2 Mean",type:"text"},{defaultValue:"",id:"p2Best",title:"Player 2 Best",type:"text"},{defaultValue:"",id:"p2Average",title:"Player 2 Average",type:"text"},{defaultValue:"",id:"p2Worst",title:"Player 2 Worst",type:"text"}]},payload:{...ta(e,1),...ta(t,2)}};var c=new Headers;c.append("Content-Type","application/json");var i={method:"PUT",headers:c,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/4uEqIEL6YSbGZbF4JwL5ac/data",i).then((e=>e.text())).then((e=>console.log(JSON.parse(e)))).catch((e=>{console.log("error",e)}))}(i[0].player,i[1].player)}),[i]),Object(H.jsx)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:Object(H.jsx)(te.a,{container:!0,item:!0,xs:12,children:[5,7,25,19,2,10].map((e=>Object(H.jsxs)(te.a,{container:!0,item:!0,xs:12,children:[Object(H.jsx)(te.a,{container:!0,item:!0,xs:1,children:Object(H.jsx)(Ce.a,{button:!0,onClick:()=>{a([{channel:e,player:null},{channel:i[1].channel,player:i[1].player}])},children:Object(H.jsx)(xe.a,{style:{paddingTop:0,paddingBottom:0,backgroundColor:i[0].channel===e?"green":"red"},children:Object(H.jsx)(Oe.a,{children:Object(H.jsx)(re.a,{variant:"h4",color:"white",children:"P1"})})})},"Player1-"+e)}),Object(H.jsx)(te.a,{container:!0,item:!0,xs:1,children:Object(H.jsx)(Ce.a,{button:!0,onClick:()=>{a([{channel:i[0].channel,player:i[0].player},{channel:e,player:null}])},children:Object(H.jsx)(xe.a,{style:{paddingTop:0,paddingBottom:0,backgroundColor:i[1].channel===e?"green":"red"},children:Object(H.jsx)(Oe.a,{children:Object(H.jsx)(re.a,{variant:"h4",color:"white",children:"P2"})})})},"Player2-"+e)}),Object(H.jsx)(te.a,{container:!0,item:!0,xs:10,children:Object(H.jsx)(Ra,{competitionId:n,index:e,onData:t=>{i[0].channel===e&&a([{channel:e,player:t},{channel:i[1].channel,player:i[1].player}]),i[1].channel===e&&a([{channel:i[0].channel,player:i[0].player},{channel:e,player:t}])}})})]})))})})};const Wa=Object(K.a)(Da||(Da=Object(X.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      wcaId\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var Ma,za=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Wa,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(ie,{});if(c)return Object(H.jsx)(he,{error:c});const{competition:i}=t;return Object(H.jsx)(Fa,{competitors:i.competitors,competitionId:i.wcaId})},Ba=n(444);const Va=Object(K.a)(Ma||(Ma=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));var $a=function(){const{competitionId:e}=Object(Z.h)(),{data:t,error:n,loading:c}=Object(ee.b)(Va,{variables:{id:e},pollInterval:6e4});if(n)return Object(H.jsx)(he,{error:n});const i=t?t.competition:null;return Object(H.jsxs)(Ba.a,{competition:i,children:[c&&Object(H.jsx)(ie,{}),Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(wi,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId/*",element:Object(H.jsx)(ua,{})}),Object(H.jsx)(Z.b,{path:"competitors",element:Object(H.jsx)(fa,{})}),Object(H.jsx)(Z.b,{path:"competitors/:competitorId",element:Object(H.jsx)(Aa,{})}),Object(H.jsx)(Z.b,{path:"podiums",element:Object(H.jsx)(Ea,{})}),Object(H.jsx)(Z.b,{path:"timebase",element:Object(H.jsx)(za,{})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/competitions/".concat(e)})})]})]})},Ua=n(34),La=n(449),Ha=n.n(La),qa=n(450),Ga=n.n(qa);const _a={"&:hover":{opacity:.7}};var Ja=function(){const e=Object(Ua.a)(),t=Object(c.useContext)(_);return Object(H.jsxs)(te.a,{container:!0,spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(zt.a,{size:"small",onClick:t,"aria-label":"Toggle theme",children:"dark"===e.palette.mode?Object(H.jsx)(Ha.a,{}):Object(H.jsx)(Ga.a,{})})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(kc.a,{sx:_a,variant:"subtitle1",component:r.b,to:"/about",underline:"none",children:"About"})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(kc.a,{sx:_a,variant:"subtitle1",href:"https://github.com/thewca/wca-live",target:"_blank",rel:"noopener noreferrer",underline:"none",children:"GitHub"})})]})},Qa=n(464),Ya=n(451);var Za=function(e){let{maxHeight:t,itemHeight:n,items:c,renderItem:i}=e;const a=Math.min(t,c.length*n);return Object(H.jsx)("div",{style:{height:a},children:Object(H.jsx)(Ya.a,{children:e=>{let{width:t}=e;return Object(H.jsx)(Qa.a,{height:a,width:t,itemSize:n,itemCount:c.length,children:e=>{let{index:t,style:n}=e;return i(c[t],{style:n})}})}})})},Xa=n(452),Ka=n.n(Xa);var er=function(e){let{competition:t}=e;const n=oi(t);if(1===n.length){const[e]=n;return Object(H.jsx)(Ai,{code:e.iso2.toLowerCase(),size:"lg"})}return Object(H.jsx)(Ka.a,{})};var tr=function(e){let{title:t,competitions:n}=e;return Object(H.jsxs)(fe.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Le.a,{disableSticky:!0,children:t}),Object(H.jsx)(Za,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;return Object(H.jsxs)(ve.a,{style:n,button:!0,component:r.b,to:"/competitions/".concat(e.id),children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Ue.a,{children:Object(H.jsx)(er,{competition:e})})}),Object(H.jsx)(we.a,{primary:e.name,secondary:pi(e.startDate,e.endDate)})]},e.id)}})]})};var nr,cr=function(e){let{past:t,inProgress:n,upcoming:i}=e;const[a,r]=Object(c.useState)(n.length>0?"inProgress":"upcoming"),o={past:t,inProgress:n,upcoming:i}[a];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(bt.a,{indicatorColor:"secondary",textColor:"inherit",value:a,onChange:function(e,t){r(t)},variant:"fullWidth",children:[Object(H.jsx)(mt.a,{label:"Upcoming",value:"upcoming"}),n.length>0&&Object(H.jsx)(mt.a,{label:"Right now",value:"inProgress"}),t.length>0&&Object(H.jsx)(mt.a,{label:"Past month",value:"past"})]}),Object(H.jsx)(tr,{competitions:o})]})},ir=n(453),ar=n.n(ir);const rr=Object(K.a)(nr||(nr=Object(X.a)(["\n  query Competitions($filter: String!) {\n    competitions(filter: $filter, limit: 10) {\n      id\n      name\n    }\n  }\n"])));var or=function(e){let{onChange:t,TextFieldProps:n={}}=e;const[i,a]=Object(c.useState)(""),r=St(i,250),{data:o,loading:s}=Object(ee.b)(rr,{variables:{filter:r}}),l=o?o.competitions:[];return Object(H.jsx)(It.a,{clearOnBlur:!0,blurOnSelect:!0,options:l,getOptionLabel:e=>e.name,loading:s,onInputChange:function(e,t,n){"input"===n&&a(t)},value:null,onChange:function(e,n,c){"selectOption"===c&&t(n)},renderInput:e=>Object(H.jsx)(kt.a,{...e,...n})})};var sr=function(e){let{upcoming:t,inProgress:n,past:i}=e;const a=Object(Z.g)(),[r,o]=Object(c.useState)(!1),s=Object(c.useRef)(null);return Object(H.jsxs)(te.a,{container:!0,alignItems:"center",justifyContent:"flex-end",spacing:1,children:[n.length>0&&ni&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Lt.a,{title:"Find nearest competition",placement:"top",children:Object(H.jsx)(zt.a,{onClick:()=>{li(n).then((e=>{a("/competitions/".concat(e.id))}))},"aria-label":"Nearest competition",size:"large",children:Object(H.jsx)(ar.a,{})})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Lt.a,{title:"Search competitions",placement:"top",children:Object(H.jsx)(zt.a,{onClick:()=>o(!r),size:"large",children:Object(H.jsx)(pa.a,{})})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(ne.a,{in:r,onEntered:()=>s.current.focus(),unmountOnExit:!0,children:Object(H.jsx)("div",{children:Object(H.jsx)(or,{onChange:e=>a("/competitions/".concat(e.id)),TextFieldProps:{fullWidth:!0,placeholder:"Search",variant:"outlined",size:"small",inputRef:s,onBlur:()=>o(!1),style:{width:250}}})})})})]})};var lr,dr=function(e){let{title:t,records:n}=e;return Object(H.jsxs)(fe.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Le.a,{disableSticky:!0,children:t}),Object(H.jsx)(ae.a,{sx:{maxHeight:300,overflowY:"auto"},children:n.map((e=>Object(H.jsxs)(ve.a,{button:!0,component:r.b,to:"/competitions/".concat(e.result.round.competitionEvent.competition.id,"/rounds/").concat(e.result.round.id),children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(zn,{recordTag:e.tag})}),Object(H.jsx)(we.a,{primary:Object(H.jsxs)("span",{children:[Object(H.jsx)("span",{children:"".concat(e.result.round.competitionEvent.event.name," ").concat(e.type," of ")}),Object(H.jsx)(ae.a,{component:"span",sx:{fontWeight:600},children:"".concat(ln(e.attemptResult,e.result.round.competitionEvent.event.id))})]}),secondary:"".concat(e.result.person.name," from ").concat(e.result.person.country.name)})]},e.id)))})]})};const jr=Object(K.a)(lr||(lr=Object(X.a)(["\n  query Competitions($from: Date!) {\n    competitions(from: $from) {\n      id\n      name\n      startDate\n      endDate\n      startTime\n      endTime\n      venues {\n        id\n        country {\n          iso2\n        }\n      }\n    }\n    recentRecords {\n      id\n      tag\n      type\n      attemptResult\n      result {\n        id\n        person {\n          id\n          name\n          country {\n            iso2\n            name\n          }\n        }\n        round {\n          id\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n            competition {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var ur=function(){const{data:e,loading:t,error:n}=Object(ee.b)(jr,{variables:{from:Oi()}});if(t&&!e)return Object(H.jsx)(ie,{});if(n)return Object(H.jsx)(he,{error:n});const{recentRecords:c}=e,i=ue(e.competitions,[e=>e.startTime,e=>e.endTime]),a=i.filter(ai),r=i.filter(ri),o=i.filter(ii).reverse();return Object(H.jsx)(ae.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3},display:"flex",minHeight:"100%"},children:Object(H.jsxs)(te.a,{container:!0,spacing:2,direction:"column",sx:{flexGrow:1},children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(sr,{upcoming:a,inProgress:r,past:o})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)($e.a,{children:Object(H.jsx)(cr,{upcoming:a,inProgress:r,past:o})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)($e.a,{children:Object(H.jsx)(dr,{title:"Recent records",records:c})})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(Ja,{})})]})})},br=n.p+"static/media/logo.513c1572.svg",mr=n(774),pr=n(802),hr=n(169),xr=n(454),Or=n.n(xr);var fr=function(){const e=Object(hr.a)(),t=Object(Z.g)();return Object(H.jsxs)(Hn.a,{onClick:function(){S(),t("/"),e.resetStore()},children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Or.a,{})}),"Sign out"]})},gr=n(455),vr=n.n(gr),yr=n(456),wr=n.n(yr);var Cr=function(e){let{user:t}=e;const[n,i]=Object(c.useState)(!1),a=Object(c.useRef)();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(zt.a,{ref:a,onClick:()=>i(!0),size:"small",children:Object(H.jsx)(pr.a,{alt:t.name,src:t.avatar.thumbUrl,size:"small"})}),Object(H.jsxs)(Ln.a,{open:n,onClick:()=>i(!1),onClose:()=>i(!1),anchorEl:a.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},sx:{minWidth:200},children:[Object(H.jsxs)(Hn.a,{component:r.b,to:"/account",children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(vr.a,{})}),"Account"]}),Object(H.jsxs)(Hn.a,{component:r.b,to:"/my-competitions",children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(wr.a,{})}),"My competitions"]}),Object(H.jsx)(mr.a,{sx:{my:1}}),Object(H.jsx)(fr,{})]})]})};var Ir=function(e){let{currentUser:t,loaded:n,children:c}=e;return Object(H.jsxs)(ae.a,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(H.jsx)(Sc.a,{children:Object(H.jsxs)(te.a,{container:!0,spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(ae.a,{component:r.b,to:"/",sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit"},children:[Object(H.jsx)("img",{src:br,alt:"wca logo",height:"40"}),Object(H.jsx)(re.a,{variant:"h6",sx:{ml:1},children:"WCA Live"})]})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),n&&(t?Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Cr,{user:t})}):Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ce.a,{variant:"outlined",size:"small",color:"inherit",component:r.b,to:"/sign-in",children:"Sign in"})}))]})}),Object(H.jsx)(ae.a,{sx:{flexGrow:1},children:c})]})},kr=n(457),Sr=n.n(kr);function Ar(e){return/^\d+-\d{6}$/.test(e)}var Pr,Er=function(e){let{onSubmit:t,disabled:n=!1}=e;const[i,a]=Object(c.useState)("");return Object(H.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(i)},children:Object(H.jsx)(kt.a,{variant:"outlined",label:"Code",value:i,onChange:e=>a(e.target.value),disabled:n,InputProps:{endAdornment:Object(H.jsx)(zt.a,{type:"submit",disabled:n||!Ar(i),size:"large",children:Object(H.jsx)(Sr.a,{})})}})})};const Tr=Object(K.a)(Pr||(Pr=Object(X.a)(["\n  mutation SignIn($code: String!) {\n    signIn(input: { code: $code }) {\n      token\n    }\n  }\n"])));var Nr=function(){const e=ke(),t=Object(hr.a)(),n=Object(Z.g)(),[c,{loading:i}]=Object(Ie.a)(Tr,{onError:e,onCompleted:e=>{let{signIn:{token:c}}=e;k(c),n("/"),t.resetStore()}});return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use a one-time code"}),Object(H.jsx)(re.a,{color:"textSecondary",align:"center",children:"Generate a code on your trusted device and type here to establish a session without going through the WCA website. This strategy is useful for scoretaking on an unknown machine."})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Er,{onSubmit:function(e){c({variables:{code:e}})},disabled:i})})]})};var Rr=function(){return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use your WCA account"}),Object(H.jsxs)(re.a,{color:"textSecondary",align:"center",children:["If you don't have a WCA account, you can create one"," ",Object(H.jsx)(kc.a,{href:ot("/users/sign_up"),underline:"hover",children:"here"}),"."]})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ce.a,{size:"large",variant:"contained",color:"primary",href:rt("/oauth/authorize"),children:"Sign in"})})]})};var Dr=function(){const e=Object(z.a)((e=>e.breakpoints.up("md")));return Object(H.jsx)(ae.a,{sx:{height:"100%",p:4},children:Object(H.jsxs)(te.a,{container:!0,alignItems:"center",sx:{height:"100%"},spacing:4,children:[Object(H.jsx)(te.a,{item:!0,xs:12,md:!0,children:Object(H.jsx)(Rr,{})}),e&&Object(H.jsx)(mr.a,{orientation:"vertical",flexItem:!0}),Object(H.jsx)(te.a,{item:!0,xs:12,md:!0,children:Object(H.jsx)(Nr,{})})]})})},Fr=n.p+"static/media/about.91bf4591.svg";var Wr=function(){return Object(H.jsx)(ae.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3}},children:Object(H.jsxs)(te.a,{container:!0,spacing:2,direction:"column",children:[Object(H.jsx)(te.a,{item:!0,sx:{textAlign:"center"},children:Object(H.jsx)("img",{src:Fr,alt:"about",height:"250"})}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"About"}),Object(H.jsxs)(re.a,{gutterBottom:!0,children:["WCA Live is an official platform for running"," ",Object(H.jsx)(kc.a,{href:"https://en.wikipedia.org/wiki/Speedcubing",underline:"hover",children:"Speedcubing"})," ","competitions governed by the"," ",Object(H.jsx)(kc.a,{href:"https://www.worldcubeassociation.org/about",underline:"hover",children:"World Cube Association"}),"."]}),Object(H.jsx)(re.a,{gutterBottom:!0,children:"Every weekend hundreds of competitors gather at speedcubing competitions all around the world. They aim to get podiums, break records and outperform their mates, but most importantly to enjoy spending time with their friends and meet new members of the community. There are up to 17 official events held at every competition - the well known 3x3x3 Cube, solved with both hands, one hand, blindfolded, but also less known types of puzzles like cubes from 2x2x2 up to 7x7x7, a tetrahedron and dodecahedron cubes and more!"}),Object(H.jsxs)(re.a,{children:["During the competition WCA Live is the place where the results are entered and managed. In every event a competitor waits for his cube to be mixed up, then performs each of his official attempts under the supervision of a judge (who makes sure all the"," ",Object(H.jsx)(kc.a,{href:"https://www.worldcubeassociation.org/regulations/",underline:"hover",children:"WCA rules"})," ","are fallowed). All attempt results are put down on a piece of paper as the competitor does them, then a scoretaker enters them to the system to eventually build up competitors ranking for the given round. After a competition all the competitor results end up in"," ",Object(H.jsx)(kc.a,{href:"https://www.worldcubeassociation.org/results/rankings",underline:"hover",children:"the WCA rankings"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Get inspired"}),Object(H.jsxs)(re.a,{children:["If you want to get a better feeling of how WCA competitions look and the great community around them, there's a great documentary available called"," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/1oZY2e25VUw",underline:"hover",children:"Why We Cube"})," ","and"," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/DHgC2Ru7_MQ",underline:"hover",children:"many"})," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/8AwlVDT3jo4",underline:"hover",children:"other"})," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/ZSGOVRhYoWU",underline:"hover",children:"inspiring"})," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/sFc-6QNoh8s",underline:"hover",children:"stories"})," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/TOJ2dXahS1Q",underline:"hover",children:"out"})," ",Object(H.jsx)(kc.a,{href:"https://youtu.be/nXuINN-Ah4Y",underline:"hover",children:"there"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Technical details"}),Object(H.jsxs)(re.a,{gutterBottom:!0,children:["The platform is designed specifically for result management and is just a part of the bigger picture. It communicates with other tools using"," ",Object(H.jsx)(kc.a,{href:"https://github.com/thewca/wcif/blob/master/specification.md",underline:"hover",children:"a standardized format"}),", which allows the community to build tiny tools focused on specific competition tasks, following the"," ",Object(H.jsx)(kc.a,{href:"https://en.wikipedia.org/wiki/Unix_philosophy",underline:"hover",children:"Unix Philosophy"}),". See"," ",Object(H.jsx)(kc.a,{href:"https://github.com/thewca/wcif/blob/master/vision.md",underline:"hover",children:"this vision document"})," ","for more details."]}),Object(H.jsxs)(re.a,{gutterBottom:!0,children:["WCA Live is an open source project, so feel free to check out the specifics on"," ",Object(H.jsx)(kc.a,{href:"https://github.com/thewca/wca-live",underline:"hover",children:"GitHub"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"Contact"}),Object(H.jsxs)(re.a,{children:["In general prefer to use the"," ",Object(H.jsx)(kc.a,{href:"https://www.worldcubeassociation.org/contact/website",underline:"hover",children:"WCA contact form"}),", so that your message is directed to the right team. In case of bug reports feel free to submit a"," ",Object(H.jsx)(kc.a,{href:"https://github.com/thewca/wca-live/issues",underline:"hover",children:"GitHub issue"})," ","or contact us directly at"," ",Object(H.jsx)(kc.a,{href:"mailto:software@worldcubeassociation.org",underline:"hover",children:"software@worldcubeassociation.org"}),"."]})]})]})})};function Mr(e){const t=Object(et.a)(e.expiresAt),n=Object(et.a)(e.insertedAt),c=new Date,i=t-n;return 100-Math.max(t-c,0)/i*100}var zr,Br=function(e){let{oneTimeCode:t,open:n,onClose:i}=e;const[a,r]=Object(c.useState)(0),o=!!t&&100===Mr(t);return Object(c.useEffect)((()=>{if(n&&t&&!o){function e(){const e=Mr(t);r(e)}const c=setInterval(e,25);return()=>clearInterval(c)}}),[t,o,n]),Object(H.jsxs)(Zn.a,{open:n,onClose:i,children:[Object(H.jsx)(Kn.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(re.a,{color:"textSecondary",children:"Navigate to the sign in page on another device and enter the following code."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(re.a,{variant:"h4",align:"center",children:o?"Expired":t&&t.code})}),Object(H.jsx)(te.a,{item:!0,style:{width:"100%"},children:Object(H.jsx)(ce.a,{variant:"determinate",value:100-a})})]})}),Object(H.jsx)(Xn.a,{children:Object(H.jsx)(Ce.a,{color:"primary",onClick:()=>i(),children:"Close"})})]})};const Vr=Object(K.a)(zr||(zr=Object(X.a)(["\n  mutation GenerateOneTimeCode {\n    generateOneTimeCode {\n      oneTimeCode {\n        id\n        code\n        expiresAt\n        insertedAt\n      }\n    }\n  }\n"])));var $r=function(){const e=ke(),[t,n]=Object(c.useState)(!1),[i,{data:a,loading:r}]=Object(Ie.a)(Vr,{onError:e,onCompleted:()=>n(!0)}),o=a?a.generateOneTimeCode.oneTimeCode:null;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(re.a,{variant:"h5",gutterBottom:!0,children:"One-time code"}),Object(H.jsx)(re.a,{color:"textSecondary",children:"Generate a temporary code and use it to establish a session on another (hypothetically untrusted) device without going through the WCA website. This strategy is useful for scoretaking on an unknown machine, as you don't have to type any credentials on that machine, just the temporary code."})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ce.a,{variant:"contained",color:"primary",disabled:r,onClick:()=>i(),children:"Generate"})})]}),Object(H.jsx)(Br,{oneTimeCode:o,open:t,onClose:()=>n(!1)})]})};var Ur=function(){return Object(H.jsx)(ae.a,{p:{xs:2,sm:3},children:Object(H.jsx)($r,{})})},Lr=n(801);function Hr(e){switch(e){case"delegate":return"Delegate";case"trainee-delegate":return"Trainee delegate";case"organizer":return"Organizer";case"staff-dataentry":return"Scoretaker";default:return e}}var qr=function(e){let{title:t,staffMembers:n}=e;return Object(H.jsxs)(fe.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Le.a,{disableSticky:!0,children:t}),Object(H.jsx)(Za,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;const c=e.competition;return Object(H.jsxs)(ve.a,{style:n,button:!0,component:r.b,to:"/admin/competitions/".concat(c.id),children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(Ue.a,{children:Object(H.jsx)(er,{competition:c})})}),Object(H.jsx)(we.a,{primary:c.name,secondary:pi(c.startDate,c.endDate)}),Object(H.jsx)(ae.a,{sx:{display:"flex"},children:e.roles.map((e=>Object(H.jsx)(Lr.a,{label:Hr(e),size:"small",color:"secondary",sx:{fontWeight:500,margin:.5}},e)))})]},c.id)}})]})};var Gr,_r=function(e){let{title:t,competitors:n}=e;return Object(H.jsxs)(fe.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Le.a,{disableSticky:!0,children:t}),Object(H.jsx)(Za,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;const c=e.competition;return Object(H.jsxs)(ve.a,{style:n,button:!0,component:r.b,to:"/competitions/".concat(c.id,"/competitors/").concat(e.id),children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(er,{competition:c})}),Object(H.jsx)(we.a,{primary:c.name,secondary:pi(c.startDate,c.endDate)})]},c.id)}})]})},Jr=n(829),Qr=n(831),Yr=n(830),Zr=n(459),Xr=n.n(Zr),Kr=n(458),eo=n.n(Kr);const to=Object(K.a)(Gr||(Gr=Object(X.a)(["\n  mutation ImportCompetition($input: ImportCompetitionInput!) {\n    importCompetition(input: $input) {\n      competition {\n        id\n      }\n    }\n  }\n"])));var no,co=function(e){let{competition:t}=e;const n=Object(s.b)(),c=Object(Z.g)(),i=ke(),[a,{loading:r}]=Object(Ie.a)(to,{variables:{input:{wcaId:t.wcaId}},onCompleted:e=>{let{importCompetition:{competition:t}}=e;c("/admin/competitions/".concat(t.id))},onError:i});return Object(H.jsxs)(ve.a,{button:!0,onClick:function(){n({description:"This will import ".concat(t.name," from the WCA website.")}).then((()=>a()))},disabled:r,children:[Object(H.jsx)(Ue.a,{children:Object(H.jsx)(eo.a,{})}),Object(H.jsx)(we.a,{primary:t.name,secondary:pi(t.startDate,t.endDate)})]},t.wcaId)};const io=Object(K.a)(no||(no=Object(X.a)(["\n  query ImportableCompetitions {\n    importableCompetitions {\n      wcaId\n      name\n      startDate\n      endDate\n    }\n  }\n"])));var ao=function(){const{data:e,loading:t,error:n}=Object(ee.b)(io);if(t&&!e)return Object(H.jsx)(ie,{});if(n)return Object(H.jsx)(he,{error:n});const{importableCompetitions:c}=e,i=ue(c,[e=>e.startDate,e=>e.endDate]);return 0===i.length?Object(H.jsx)(ae.a,{p:2,pt:0,children:Object(H.jsx)(re.a,{variant:"body2",children:"You have no importable competitions."})}):Object(H.jsx)(fe.a,{dense:!0,disablePadding:!0,sx:{width:"100%",maxHeight:300,overflowY:"auto"},children:i.map((e=>Object(H.jsx)(co,{competition:e},e.wcaId)))})};var ro,oo=function(){return Object(H.jsxs)(Jr.a,{TransitionProps:{mountOnEnter:!0},children:[Object(H.jsx)(Yr.a,{expandIcon:Object(H.jsx)(Xr.a,{}),children:Object(H.jsx)(re.a,{variant:"subtitle2",color:"textSecondary",children:"Importable competitions"})}),Object(H.jsx)(Qr.a,{sx:{p:0},children:Object(H.jsx)(ao,{})})]})};const so=Object(K.a)(ro||(ro=Object(X.a)(["\n  query Competitions {\n    currentUser {\n      id\n      staffMembers {\n        id\n        roles\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n      competitors {\n        id\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function lo(e){return ue(e,[e=>e.competition.startDate,e=>e.competition.endDate],["desc","desc"])}var jo,uo=function(){const{data:e,loading:t,error:n}=Object(ee.b)(so);if(t&&!e)return Object(H.jsx)(ie,{});if(n)return Object(H.jsx)(he,{error:n});const{staffMembers:c,competitors:i}=e.currentUser,a=lo(i),r=lo(c);return Object(H.jsx)(ae.a,{p:3,children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:3,children:[i.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)($e.a,{children:Object(H.jsx)(_r,{title:"Competitor at",competitors:a})})}),c.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)($e.a,{children:Object(H.jsx)(qr,{title:"Staff member at",staffMembers:r})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(oo,{})})]})})};const bo=Object(K.a)(jo||(jo=Object(X.a)(["\n  query CurrentUser {\n    currentUser {\n      id\n      name\n      avatar {\n        thumbUrl\n      }\n    }\n  }\n"])));var mo=function(){const{data:e,error:t,loading:n}=Object(ee.b)(bo);if(t)return Object(H.jsx)(he,{error:t});const c=!n||!!e,i=e?e.currentUser:null;return Object(H.jsxs)(Ir,{currentUser:i,loaded:c,children:[n&&Object(H.jsx)(ie,{}),Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(ur,{})}),Object(H.jsx)(Z.b,{path:"sign-in",element:Object(H.jsx)(Dr,{})}),Object(H.jsx)(Z.b,{path:"about",element:Object(H.jsx)(Wr,{})}),i&&Object(H.jsx)(Z.b,{path:"my-competitions",element:Object(H.jsx)(uo,{})}),i&&Object(H.jsx)(Z.b,{path:"account",element:Object(H.jsx)(Ur,{})}),c&&Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/"})})]})]})};var po=function(){return Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"/competitions/:competitionId/*",element:Object(H.jsx)($a,{})}),Object(H.jsx)(Z.b,{path:"/admin/competitions/:competitionId/*",element:Object(H.jsx)(Qc,{})}),Object(H.jsx)(Z.b,{path:"/*",element:Object(H.jsx)(mo,{})})]})};var ho=function(){return Object(H.jsx)(r.a,{children:Object(H.jsx)(l.a,{client:M,children:Object(H.jsx)(Y.a,{injectFirst:!0,children:Object(H.jsx)(Q,{children:Object(H.jsx)(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(H.jsxs)(s.a,{children:[Object(H.jsx)(o.a,{}),Object(H.jsx)(po,{})]})})})})})})};const xo=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Oo(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}!function(){const e=window.location.hash;if(e.startsWith("#token=")){k(e.replace("#token=","")),window.history.replaceState({},document.title,window.location.pathname+window.location.search)}}();Object(a.createRoot)(document.getElementById("root")).render(Object(H.jsx)(i.a.StrictMode,{children:Object(H.jsx)(ho,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/service-worker.js");xo?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):Oo(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Oo(t,e)}))}}()},84:function(e,t,n){"use strict";var c=n(477),i=(n(1),n(0));t.a=function(e){let{eventId:t,small:n=!1,...a}=e;return Object(i.jsx)(c.a,{component:"span",className:"cubing-icon event-".concat(t),sx:{color:e=>"dark"===e.palette.mode?"#fff":"rgba(0, 0, 0, 0.54)",fontSize:n?16:24},...a})}}},[[685,1,2]]]);
(this["webpackJsonpwca-live-client"]=this["webpackJsonpwca-live-client"]||[]).push([[0],{107:function(e,t,n){"use strict";var r=n(16),i=n(581),c=n(218),a=(n(1),n(0)),o=["eventId","small"];t.a=function(e){var t=e.eventId,n=e.small,s=void 0!==n&&n,l=Object(c.a)(e,o);return Object(a.jsx)(i.a,Object(r.a)({component:"span",className:"cubing-icon event-".concat(t),sx:{color:function(e){return"dark"===e.palette.mode?"#fff":"rgba(0, 0, 0, 0.54)"},fontSize:s?16:24}},l))}},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"m",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return O}));var r=n(23);function i(e,t){return e.reduce((function(e,n){return e.concat(t(n))}),[])}function c(e,t,n){return e.map((function(e,r){return r===t?n:e}))}function a(e,t){return Array.from({length:e},(function(e,n){return t(n)}))}function o(e){var t=parseInt(e,10);return Number.isNaN(t)?null:t}function s(e,t){return e.map(t).reduce((function(t,n,r){return t[n]=(t[n]||[]).concat(e[r]),t}),{})}function l(e){return Object(r.a)(new Set(e))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"function"===typeof t&&(t=[t]),"string"===typeof n&&(n=[n]),e.slice(0).sort((function(e,r){return t.reduce((function(t,i,c){if(0===t){var a=i(e),o=i(r),s=a>o?1:a<o?-1:0;t="desc"===n[c]?-s:s}return t}),0)}))}function u(e,t){return e.reduce((function(e,n,r,i){return e[t(n,r,i)?0:1].push(n),e}),[[],[]])}function j(e){return e.reduce((function(e,t){return e<t?e:t}))}function b(e){return e.reduce((function(e,t){return e>t?e:t}))}function m(e,t){return e.reduce((function(e,n){return t(e)<t(n)?e:n}))}function h(e,t,n){return Math.min(Math.max(e,t),n)}function O(e){return(t=e,t.charAt(0).toUpperCase()+t.slice(1)).replace(/\.?$/,".");var t}},33:function(e,t,n){"use strict";var r=n(581),i=n(1039),c=n(278),a=(n(1),n.p+"static/media/error.891f05e0.svg"),o=n(332),s=n(0);t.a=function(e){var t=e.error,n=void 0===t?null:t,l=Object(o.a)(n);return Object(s.jsx)(r.a,{sx:{width:"100%",py:4},children:Object(s.jsxs)(i.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(s.jsx)(i.a,{item:!0,children:Object(s.jsx)(c.a,{variant:"h5",children:"Oh dear!"})}),Object(s.jsx)(i.a,{item:!0,children:Object(s.jsx)(r.a,{component:"img",src:a,height:300,alt:"error",sx:{maxWidth:"100%"}})}),Object(s.jsx)(i.a,{item:!0,children:Object(s.jsx)(c.a,{variant:"subtitle1",children:l})})]})})}},332:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(27);function i(e){return e&&e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.map((function(e){return e.message})).map(r.c).join(" "):"Something went wrong."}},417:function(e,t,n){"use strict";var r=n(1016),i=n(1060),c=n(1056),a=n(1),o=n(17),s=n(549),l=n.n(s),d=n(341),u=n.n(d),j=n(550),b=n.n(j),m=n(1049),h=n(1055),O=n(1043),p=n(1040),x=n(1006),f=n(1008),v=n(5),g=n(573),y=n(107),w=n(0);var C=function(e){var t=e.competitionEvents,n=e.competitionId,r=Object(a.useState)(null),i=Object(v.a)(r,2),c=i[0],s=i[1];return Object(w.jsx)(h.a,{dense:!0,children:t.map((function(e){return Object(w.jsxs)(a.Fragment,{children:[Object(w.jsxs)(p.a,{button:!0,onClick:function(t){return function(e,t){s(c===t.id?null:t.id),e.stopPropagation()}(t,e)},disabled:!e.rounds.some((function(e){return e.open})),children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(y.a,{eventId:e.event.id})}),Object(w.jsx)(x.a,{primary:e.event.name})]}),Object(w.jsx)(m.a,{in:c===e.id,timeout:"auto",unmountOnExit:!0,onEntered:function(e){Object(g.a)(e,{behavior:"smooth",scrollMode:"if-needed",block:"end"})},children:Object(w.jsx)(h.a,{dense:!0,children:e.rounds.map((function(e){return Object(w.jsxs)(p.a,{button:!0,component:o.b,to:"/competitions/".concat(n,"/rounds/").concat(e.id),disabled:!e.open,children:[Object(w.jsx)(x.a,{primary:e.name}),e.label&&Object(w.jsx)(O.a,{label:e.label,size:"small",sx:{borderRadius:"6px",fontSize:"0.7em",fontWeight:500}})]},e.id)}))})})]},e.id)}))})};t.a=function(e){var t=e.competition;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(i.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:1},children:[Object(w.jsx)(c.a,{component:o.b,to:"/","aria-label":"Homepage",size:"large",children:Object(w.jsx)(l.a,{})}),Object(w.jsx)(c.a,{component:o.b,to:"/competitions/".concat(t.id,"/competitors"),"aria-label":"Competitor",size:"large",children:Object(w.jsx)(u.a,{})}),Object(w.jsx)(c.a,{component:o.b,to:"/competitions/".concat(t.id,"/podiums"),"aria-label":"Podiums",size:"large",children:Object(w.jsx)(b.a,{})})]}),Object(w.jsx)(r.a,{}),Object(w.jsx)(C,{competitionEvents:t.competitionEvents,competitionId:t.id})]})}},548:function(e,t,n){"use strict";(function(e){var r=n(581),i=n(16),c=n(947),a=n(104),o=n(951),s=n(5),l=n(942),d=n(1),u=n(417),j=n(571),b=n(0),m=250,h={appBarShift:{width:{lg:"calc(100% - ".concat(m,"px)")},ml:{lg:"".concat(m,"px")}}};t.a=function(t){var n=t.competition,O=t.children,p=Object(l.a)((function(e){return e.breakpoints.up("lg")})),x=Object(d.useState)(!1),f=Object(s.a)(x,2),v=f[0],g=f[1],y=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.a,{position:"sticky",sx:h.appBarShift,children:n&&Object(b.jsx)(j.a,{competition:n,onMenuClick:function(){return g(!0)}})}),p?Object(b.jsx)(a.a,{variant:"permanent",sx:{"& .MuiDrawer-paper":{width:{lg:m}}},children:n&&Object(b.jsx)(u.a,{competition:n})}):Object(b.jsx)(c.a,{open:v,onOpen:function(){return g(!0)},onClose:function(){return g(!1)},onClick:function(){return g(!1)},sx:{"& .MuiDrawer-paper":{width:{lg:m}}},disableBackdropTransition:!y,disableDiscovery:y,children:n&&Object(b.jsx)(u.a,{competition:n})}),Object(b.jsx)(r.a,{sx:Object(i.a)({position:"relative",overflowY:"auto",py:{xs:2,md:3},px:{xs:1,md:3}},h.appBarShift),children:O})]})}}).call(this,n(254))},571:function(e,t,n){"use strict";var r,i=n(1060),c=n(1059),a=n(581),o=n(278),s=n(1056),l=(n(1),n(32)),d=n(17),u=n(552),j=n.n(u),b=n(551),m=n.n(b),h=n(109),O=n(165),p=n(18),x=n(1022),f=n(180),v=n.n(f),g=(n(33),n(0));Object(x.a)(r||(r=Object(p.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));function y(){return(y=Object(O.a)(Object(h.a)().mark((function e(t){var n,r;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.stringify({model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"}]},payload:{competitionId:t.id,competitionName:t.shortName,eventName:t.competitionEvents[0].event.name,eventId:t.competitionEvents[0].event.id}}),(r=new Headers).append("Content-Type","application/json"),fetch("https://app.singular.live/apiv1/datanodes/2Gtu4VucUktNoXOdJgAKd2/data",{method:"PUT",headers:r,body:n,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){var t=e.competition;return Object(g.jsx)(c.a,{title:"Update Stream",children:Object(g.jsx)(s.a,{color:"inherit",onClick:function(){!function(e){y.apply(this,arguments)}(t),console.log(t)},size:"large",children:Object(g.jsx)(v.a,{})})})};t.a=function(e){var t=e.competition,n=e.onMenuClick,r=Object(l.f)();return Object(g.jsxs)(i.a,{children:[Object(g.jsx)(s.a,{color:"inherit",sx:{ml:"-12px",mr:"20px",display:{lg:"none"}},onClick:n,"aria-label":"Menu",size:"large",children:Object(g.jsx)(m.a,{})}),Object(g.jsx)(o.a,{variant:"h6",color:"inherit",sx:{flexGrow:1,color:"inherit",textDecoration:"none"},noWrap:!0,component:d.b,to:"/competitions/".concat(t.id),children:t.shortName}),Object(g.jsx)(a.a,{sx:{flexGrow:1}}),Object(g.jsx)(w,{competition:t}),t.access.canScoretake&&Object(g.jsx)(c.a,{title:"Admin view",children:Object(g.jsx)(s.a,{color:"inherit",component:d.b,to:"/admin".concat(r.pathname),size:"large",children:Object(g.jsx)(j.a,{})})})]})}},927:function(e,t,n){"use strict";n.r(t);n(604);var r=n(1),i=n.n(r),c=n(516),a=n(17),o=n(1019),s=n(106),l=n(1017),d=n(217),u=n(16),j=n(1024),b=n(273),m=n(1001),h=n(1025),O=n(1023),p=n(1038),x=n(526),f=n(189),v=n(406),g=n(222),y=n(566),w={};function C(e){return"wca-live:".concat(e)}var I="token";function k(){return function(e){if(e in w)return w[e];var t=localStorage.getItem(C(e));return w[e]=t,t}(I)}function S(e){var t,n;n=e,w[t=I]=n,localStorage.setItem(C(t),n)}function E(){var e;delete w[e=I],localStorage.removeItem(C(e))}var A=new j.a({uri:"https://live.worldcubeassociation.org/api",credentials:"same-origin"}),T=new p.a({delay:{initial:2e3},attempts:{max:2}}),R=Object(x.a)((function(e,t){var n=t.headers,r=k();return r?{headers:Object(u.a)(Object(u.a)({},n),{},{authorization:"Bearer ".concat(r)})}:{headers:n}})),P=b.a.from([R,T,A]),D=new v.a("wss://".concat(window.location.host,"/socket")),N=g.a(D),M=Object(y.a)(N),z=Object(m.a)((function(e){var t=e.query,n=Object(f.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),M,P),W=new h.a({typePolicies:{Country:{keyFields:["iso2"]},CompetitionBrief:{keyFields:["wcaId"]},Competition:{fields:{access:{merge:function(e,t){return Object(u.a)(Object(u.a)({},e),t)}}}}}}),F=new O.a({cache:W,link:z,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}}),$=n(5),B=n(942),U=n(565),L=n(1035),q=n(186),H=n(517),G=n(1004),V=n(0),Q={light:Object(U.a)({palette:{primary:{main:q.a[700]},secondary:{main:H.a[900]}}}),dark:Object(U.a)({palette:{mode:"dark",primary:{main:q.a[200]},secondary:{main:G.a.A400}}})},Y={light:q.a[700],dark:H.a[900]},_=Object(r.createContext)();function J(){return localStorage.getItem("themeType")}function Z(e){var t=e.children,n=Object(B.a)("(prefers-color-scheme: dark)")?"dark":"light",i=Object(r.useMemo)(J,[]),c=Object(r.useState)(i||n),a=Object($.a)(c,2),o=a[0],s=a[1],l=Object(r.useCallback)((function(){s((function(e){return"light"===e?"dark":"light"}))}),[]);return Object(r.useEffect)((function(){!function(e){localStorage.setItem("themeType",e)}(o);var e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",Y[o])}),[o]),Object(V.jsx)(L.a,{theme:Q[o],children:Object(V.jsx)(_.Provider,{value:l,children:t})})}var X=n(1018),K=n(32),ee=n(18),te=n(1022),ne=n(570),re=n(1039),ie=n(996),ce=n(1052);var ae,oe=function(){return Object(V.jsx)(ie.a,{in:!0,style:{transitionDelay:"800ms"},children:Object(V.jsx)(ce.a,{sx:{position:"absolute",left:0,right:0,top:0}})})},se=n(33),le=n(1053),de=n(1063),ue=n(1055),je=n(1054),be=n(1040),me=n(1074),he=n(1006),Oe=n(578),pe=n(1005),xe=n(332);function fe(){var e=Object(d.b)().enqueueSnackbar;return Object(r.useCallback)((function(t){var n=Object(xe.a)(t);e(n,{variant:"error"})}),[e])}var ve=Object(te.a)(ae||(ae=Object(ee.a)(["\n  mutation OpenRound($input: OpenRoundInput!) {\n    openRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var ge,ye=function(e){var t=e.round,n=e.competitionEvent,r=Object(s.b)(),i=fe(),c=Object(pe.a)(ve,{variables:{input:{id:t.id}},onError:i}),a=Object($.a)(c,2),o=a[0],l=a[1].loading;return Object(V.jsx)(Oe.a,{size:"small",onClick:function(){var e=n.rounds.find((function(e){return e.number===t.number-1}));e&&!e.finished?r({description:"\n          There are some missing results in the previous round.\n          Opening this round will permanently remove them.\n        "}).then(o):o()},disabled:l,children:"Open"})},we=Object(te.a)(ge||(ge=Object(ee.a)(["\n  mutation ClearRound($input: ClearRoundInput!) {\n    clearRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var Ce=function(e){var t=e.round,n=e.competitionEvent,r=Object(s.b)(),i=fe(),c=Object(pe.a)(we,{variables:{input:{id:t.id}},onError:i}),a=Object($.a)(c,2),o=a[0],l=a[1].loading;return Object(V.jsx)(Oe.a,{size:"small",onClick:function(){r({description:"\n        This will irreversibly remove all results\n        from ".concat(n.event.name," - ").concat(t.name,".\n      ")}).then(o)},disabled:l,children:"Clear"})};function Ie(e,t){var n=t.rounds.find((function(t){return t.number===e.number-1}));return!e.open&&(!n||n.open)}function ke(e,t){var n=t.rounds.find((function(t){return t.number===e.number+1}));return e.open&&(!n||!n.open)}var Se=function(e){var t=e.round,n=e.competitionEvent,r=e.competitionId;return Object(V.jsxs)(be.a,{button:!0,component:a.b,to:"/admin/competitions/".concat(r,"/rounds/").concat(t.id),disabled:!t.open,children:[Object(V.jsx)(he.a,{primary:t.name}),Object(V.jsxs)(me.a,{children:[Ie(t,n)&&Object(V.jsx)(ye,{round:t,competitionEvent:n}),ke(t,n)&&Object(V.jsx)(Ce,{round:t,competitionEvent:n})]})]},t.id)},Ee=n(107);var Ae,Te=function(e){var t=e.competitionEvent,n=e.competitionId;return Object(V.jsxs)(le.a,{style:{height:"100%"},children:[Object(V.jsx)(je.a,{avatar:Object(V.jsx)(Ee.a,{eventId:t.event.id}),title:t.event.name}),Object(V.jsx)(de.a,{style:{padding:0},children:Object(V.jsx)(ue.a,{dense:!0,children:t.rounds.map((function(e){return Object(V.jsx)(Se,{round:e,competitionEvent:t,competitionId:n},e.id)}))})})]})},Re=Object(te.a)(Ae||(Ae=Object(ee.a)(["\n  query CompetitionEvents($id: ID!) {\n    competition(id: $id) {\n      id\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          name\n          open\n          finished\n        }\n      }\n    }\n  }\n"])));var Pe,De=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(Re,{variables:{id:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition.competitionEvents;return Object(V.jsx)(re.a,{container:!0,spacing:2,direction:"row",children:c.map((function(t){return Object(V.jsx)(re.a,{item:!0,xs:12,md:4,children:Object(V.jsx)(Te,{competitionEvent:t,competitionId:e})},t.id)}))})},Ne=n(1048),Me=n(1008),ze=n(1057),We=n(1028),Fe=n(278),$e=n(529),Be=n.n($e),Ue=n(336),Le=n.n(Ue),qe=n(530),He=n.n(qe),Ge=n(531),Ve=n.n(Ge),Qe=n(569),Ye=n(1007),_e=Object(te.a)(Pe||(Pe=Object(ee.a)(["\n  mutation Synchronize($input: SynchronizeInput!) {\n    synchronizeCompetition(input: $input) {\n      competition {\n        id\n        synchronizedAt\n      }\n    }\n  }\n"])));var Je,Ze=function(e){var t=e.competitionId,n=fe(),r=Object(pe.a)(_e,{variables:{input:{id:t}},onError:n}),i=Object($.a)(r,2),c=i[0],a=i[1].loading;return Object(V.jsx)(Oe.a,{variant:"contained",disableElevation:!0,color:"primary",size:"large",onClick:c,disabled:a,children:"Synchronize"})},Xe="https://www.worldcubeassociation.org",Ke="https://groupifier.jonatanklosko.com",et="https://scrambles-matcher.worldcubeassociation.org";function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat("").concat(e)}function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(Xe).concat(e)}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return"".concat(Ke).concat(e).concat(t)}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return"".concat(et).concat(e).concat(t)}var ct=Object(te.a)(Je||(Je=Object(ee.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      synchronizedAt\n    }\n  }\n"])));var at=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(ct,{variables:{id:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition;return Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsxs)(re.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Ze,{competitionId:c.id})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Fe.a,{variant:"caption",component:"div",align:"center",children:["Last synchronized"," ",Object(V.jsx)(Qe.a,{date:Object(Ye.a)(c.synchronizedAt)}),"."]})})]}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Synchronization"}),Object(V.jsx)(Fe.a,{children:"\n          WCA Live is specifically designed to deal with competition results\n          and it relies on the WCA website to provide a lot of competition information\n          (like events, schedule and registered competitors). It is also meant to cooperate\n          with other tools that are dedicated to do specific tasks. Synchronization\n          is the process of getting the latest data from the WCA website, combining it\n          with the local changes (mostly results) and saving that data back to the WCA website,\n          so that other tools can use it.\n          "})]}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(We.a,{severity:"info",children:"Always make sure to Synchronize before using any other tool if you want it to see\n          the newly entered results. If the tool modifies relevant competition data,\n          synchronize afterwards to see the changes reflected here."})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Ne.a,{children:Object(V.jsxs)(ue.a,{dense:!0,children:[Object(V.jsx)(ze.a,{sx:{backgroundColor:"inherit"},children:"WCA website"}),Object(V.jsxs)(be.a,{button:!0,component:"a",href:nt("/competitions/".concat(c.wcaId,"/events/edit")),target:"_blank",rel:"noopener noreferrer",children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Be.a,{})}),Object(V.jsx)(he.a,{primary:"Change round details",secondary:"Manage events and rounds on the WCA website."})]}),Object(V.jsxs)(be.a,{button:!0,component:"a",href:nt("/competitions/".concat(c.wcaId,"/registrations/add")),target:"_blank",rel:"noopener noreferrer",children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Le.a,{})}),Object(V.jsx)(he.a,{primary:"Add competitor",secondary:"Use a form on the WCA website to register someone during the competition (if applicable)."})]}),Object(V.jsx)(ze.a,{sx:{backgroundColor:"inherit"},children:"Additional tools"}),Object(V.jsxs)(be.a,{button:!0,component:"a",href:rt("/competitions/".concat(c.wcaId)),target:"_blank",rel:"noopener noreferrer",children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(He.a,{})}),Object(V.jsx)(he.a,{primary:"Groupifier",secondary:"Manage competitor groups and print scorecards."})]}),Object(V.jsxs)(be.a,{button:!0,component:"a",href:it(),target:"_blank",rel:"noopener noreferrer",children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Ve.a,{})}),Object(V.jsx)(he.a,{primary:"Scrambles Matcher",secondary:"Use it after the competition to attach scrambles to rounds and proceed with results submission."})]})]})})})]})},ot=n(581),st=n(1027),lt=n(1058),dt=n(23),ut=n(1064),jt=n(1065),bt=n(1069),mt=n(1033),ht=n(1066),Ot=n(1067),pt=n(1068),xt=[{role:"organizer",name:"Organizer",editable:!1},{role:"delegate",name:"Delegate",editable:!1},{role:"trainee-delegate",name:"Trainee delegate",editable:!1},{role:"staff-dataentry",name:"Scoretaker",editable:!0}];var ft,vt=function(e){var t=e.staffMembers,n=e.onChange;function r(e,r){n(t.map((function(t){return t===e?Object(u.a)(Object(u.a)({},t),{},{roles:(n=t.roles,i=r,n.includes(i)?n.filter((function(e){return e!==i})):[].concat(Object(dt.a)(n),[i]))}):t;var n,i})))}return Object(V.jsx)(ut.a,{component:Ne.a,children:Object(V.jsxs)(jt.a,{children:[Object(V.jsx)(ht.a,{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsx)(pt.a,{children:"Name"}),xt.map((function(e){var t=e.role,n=e.name;return Object(V.jsx)(pt.a,{children:n},t)}))]})}),Object(V.jsx)(bt.a,{children:t.map((function(e){return Object(V.jsxs)(Ot.a,{sx:{"&:last-child td":{border:0}},children:[Object(V.jsx)(pt.a,{children:e.user.name}),xt.map((function(t){var n=t.role,i=t.editable;return Object(V.jsx)(pt.a,{padding:"checkbox",align:"center",children:Object(V.jsx)(mt.a,{disabled:!i,checked:e.roles.includes(n),onChange:function(){return r(e,n)}})},n)}))]},e.user.id)}))})]})})},gt=n(1045),yt=n(1036);function wt(e,t){var n=Object(r.useState)(e),i=Object($.a)(n,2),c=i[0],a=i[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){a(e)}),t);return function(){return clearTimeout(n)}}),[e,t]),c}var Ct=Object(te.a)(ft||(ft=Object(ee.a)(["\n  query Users($filter: String!) {\n    users(filter: $filter) {\n      id\n      name\n    }\n  }\n"])));var It,kt=function(e){var t=e.onChange,n=e.TextFieldProps,i=void 0===n?{}:n,c=Object(r.useState)(""),a=Object($.a)(c,2),o=a[0],s=a[1],l=wt(o,250),d=Object(ne.b)(Ct,{variables:{filter:l}}),j=d.data,b=d.loading,m=j?j.users:[];return Object(V.jsx)(gt.a,{clearOnBlur:!0,blurOnSelect:!0,options:m,getOptionLabel:function(e){return e.name},loading:b,onInputChange:function(e,t,n){"input"===n&&s(t)},value:null,onChange:function(e,n,r){"selectOption"===r&&t(n)},renderInput:function(e){return Object(V.jsx)(yt.a,Object(u.a)(Object(u.a)({},e),i))}})},St=Object(te.a)(It||(It=Object(ee.a)(["\n  mutation UpdateCompetitionAccess($input: UpdateCompetitionAccessInput!) {\n    updateCompetitionAccess(input: $input) {\n      competition {\n        id\n        staffMembers {\n          id\n          user {\n            id\n          }\n          roles\n        }\n      }\n    }\n  }\n"])));function Et(e){var t=e.id,n=e.user,r=e.roles;return{id:t,userId:n.id,roles:r}}function At(e){return e.filter((function(e){return e.roles.length>0})).map(Et)}var Tt,Rt=function(e){var t=e.competition,n=fe(),i=Object(r.useState)(t.staffMembers),c=Object($.a)(i,2),a=c[0],o=c[1],s=Object(pe.a)(St,{variables:{input:{id:t.id,staffMembers:At(a)}},onError:n}),l=Object($.a)(s,2),d=l[0],u=l[1].loading;return Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Fe.a,{children:"Delegates and organizers have full access to the competition.\n            Additionally, you can grant scoretaking access to any WCA Live user."})}),Object(V.jsx)(re.a,{item:!0,sx:{width:"100%"},children:Object(V.jsx)(vt,{staffMembers:a,onChange:o})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(kt,{onChange:function(e){if(null!==e&&!a.some((function(t){return t.user.id===e.id}))){var t={id:null,user:e,roles:[]};o([].concat(Object(dt.a)(a),[t]))}},TextFieldProps:{label:"Add user",sx:{width:250},variant:"outlined",size:"small"}})}),Object(V.jsx)(re.a,{item:!0,sx:{mt:2},children:Object(V.jsx)(Oe.a,{variant:"contained",color:"primary",onClick:d,disabled:u,children:"Save"})})]})},Pt=Object(te.a)(Tt||(Tt=Object(ee.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      staffMembers {\n        id\n        user {\n          id\n          name\n        }\n        roles\n      }\n    }\n  }\n"])));var Dt=function(){var e=Object(K.h)().competitionId,t=Object(r.useState)("access"),n=Object($.a)(t,2),i=n[0],c=n[1],a=Object(ne.b)(Pt,{variables:{id:e}}),o=a.data,s=a.loading,l=a.error;if(s&&!o)return Object(V.jsx)(oe,{});if(l)return Object(V.jsx)(se.a,{error:l});var d=o.competition;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(st.a,{indicatorColor:"secondary",textColor:"inherit",value:i,onChange:function(e,t){return c(t)},children:Object(V.jsx)(lt.a,{label:"Access",value:"access"})}),Object(V.jsx)(ot.a,{sx:{mt:2},children:"access"===i&&Object(V.jsx)(Rt,{competition:d})})]})},Nt=n(1056),Mt=n(533),zt=n.n(Mt),Wt=n(534),Ft=n.n(Wt),$t=n(1059),Bt=n(532),Ut=n.n(Bt),Lt=n(218),qt=["d","D","/"],Ht=["s","S","*"],Gt=n(27),Vt=-1,Qt=-2;function Yt(e){return e>0}function _t(e){return 0===e}function Jt(e,t){return Yt(e)||Yt(t)?!Yt(e)&&Yt(t)?1:Yt(e)&&!Yt(t)?-1:e-t:0}function Zt(e){return 0===e.length?[]:0===e[e.length-1]?Zt(e.slice(0,-1)):e}function Xt(e){var t=e.filter((function(e){return!_t(e)})),n=e.filter(Yt);return 0===t.length?0:0===n.length?Math.max.apply(Math,Object(dt.a)(t)):Math.min.apply(Math,Object(dt.a)(n))}function Kt(e,t){if(!t)throw new Error("Missing argument: eventId");if("333mbf"===t)return 0;if(e.some(_t))return 0;if("333fm"===t){var n=e.map((function(e){return 100*e}));switch(e.length){case 3:return nn(n);case 5:return tn(n);default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}switch(e.length){case 3:return en(nn(e));case 5:return en(tn(e));default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}function en(e){return Yt(e)?e<=6e4?e:100*Math.round(e/100):e}function tn(e){var t=e.slice().sort(Jt),n=Object($.a)(t,4);return nn([n[1],n[2],n[3]])}function nn(e){return e.every(Yt)?rn.apply(void 0,Object(dt.a)(e)):Vt}function rn(e,t,n){return Math.round((e+t+n)/3)}function cn(e){if(e<=0)return{solved:0,attempted:0,centiseconds:e};var t=e%100,n=Math.floor(e/100)%1e5,r=99-Math.floor(e/1e7)%100+t;return{solved:r,attempted:r+t,centiseconds:99999===n?null:100*n}}function an(e){var t=e.solved,n=e.attempted,r=e.centiseconds;if(r<=0)return r;var i=n-t;return 1e7*(99-(t-i))+100*Math.round((r||9999900)/100)+i}function on(e){if(!Number.isFinite(e))throw new Error("Invalid centiseconds, expected positive number, got ".concat(e,"."));return new Date(10*e).toISOString().substr(11,11).replace(/^[0:]*(?!\.)/g,"")}function sn(e,t){return 0===e?"":e===Vt?"DNF":e===Qt?"DNS":"333mbf"===t?function(e){var t=cn(e),n=t.solved,r=t.attempted,i=on(t.centiseconds).replace(/\.00$/,"");return"".concat(n,"/").concat(r," ").concat(i)}(e):"333fm"===t?function(e){return e>=1e3?(e/100).toFixed(2):e.toString()}(e):on(e)}function ln(e,t){if(!t)return!0;var n=t.numberOfAttempts,r=t.attemptResult;return e.slice(0,n).some((function(e){return e>0&&e<r}))}var dn=function(e){var t,n=e.value,i=e.onChange,c=e.label,a=e.disabled,o=e.TextFieldProps,s=void 0===o?{}:o,l=Object(r.useState)(n),d=Object($.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(n),h=Object($.a)(m,2),O=h[0],p=h[1];return j!==n&&(p(n),b(n)),Object(V.jsx)(yt.a,Object(u.a)(Object(u.a)({},s),{},{label:c,disabled:a,spellCheck:!1,value:(t=O,0===t?"":t===Vt?"DNF":t===Qt?"DNS":t.toString()),onChange:function(e){var t=e.nativeEvent.data;if(qt.includes(t))p(Vt);else if(Ht.includes(t))p(Qt);else{var n=Object(Gt.l)(e.target.value.replace(/\D/g,""))||0;p(n)}},onBlur:function(){var e;i((e=O)>80?Vt:e),p(n)}}))};function un(e){if(""===e)return 0;if("DNF"===e)return Vt;if("DNS"===e)return Qt;var t=Object(Gt.l)(e.replace(/\D/g,""))||0;return 36e4*Math.floor(t/1e6)+6e3*Math.floor(t%1e6/1e4)+100*Math.floor(t%1e4/100)+t%100}function jn(e){return 0===e?"":e===Vt?"DNF":e===Qt?"DNS":on(e)}var bn=function(e){var t=e.value,n=e.onChange,i=e.label,c=e.disabled,a=e.TextFieldProps,o=void 0===a?{}:a,s=Object(r.useState)(t),l=Object($.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(jn(t)),m=Object($.a)(b,2),h=m[0],O=m[1];return d!==t&&(O(jn(t)),j(t)),Object(V.jsx)(yt.a,Object(u.a)(Object(u.a)({},o),{},{label:i,disabled:c,spellCheck:!1,value:h,onChange:function(e){var t=e.nativeEvent.data;qt.includes(t)?O("DNF"):Ht.includes(t)?O("DNS"):O(function(e){var t=Object(Gt.l)(e.replace(/\D/g,""))||0;if(0===t)return"";var n=("00000000"+t.toString().slice(0,8)).match(/(\d\d)(\d\d)(\d\d)(\d\d)$/),r=Object($.a)(n,5),i=r[1],c=r[2],a=r[3],o=r[4];return"".concat(i,":").concat(c,":").concat(a,".").concat(o).replace(/^[0:]*(?!\.)/g,"")}(e.target.value))},onBlur:function(){var e,r=(e=h)===jn(un(e))?en(un(h)):0;n(r),O(jn(t))}}))};var mn=function(e){var t,n=e.value,i=e.onChange,c=e.label,a=e.disabled,o=e.TextFieldProps,s=void 0===o?{}:o,l=Object(r.useState)(n),d=Object($.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(n),h=Object($.a)(m,2),O=h[0],p=h[1];return j!==n&&(p(n),b(n)),Object(V.jsx)(yt.a,Object(u.a)(Object(u.a)({},s),{},{label:c,disabled:a,spellCheck:!1,value:(t=O,0===t?"":t.toString()),onChange:function(e){var t=Object(Gt.l)(e.target.value.replace(/\D/g,""))||0;t<=99&&p(t)},onBlur:function(){i(O),p(n)}}))};var hn=function(e){var t=e.value,n=e.onChange,i=e.disabled,c=e.label,a=e.TextFieldProps,o=void 0===a?{}:a,s=Object(r.useState)(t),l=Object($.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(cn(t)),m=Object($.a)(b,2),h=m[0],O=m[1];function p(e){var r=function(e){var t=e.attempted,n=e.solved,r=e.centiseconds;return!t||n>t?{solved:n,attempted:n,centiseconds:r}:n<t/2||n<=1||r>6e4*Math.min(6,t)+3e3?{solved:0,attempted:0,centiseconds:Vt}:{solved:n,attempted:t,centiseconds:r}}(e);an(r)!==t?(n(an(r)),O(cn(t))):O(r)}return d!==t&&(O(cn(t)),j(t)),Object(V.jsxs)(re.a,{container:!0,direction:"row",spacing:1,onInputCapture:function(e){var t=e.nativeEvent.data;qt.includes(t)?(p(cn(Vt)),e.preventDefault()):Ht.includes(t)&&(p(cn(Qt)),e.preventDefault())},children:[Object(V.jsx)(re.a,{item:!0,xs:2,children:Object(V.jsx)(mn,{value:h.solved,onChange:function(e){return p(Object(u.a)(Object(u.a)({},h),{},{solved:e}))},disabled:i,TextFieldProps:o})}),Object(V.jsx)(re.a,{item:!0,xs:2,children:Object(V.jsx)(mn,{value:h.attempted,onChange:function(e){return p(Object(u.a)(Object(u.a)({},h),{},{attempted:e}))},disabled:i,TextFieldProps:o})}),Object(V.jsx)(re.a,{item:!0,xs:8,children:Object(V.jsx)(bn,{label:c,value:h.centiseconds,onChange:function(e){return p(Object(u.a)(Object(u.a)({},h),{},{centiseconds:e}))},disabled:i,TextFieldProps:o})})]})},On=["eventId"];var pn=function(e){var t=e.eventId,n=Object(Lt.a)(e,On);return"333fm"===t?Object(V.jsx)(dn,Object(u.a)({},n)):"333mbf"===t?Object(V.jsx)(hn,Object(u.a)({},n)):Object(V.jsx)(bn,Object(u.a)({},n))};function xn(e){return Array.from(e.querySelectorAll("input, button")).filter((function(e){return!e.disabled}))}function fn(e){return"".concat(e.name," (").concat(e.registrantId,")")}var vn=function(e){var t=e.persons,n=e.value,r=e.onChange,i=e.TextFieldProps,c=void 0===i?{}:i;return Object(V.jsx)(gt.a,{options:t,getOptionLabel:fn,value:n,onChange:function(e,t,n){"selectOption"===n&&r(t)},forcePopupIcon:!1,disableClearable:!0,autoHighlight:!0,filterOptions:function(e,t){return function(e,t){var n=t.trim().toLowerCase();if(!n)return e;var r=e.find((function(e){return e.registrantId===Object(Gt.l)(n)}));if(r)return[r];var i=e.filter((function(e){return e.name.toLowerCase().startsWith(n)})),c=e.filter((function(e){return e.name.toLowerCase().includes(n)}));return Object(Gt.m)([].concat(Object(dt.a)(i),Object(dt.a)(c))).slice(0,5)}(e,t.inputValue)},renderInput:function(e){return Object(V.jsx)(yt.a,Object(u.a)(Object(u.a)(Object(u.a)({},e),{},{label:"Competitor",spellCheck:!1,placeholder:"Type ID or name"},c),{},{inputProps:Object(u.a)(Object(u.a)({},e.inputProps),c.inputProps||{})}))}})};var gn=function(e){var t=e.results,n=e.value,i=e.onChange,c=e.TextFieldProps,a=void 0===c?{}:c,o=Object(r.useMemo)((function(){return t.map((function(e){return e.person})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[t]);return Object(V.jsx)(vn,{persons:o,value:n?o.find((function(e){return e.id===n.person.id})):null,onChange:function(e){i(e?t.find((function(t){return t.person.id===e.id})):null)},TextFieldProps:a})};function yn(e,t){return e?"333mbf"===t?"".concat(function(e){var t=cn(e),n=t.solved;return n-(t.attempted-n)}(e.attemptResult)," points"):"333fm"===t?"".concat(e.attemptResult," moves"):on(e.attemptResult):"None"}function wn(e,t){if(["333mbf","333fm"].includes(t))return"Regulated";var n=e.centiseconds,r=e.cumulativeRoundWcifIds,i=on(n);return 0===r.length?i:1===r.length?"".concat(i," in total"):"".concat(i," total for ").concat(r.join(", "))}function Cn(e,t){var n=t.numberOfAttempts,r=t.sortBy;if(!In(e,t))return[{name:"Best",field:"best",recordTagField:"singleRecordTag"}];var i=[{name:"Best",field:"best",recordTagField:"singleRecordTag"},{name:3===n?"Mean":"Average",field:"average",recordTagField:"averageRecordTag"}];return"best"===r?i:i.reverse()}function In(e,t){return"333mbf"!==e&&[3,5].includes(t.numberOfAttempts)}function kn(e,t){return function(e,t){return Object(Gt.k)(t,(function(t){return t<e.length?e[t]:0}))}(e.attempts.map((function(e){return e.result})),t)}var Sn,En,An=function(e){var t,n=e.result,i=e.results,c=e.onResultChange,a=e.eventId,o=e.format,l=e.timeLimit,d=e.cutoff,u=e.onSubmit,j=e.disabled,b=void 0!==j&&j,m=e.focusOnResultChange,h=void 0!==m&&m,O=Object(s.b)(),p=o.numberOfAttempts,x=Object(r.useMemo)((function(){return Object(Gt.k)(p,(function(){return 0}))}),[p]),f=Object(r.useState)(x),v=Object($.a)(f,2),g=v[0],y=v[1],w=Object(r.useRef)(null);t=w,Object(r.useEffect)((function(){var e=t.current;function n(t){if(["ArrowUp","ArrowDown","Enter","Tab","Escape"].includes(t.key))if("Escape"!==t.key){var n=Boolean(e.querySelector('.MuiAutocomplete-root[aria-expanded="true"]'));if(!["ArrowUp","ArrowDown","Enter"].includes(t.key)||!n){if(["ArrowUp","ArrowDown"].includes(t.key)&&(t.preventDefault(),t.stopPropagation()),"INPUT"===t.target.tagName&&"attempt-result"===t.target.dataset.type&&t.target.blur(),"Tab"===t.key&&"result-select"===t.target.dataset.type)return t.preventDefault(),t.stopPropagation(),void t.target.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter"}));"Tab"!==t.key&&setTimeout((function(){var n=xn(e),r=n.findIndex((function(e){return t.target===e}));if(-1!==r){var i=function(e){return(e+n.length)%n.length};if("ArrowUp"===t.key){var c=n[i(r-1)];c.focus(),c.select&&c.select()}else if("ArrowDown"===t.key||"INPUT"===t.target.tagName&&"Enter"===t.key){var a=n[i(r+1)];a.focus(),a.select&&a.select()}}}),0)}}else t.target.blur&&t.target.blur()}return e.addEventListener("keydown",n),function(){return e.removeEventListener("keydown",n)}}),[t]),Object(r.useEffect)((function(){var e=t.current;function n(t){if(["ArrowUp","ArrowDown","Enter"].includes(t.key)&&t.target===document.body){t.preventDefault();var n=xn(e),r=Object($.a)(n,1)[0];r&&(r.focus(),r.select())}}return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}),[t]),Object(r.useEffect)((function(){y(n?kn(n,p):x)}),[n,p,x]),Object(r.useEffect)((function(){if(h){var e=w.current.getElementsByTagName("input"),t=Object($.a)(e,2),r=t[0],i=t[1];n?setTimeout((function(){i.focus(),i.select()}),0):r.focus()}}),[n,h]);var C=ln(g,d)?p:d.numberOfAttempts;function I(e,t){var n=Object(Gt.j)(g,e,t);y(function(e,t){return ln(e,t)?e:e.map((function(e,n){return n<t.numberOfAttempts?e:0}))}(function(e,t){if(null===t)return e;if(0===t.cumulativeRoundWcifIds.length)return e.map((function(e){return e>=t.centiseconds?Vt:e}));var n=e.reduce((function(e,n){var r=Object($.a)(e,2),i=r[0],c=r[1],a=n>0?c+n:c,o=n>0&&a>=t.centiseconds?Vt:n;return[i.concat(o),a]}),[[],0]);return Object($.a)(n,1)[0]}(n,l),d))}return Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:1,ref:w,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Fe.a,{variant:"body2",children:["Time limit: ",wn(l,a)]})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Fe.a,{variant:"body2",children:["Cutoff: ",yn(d,a)]})}),Object(V.jsx)(re.a,{item:!0,sx:{my:2},children:Object(V.jsx)(gn,{results:i,value:n,onChange:c,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined",inputProps:{"data-type":"result-select"}}})}),g.map((function(e,t){return Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(pn,{eventId:a,label:"Attempt ".concat(t+1),disabled:!n||b||t>=C,value:e,onChange:function(e){return I(t,e)},TextFieldProps:{fullWidth:!0,variant:"outlined",inputProps:{"data-type":"attempt-result"}}})},t)})),Object(V.jsxs)(re.a,{item:!0,container:!0,children:[Object(V.jsx)(re.a,{item:!0,xs:!0,children:Object(V.jsxs)(Fe.a,{variant:"body2",children:["Best: ",sn(Xt(g),a)]})}),In(a,o)&&Object(V.jsx)(re.a,{item:!0,xs:!0,children:Object(V.jsxs)(Fe.a,{variant:"body2",children:["Average:"," ",sn(Kt(g,a),a)]})})]}),Object(V.jsxs)(re.a,{item:!0,container:!0,alignItems:"flex-end",children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Oe.a,{type:"submit",variant:"outlined",color:"primary",disabled:!n||b,onClick:function(){(function(){var e=function(e,t){var n=Zt(e).indexOf(0);if(-1!==n)return"You've omitted attempt ".concat(n+1,". Make sure it's intentional.");if("333mbf"===t){var r=e.findIndex((function(e){var t=cn(e),n=t.attempted,r=t.centiseconds;return e>0&&r/n<3e3}));if(-1!==r)return"\n        The result you're trying to submit seems to be impossible:\n        attempt ".concat(r+1," is done in\n        less than 30 seconds per cube tried.\n        If you want to enter minutes, don't forget to add two zeros\n        for centiseconds at the end of the score.\n      ")}else{var i=e.filter(Yt);if(i.length>0){var c=Math.min.apply(Math,Object(dt.a)(i)),a=Math.max.apply(Math,Object(dt.a)(i));if(a>4*c)return"\n          The result you're trying to submit seem to be inconsistent.\n          There's a big difference between the best single\n          (".concat(sn(c,t),") and the worst single\n          (").concat(sn(a,t),").\n          Please check that the results are accurate.\n        ")}}return null}(g,a);return e?O({description:e,confirmationText:"Submit"}):Promise.resolve()})().then((function(){var e=Zt(g).map((function(e){return{result:e}}));u(e)}))},children:"Submit"})}),Object(V.jsx)(re.a,{item:!0,sx:{flexGrow:1}}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)($t.a,{title:Object(V.jsxs)("div",{children:["Key bindings:",Object(V.jsx)("div",{children:"/ or d - DNF"}),Object(V.jsx)("div",{children:"* or s - DNS"}),Object(V.jsx)("div",{children:"Up, Down, Enter - navigation"})]}),children:Object(V.jsx)(Ut.a,{sx:{verticalAlign:"middle"},color:"action"})})})]})]})},Tn=Object(te.a)(Sn||(Sn=Object(ee.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        attempts {\n          result\n        }\n        person {\n          id\n          name\n          registrantId\n        }\n        enteredAt\n      }\n    }\n  }\n"]))),Rn=Object(te.a)(En||(En=Object(ee.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        attempts {\n          result\n        }\n      }\n    }\n  }\n"])));var Pn=function(){var e=fe(),t=Object(K.h)().roundId,n=Object(r.useState)(0),i=Object($.a)(n,2),c=i[0],a=i[1],o=Object(r.useRef)(null),s=Object(r.useRef)(null);Object(r.useEffect)((function(){function e(e){"INPUT"!==e.target.tagName.toUpperCase()&&("ArrowLeft"===e.key?o.current.click():"ArrowRight"===e.key&&s.current.click())}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]);var l=Object(ne.b)(Tn,{variables:{id:t}}),d=l.data,u=l.loading,j=l.error,b=Object(pe.a)(Rn,{onCompleted:function(){s.current.focus()},onError:e}),m=Object($.a)(b,2),h=m[0],O=m[1].error;if(u&&!d)return Object(V.jsx)(oe,{});if(j)return Object(V.jsx)(se.a,{error:j});var p=d.round,x=Object(Gt.h)(p.results,(function(e){return-Object(Ye.a)(e.enteredAt)})),f=Math.round((c+1)/x.length*100);return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ce.a,{variant:"determinate",value:f,sx:{position:"absolute",top:0,left:0,right:0}}),Object(V.jsxs)(Fe.a,{variant:"subtitle1",align:"right",children:[c+1," of ",x.length]}),Object(V.jsxs)(re.a,{container:!0,direction:"row",alignItems:"center",spacing:2,children:[Object(V.jsx)(re.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(V.jsx)(Nt.a,{ref:o,onClick:function(){return a(c-1)},disabled:0===c,size:"large",children:Object(V.jsx)(zt.a,{})})}),Object(V.jsx)(re.a,{item:!0,md:3,children:Object(V.jsx)(An,{result:x[c],results:p.results,onResultChange:function(e){null!==e&&a(x.indexOf(e))},eventId:p.competitionEvent.event.id,format:p.format,timeLimit:p.timeLimit,cutoff:p.cutoff,disabled:O,onSubmit:function(e){h({variables:{input:{id:x[c].id,attempts:e}}})}})}),Object(V.jsx)(re.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(V.jsx)(Nt.a,{ref:s,autoFocus:!0,onClick:function(){return a(c+1)},disabled:c===x.length-1,size:"large",children:Object(V.jsx)(Ft.a,{})})}),Object(V.jsxs)(re.a,{item:!0,md:5,children:[Object(V.jsxs)(Fe.a,{variant:"h5",align:"center",children:[p.competitionEvent.event.name," - ",p.name]}),Object(V.jsx)(Fe.a,{variant:"subtitle1",align:"center",gutterBottom:!0,children:"Double-check"}),Object(V.jsx)(Fe.a,{align:"justify",children:"Here you can iterate over results ordered by entry time (newest first).\n              When doing double-check you can place a scorecard\n              next to the form to quickly compare attempt results.\n              For optimal experience make sure to always put entered/updated\n              scorecard at the top of the pile."})]})]})]})},Dn=n(1046),Nn=n(188),Mn=n(187),zn=n(1012),Wn={wr:{color:function(e){return e.palette.getContrastText(Mn.a[500])},backgroundColor:Mn.a[500]},cr:{color:function(e){return e.palette.getContrastText(zn.a[500])},backgroundColor:zn.a[500]},nr:{color:function(e){return e.palette.getContrastText(Nn.a.A400)},backgroundColor:Nn.a.A400},pb:{color:function(e){return e.palette.getContrastText(q.a[700])},backgroundColor:q.a[700]}};var Fn=function(e){var t=e.recordTag,n=e.sx;return Object(V.jsx)(ot.a,{component:"span",sx:Object(u.a)(Object(u.a)({display:"block",lineHeight:1,py:.8,px:1,borderRadius:1,fontWeight:600,fontSize:"0.7em"},n),Wn[t.toLowerCase()]||{}),children:t})};var $n=function(e){var t=e.recordTag,n=e.hidePb,r=void 0!==n&&n,i=e.children;return!t||r&&"PB"===t?i:Object(V.jsxs)(ot.a,{component:"span",sx:{position:"relative"},children:[i,Object(V.jsx)(Fn,{recordTag:t,sx:{position:"absolute",top:0,right:0,transform:"translate(110%, -40%)",fontSize:"0.6em",py:"0.3em",px:"0.4em"}})]})},Bn={ranking:{pr:2,width:50},advancing:{color:function(e){return e.palette.getContrastText(Nn.a.A400)},backgroundColor:Nn.a.A400}};function Un(e,t,n){return null===t?e:e.slice().sort((function(e,r){if("registrantId"===t){var i=e.person.registrantId-r.person.registrantId;return"asc"===n?i:-i}if("name"===t){var c=e.person.name.localeCompare(r.person.name);return"asc"===n?c:-c}throw new Error("Unrecognized order rule: ".concat(t))}))}var Ln=i.a.memo((function(e){var t=e.results,n=e.eventId,i=e.format,c=e.onResultClick,a=Object(r.useState)("asc"),o=Object($.a)(a,2),s=o[0],l=o[1],d=Object(r.useState)(null),j=Object($.a)(d,2),b=j[0],m=j[1];function h(e){b!==e?(m(e),l("asc")):"asc"===s?l("desc"):(m(null),l("asc"))}var O=Cn(n,i);return Object(V.jsxs)(jt.a,{size:"small",children:[Object(V.jsx)(ht.a,{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsx)(pt.a,{align:"right",sx:Bn.ranking,children:"#"}),Object(V.jsx)(pt.a,{align:"right",children:Object(V.jsx)(Dn.a,{active:"registrantId"===b,direction:s,onClick:function(){return h("registrantId")},children:"ID"})}),Object(V.jsx)(pt.a,{children:Object(V.jsx)(Dn.a,{active:"name"===b,direction:s,onClick:function(){return h("name")},children:"Name"})}),Object(Gt.k)(i.numberOfAttempts,(function(e){return Object(V.jsx)(pt.a,{align:"right",children:e+1},e)})),O.map((function(e){var t=e.name;return Object(V.jsx)(pt.a,{align:"right",children:t},t)}))]})}),Object(V.jsx)(bt.a,{children:Un(t,b,s).map((function(e){return Object(V.jsxs)(Ot.a,{hover:!0,sx:{whiteSpace:"nowrap",cursor:"pointer","&:last-child td":{border:0}},onClick:function(t){return c(e,t)},children:[Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)({},Bn.ranking),e.advancing?Bn.advancing:{}),children:e.ranking}),Object(V.jsx)(pt.a,{align:"right",children:e.person.registrantId}),Object(V.jsx)(pt.a,{children:e.person.name}),kn(e,i.numberOfAttempts).map((function(e,t){return Object(V.jsx)(pt.a,{align:"right",children:sn(e,n)},t)})),O.map((function(t,r){var i=t.name,c=t.field,a=t.recordTagField;return Object(V.jsx)(pt.a,{align:"right",sx:{fontWeight:0===r?600:400},children:Object(V.jsx)($n,{recordTag:e[a],hidePb:!0,children:sn(e[c],n)})},i)}))]},e.person.id)}))})]})})),qn=n(567),Hn=n(1070);var Gn,Vn,Qn,Yn=function(e){var t=e.result,n=e.position,r=e.onClose,i=e.onEditClick,c=e.onQuitClick,o=e.onClearClick,s=e.competitionId;return Object(V.jsx)(Ne.a,{children:Object(V.jsxs)(qn.a,{open:Boolean(t&&n),onClose:r,anchorReference:"anchorPosition",anchorPosition:n,transformOrigin:{vertical:0,horizontal:"center"},MenuListProps:{subheader:Object(V.jsx)(ze.a,{sx:{backgroundColor:"inherit"},children:t&&t.person.name})},children:[Object(V.jsx)(Hn.a,{onClick:function(){i(t),r()},children:"Edit"}),Object(V.jsx)(Hn.a,{component:a.b,to:"/competitions/".concat(s,"/competitors/").concat(t&&t.person.id),children:"Results"}),t&&t.attempts.length>0?Object(V.jsx)(Hn.a,{onClick:function(){o(t),r()},children:"Clear"}):Object(V.jsx)(Hn.a,{onClick:function(){c(t),r()},children:"Quit"})]})})},_n=n(536),Jn=n.n(_n),Zn=n(339),Xn=n.n(Zn),Kn=n(948),er=n(950),tr=n(579),nr=n(949),rr=n(937),ir=n(1013),cr=Object(te.a)(Gn||(Gn=Object(ee.a)(["\n  fragment adminRoundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      id\n      registrantId\n      name\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"]))),ar=Object(te.a)(Vn||(Vn=Object(ee.a)(["\n  query AdvancementCandidates($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      advancementCandidates {\n        qualifying {\n          id\n          name\n          registrantId\n        }\n        revocable {\n          id\n          name\n          registrantId\n        }\n      }\n    }\n  }\n"]))),or=Object(te.a)(Qn||(Qn=Object(ee.a)(["\n  mutation AddPersonToRound($input: AddPersonToRoundInput!) {\n    addPersonToRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),cr);var sr=function(e){var t=e.open,n=e.onClose,i=e.roundId,c=fe(),a=Object(r.useState)(null),o=Object($.a)(a,2),s=o[0],l=o[1],d=Object(ir.a)(ar,{variables:{roundId:i}}),u=Object($.a)(d,2),j=u[0],b=u[1],m=b.data,h=b.loading,O=b.error;Object(r.useEffect)((function(){t&&(j(),l(null))}),[t,j]);var p=Object(pe.a)(or,{variables:{input:{roundId:i,personId:s&&s.id}},onCompleted:g,onError:c}),x=Object($.a)(p,2),f=x[0],v=x[1].loading;function g(){l(null),n()}return Object(V.jsxs)(Kn.a,{open:t,onClose:g,children:[h&&Object(V.jsx)(oe,{}),Object(V.jsx)(rr.a,{children:"Add competitor"}),Object(V.jsxs)(tr.a,{children:[O&&Object(V.jsx)(se.a,{error:O}),m&&(m.round.advancementCandidates.qualifying.length>0?Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(nr.a,{children:"You can add any competitor who qualifies for this round. This is a way to quickly register someone for the first round without going to the WCA website or to bring back a competitor you have quit before."})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(vn,{persons:m.round.advancementCandidates.qualifying,value:s,onChange:l,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined"}})}),m.round.advancementCandidates.revocable.length>0&&Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Fe.a,{color:"error",children:["This will also remove the following competitors from this round: ",Object(V.jsx)("span",{style:{fontWeight:500},children:m.round.advancementCandidates.revocable.map((function(e){return e.name})).join(", ")})]})})]}):Object(V.jsx)(nr.a,{children:"No one else qualifies to this round."}))]}),Object(V.jsxs)(er.a,{children:[Object(V.jsx)(Oe.a,{onClick:g,children:"Cancel"}),Object(V.jsx)(Oe.a,{onClick:f,color:"primary",disabled:!s||v,children:"Confirm"})]})]})};function lr(e){var t=e.results.filter((function(e){return e.attempts.length>0}));return"".concat(t.length," of ").concat(e.results.length," entered")}var dr,ur,jr,br=function(e){var t=e.round,n=e.competitionId,i=Object(r.useState)(!1),c=Object($.a)(i,2),o=c[0],s=c[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{container:!0,alignItems:"center",children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsxs)(Fe.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]}),Object(V.jsx)(Fe.a,{variant:"body2",color:"textSecondary",children:lr(t)})]}),Object(V.jsx)(re.a,{item:!0,style:{flexGrow:1}}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)($t.a,{title:"PDF",placement:"top",children:Object(V.jsx)(Nt.a,{component:"a",target:"_blank",href:tt("/pdf/rounds/".concat(t.id)),size:"large",children:Object(V.jsx)(Xn.a,{})})}),Object(V.jsx)($t.a,{title:"Add competitor",placement:"top",children:Object(V.jsx)(Nt.a,{onClick:function(){return s(!0)},size:"large",children:Object(V.jsx)(Le.a,{})})}),Object(V.jsx)($t.a,{title:"Double-check",placement:"top",children:Object(V.jsx)(Nt.a,{component:a.b,to:"/admin/competitions/".concat(n,"/rounds/").concat(t.id,"/doublecheck"),size:"large",children:Object(V.jsx)(Jn.a,{})})})]})]}),Object(V.jsx)(sr,{open:o,onClose:function(){return s(!1)},roundId:t.id})]})},mr=n(1047),hr=n(1076),Or=n(1029),pr=Object(te.a)(dr||(dr=Object(ee.a)(["\n  query NextQualifying($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      nextQualifying {\n        id\n        name\n      }\n    }\n  }\n"]))),xr=Object(te.a)(ur||(ur=Object(ee.a)(["\n  mutation RemovePersonFromRound($input: RemovePersonFromRoundInput!) {\n    removePersonFromRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),cr),fr=function(e){var t=e.open,n=e.onClose,i=e.competitor,c=e.roundId,a=fe(),o=Object(r.useState)(""),s=Object($.a)(o,2),l=s[0],d=s[1],u=Object(ir.a)(pr,{variables:{roundId:c}}),j=Object($.a)(u,2),b=j[0],m=j[1],h=m.data,O=m.loading,p=m.error;Object(r.useEffect)((function(){t&&(b(),d(""))}),[t,b]);var x=Object(pe.a)(xr,{variables:{input:{roundId:c,personId:i&&i.id,replace:"yes"===l}},onCompleted:n,onError:a}),f=Object($.a)(x,2),v=f[0],g=f[1].loading;return Object(V.jsxs)(Kn.a,{open:t,onClose:n,children:[O&&Object(V.jsx)(oe,{}),Object(V.jsxs)(rr.a,{children:["Quit ",i&&i&&i.name]}),Object(V.jsxs)(tr.a,{children:[p&&Object(V.jsx)(se.a,{error:p}),h&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(nr.a,{children:["Going to permanently remove ",i&&i.name," from this round. Are you sure you want to proceed?"]}),Object(V.jsxs)(mr.a,{value:l,onChange:function(e){return d(e.target.value)},children:[h.round.nextQualifying.length>0&&Object(V.jsx)(hr.a,{control:Object(V.jsx)(Or.a,{}),value:"yes",label:"\n                    Yes, remove ".concat(i&&i.name,"\n                    and replace they with other qualifying competitors:\n                    ").concat(h.round.nextQualifying.map((function(e){return e.name})).join(", "),".\n                  ")}),Object(V.jsx)(hr.a,{control:Object(V.jsx)(Or.a,{}),value:"no",label:h.round.nextQualifying.length>0?"Yes, just remove ".concat(i&&i.name," and don't replace them."):"Yes, remove ".concat(i&&i.name,".")})]})]})]}),Object(V.jsxs)(er.a,{children:[Object(V.jsx)(Oe.a,{onClick:n,children:"Cancel"}),Object(V.jsx)(Oe.a,{onClick:v,color:"primary",disabled:""===l||g,children:"Confirm"})]})]})},vr=Object(te.a)(jr||(jr=Object(ee.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        round {\n          id\n          results {\n            id\n            ...adminRoundResult\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),cr);var gr,yr=function(e){var t=e.round,n=e.competitionId,i=Object(s.b)(),c=Object(d.b)().enqueueSnackbar,a=fe(),o=Object(r.useState)(null),l=Object($.a)(o,2),j=l[0],b=l[1],m=Object(r.useState)({}),h=Object($.a)(m,2),O=h[0],p=h[1],x=Object(r.useState)(null),f=Object($.a)(x,2),v=f[0],g=f[1],y=Object(pe.a)(vr,{onCompleted:function(){b(null)},onError:a}),w=Object($.a)(y,2),C=w[0],I=w[1].loading,k=Object(r.useCallback)((function(e,t){p({position:{left:t.clientX,top:t.clientY},result:e})}),[]),S=t.competitionEvent.rounds.find((function(e){return e.number===t.number+1})),E=S&&S.open;return Object(r.useEffect)((function(){E&&c("The next round has already been open, any changes won't affect it!",{variant:"info"})}),[E,c]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{container:!0,direction:"row",spacing:2,children:[Object(V.jsx)(re.a,{item:!0,xs:12,md:3,children:Object(V.jsx)(An,{result:j,results:t.results,onResultChange:b,eventId:t.competitionEvent.event.id,format:t.format,timeLimit:t.timeLimit,cutoff:t.cutoff,focusOnResultChange:!0,disabled:I,onSubmit:function(e){C({variables:{input:{id:j.id,attempts:e}}})}})}),Object(V.jsxs)(re.a,{item:!0,xs:12,md:9,container:!0,direction:"column",spacing:1,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(br,{round:t,competitionId:n})}),Object(V.jsx)(re.a,{item:!0,sx:{maxWidth:"100%"},children:Object(V.jsx)(ut.a,{component:Ne.a,sx:{pr:.5},children:Object(V.jsx)(Ln,{results:t.results,format:t.format,eventId:t.competitionEvent.event.id,onResultClick:k})})})]})]}),Object(V.jsx)(Yn,Object(u.a)(Object(u.a)({},O),{},{onClose:function(){return p({})},onEditClick:function(e){return b(e)},onQuitClick:function(e){return g(e.person)},onClearClick:function(e){i({description:"This will clear all attempts of ".concat(e.person.name,".")}).then((function(){C({variables:{input:{id:e.id,attempts:[]}}})}))},competitionId:n})),Object(V.jsx)(fr,{open:Boolean(v),onClose:function(){return g(null)},competitor:v,roundId:t.id})]})},wr=Object(te.a)(gr||(gr=Object(ee.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      number\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          open\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        ...adminRoundResult\n      }\n    }\n  }\n  ","\n"])),cr);var Cr=function(){var e=Object(K.h)(),t=e.competitionId,n=e.roundId,r=Object(ne.b)(wr,{variables:{id:n}}),i=r.data,c=r.loading,a=r.error;if(c&&!i)return Object(V.jsx)(oe,{});if(a)return Object(V.jsx)(se.a,{error:a});var o=i.round;return Object(V.jsx)(yr,{round:o,competitionId:t})},Ir=n(1032),kr=n(1041),Sr=n(1060);var Er,Ar=i.a.memo((function(e){var t=e.competitors,n=e.competitionEvents,i=e.competitionId,c=Object(r.useState)(0),o=Object($.a)(c,2),s=o[0],l=o[1],d=Object(r.useState)(10),u=Object($.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)(""),h=Object($.a)(m,2),O=h[0],p=h[1];var x=function(e,t){return t?e.filter((function(e){var n=[e.name,e.wcaId,e.country.name,e.registrantId.toString()];return t.toLowerCase().split(/\s+/).every((function(e){return n.some((function(t){return t&&t.toLowerCase().includes(e)}))}))})):e}(Object(r.useMemo)((function(){return t.slice().sort((function(e,t){return e.name.localeCompare(t.name)}))}),[t]),O),f=x.slice(s*j,s*j+j);return Object(V.jsxs)(Ne.a,{children:[Object(V.jsx)(Sr.a,{children:Object(V.jsx)(yt.a,{variant:"standard",label:"Search",value:O,onChange:function(e){p(e.target.value),l(0)}})}),Object(V.jsx)(ut.a,{children:Object(V.jsxs)(jt.a,{size:"small",children:[Object(V.jsx)(ht.a,{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsx)(pt.a,{align:"right",children:"#"}),Object(V.jsx)(pt.a,{children:"Name"}),Object(V.jsx)(pt.a,{children:"Country"}),Object(V.jsx)(pt.a,{children:"WCA ID"}),Object(V.jsx)(pt.a,{align:"center",colSpan:n.length,children:"Results"})]})}),Object(V.jsx)(bt.a,{children:f.map((function(e){return Object(V.jsxs)(Ot.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(V.jsx)(pt.a,{align:"right",children:e.registrantId}),Object(V.jsx)(pt.a,{children:Object(V.jsx)(kr.a,{component:a.b,to:"/competitions/".concat(i,"/competitors/").concat(e.id),underline:"hover",children:e.name})}),Object(V.jsx)(pt.a,{children:e.country.name}),Object(V.jsx)(pt.a,{children:e.wcaId&&Object(V.jsx)(kr.a,{href:nt("/persons/".concat(e.wcaId)),target:"_blank",underline:"hover",children:e.wcaId})}),n.map((function(t){var n=t.rounds[0].results.find((function(t){return t.person.id===e.id}));return Object(V.jsx)(pt.a,{align:"center",sx:{opacity:n&&0===n.attempts.length?.5:1},padding:"none",children:n&&Object(V.jsx)($t.a,{title:n.attempts.length>0?"Competed":"Awaiting result",placement:"top",children:Object(V.jsx)("span",{children:Object(V.jsx)(Ee.a,{eventId:t.event.id,small:!0})})})},t.id)}))]},e.id)}))})]})}),Object(V.jsx)(Ir.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:t.length,rowsPerPage:j,page:s,onPageChange:function(e,t){l(t)},onRowsPerPageChange:function(e){b(parseInt(e.target.value,10)),l(0)}})]})})),Tr=Object(te.a)(Er||(Er=Object(ee.a)(["\n  query Competitors($id: ID!) {\n    competition(id: $id) {\n      id\n      competitors {\n        id\n        registrantId\n        name\n        wcaId\n        country {\n          iso2\n          name\n        }\n      }\n      competitionEvents {\n        id\n        event {\n          id\n        }\n        rounds {\n          id\n          results {\n            id\n            person {\n              id\n            }\n            attempts {\n              result\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var Rr=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(Tr,{variables:{id:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Competitors"}),Object(V.jsx)(Ar,{competitors:c.competitors,competitionEvents:c.competitionEvents,competitionId:c.id})]})},Pr=n(951),Dr=n(541),Nr=n.n(Dr),Mr=n(540),zr=n.n(Mr),Wr=n(538),Fr=n.n(Wr),$r=n(537),Br=n.n($r),Ur=n(539),Lr=n.n(Ur),qr=n(341),Hr=n.n(qr);var Gr=function(e){var t=e.competition,n=Object(K.f)();return Object(V.jsxs)(Sr.a,{sx:{justifyContent:{xs:"center",md:"flex-start"}},children:[Object(V.jsxs)(ot.a,{component:a.b,to:"/admin/competitions/".concat(t.id),sx:{color:"inherit",textDecoration:"none",display:{xs:"none",md:"unset"}},children:[Object(V.jsx)(Fe.a,{variant:"h6",color:"inherit",component:"span",children:t.shortName}),Object(V.jsx)(Fe.a,{variant:"overline",component:"span",sx:{ml:1},children:"Admin"})]}),Object(V.jsx)(ot.a,{sx:{flexGrow:1,display:{xs:"none",md:"unset"}}}),Object(V.jsx)($t.a,{title:"Events",children:Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id),size:"large",children:Object(V.jsx)(Br.a,{})})}),t.access.canManage&&Object(V.jsx)($t.a,{title:"Synchronization",children:Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id,"/sync"),size:"large",children:Object(V.jsx)(Fr.a,{})})}),Object(V.jsx)($t.a,{title:"Competitors",children:Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id,"/competitors"),size:"large",children:Object(V.jsx)(Hr.a,{})})}),t.access.canManage&&Object(V.jsx)($t.a,{title:"Settings",children:Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id,"/settings"),size:"large",children:Object(V.jsx)(Lr.a,{})})}),Object(V.jsx)($t.a,{title:"Public view",children:Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:n.pathname.replace(/^\/admin/,""),size:"large",children:Object(V.jsx)(zr.a,{})})}),Object(V.jsx)($t.a,{title:"My competitions",children:Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:"/my-competitions",size:"large",children:Object(V.jsx)(Nr.a,{})})})]})};var Vr,Qr=function(e){var t=e.competition,n=e.children;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Pr.a,{position:"sticky",children:Object(V.jsx)(Gr,{competition:t})}),Object(V.jsx)(ot.a,{sx:{position:"relative",p:3},children:n})]})},Yr=Object(te.a)(Vr||(Vr=Object(ee.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      access {\n        canManage\n        canScoretake\n      }\n    }\n  }\n"])));var _r=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(Yr,{variables:{id:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition;return c.access.canScoretake?Object(V.jsx)(Qr,{competition:c,children:Object(V.jsxs)(K.d,{children:[Object(V.jsx)(K.b,{path:"",element:Object(V.jsx)(De,{})}),c.access.canManage&&Object(V.jsx)(K.b,{path:"sync",element:Object(V.jsx)(at,{})}),c.access.canManage&&Object(V.jsx)(K.b,{path:"settings",element:Object(V.jsx)(Dt,{})}),Object(V.jsx)(K.b,{path:"rounds/:roundId/doublecheck",element:Object(V.jsx)(Pn,{})}),Object(V.jsx)(K.b,{path:"rounds/:roundId",element:Object(V.jsx)(Cr,{})}),Object(V.jsx)(K.b,{path:"competitors",element:Object(V.jsx)(Rr,{})}),Object(V.jsx)(K.b,{path:"*",element:Object(V.jsx)(K.a,{to:"/admin/competitions/".concat(c.id)})})]})}):Object(V.jsx)(K.a,{to:"/sign-in"})},Jr=n(1062),Zr=n(542),Xr=n.n(Zr);var Kr=function(e){var t=e.room;return Object(V.jsx)($t.a,{title:t.name,placement:"top",children:Object(V.jsx)(ot.a,{sx:{display:"inline-block",width:10,height:10,borderRadius:"100%",backgroundColor:t.color}})})};function ei(e){if(e.startsWith("other-"))return{type:"other",id:e.replace(/^other-/,"")};var t=e.match(/^(\w+)(?:-r(\d+))?(?:-g(\d+))?(?:-a(\d+))?$/);if(!t)throw new Error("Invalid activity code: '".concat(e,"'."));var n=Object($.a)(t,5),r=n[1],i=n[2],c=n[3],a=n[4];return{type:"official",eventId:r,roundNumber:i?parseInt(i,10):null,groupName:c||null,attemptNumber:a?parseInt(a,10):null}}var ti=n(109),ni=n(165),ri=n(1042),ii="geolocation"in navigator;function ci(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,i=n.longitude;e({latitude:r,longitude:i})}),t,{maximumAge:3e5})}))}function ai(e,t,n,r){var i=oi(r-t)*Math.cos(oi(e+n)/2),c=oi(n-e);return 6371*Math.sqrt(i*i+c*c)}function oi(e){return e*Math.PI/180}function si(e){var t=Object(Ye.a)(e.endTime);return Object(ri.a)(new Date,t)>60}function li(e){var t=Object(Ye.a)(e.startTime);return Object(ri.a)(t,new Date)>60}function di(e){return!si(e)&&!li(e)}function ui(e){var t=e.venues.map((function(e){return e.country}));return Object(Gt.m)(t.map((function(e){return e.iso2}))).map((function(e){return t.find((function(t){return t.iso2===e}))}))}function ji(e,t){var n=ei(t),r=n.eventId,i=n.roundNumber,c=e.find((function(e){return e.event.id===r}));if(!c)return null;var a=c.rounds.find((function(e){return e.number===i}));return a?{event:c.event,round:a}:null}function bi(){return(bi=Object(ni.a)(Object(ti.a)().mark((function e(t){var n,r,i;return Object(ti.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ci();case 2:return n=e.sent,r=n.latitude,i=n.longitude,e.abrupt("return",Object(Gt.g)(t,(function(e){var t=e.venues.map((function(e){return ai(r,i,e.latitude,e.longitude)}));return Math.min.apply(Math,Object(dt.a)(t))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mi=n(1021),hi=n(1014),Oi=n(1061),pi=n(1031),xi=n(1015);function fi(e,t){var n=Object(mi.a)(Object(Ye.a)(e),"d MMM yyyy").split(" "),r=Object($.a)(n,3),i=r[0],c=r[1],a=r[2],o=Object(mi.a)(Object(Ye.a)(t),"d MMM yyyy").split(" "),s=Object($.a)(o,3),l=s[0],d=s[1],u=s[2];return e===t?"".concat(c," ").concat(i,", ").concat(a):c===d&&a===u?"".concat(c," ").concat(i," - ").concat(l,", ").concat(u):a===u?"".concat(c," ").concat(i," - ").concat(d," ").concat(l,", ").concat(a):"".concat(c," ").concat(i,", ").concat(a," - ").concat(d," ").concat(l,", ").concat(u)}function vi(e){return Object(mi.a)(Object(Ye.a)(e),"HH:mm")}function gi(e){return Object(mi.a)(Object(Ye.a)(e),"yyyy-MM-dd")}function yi(){var e=Object(pi.a)(Object(Oi.a)(),{months:1});return Object(xi.a)(e,{representation:"date"})}var wi=function(e){var t=e.activityCode,n=e.activities,r=e.competitionEvents,i=e.competitionId,c=ei(t).attemptNumber,o=ji(r,t),s=o.event,l=o.round,d=c?"".concat(s.name," - ").concat(l.name," (Attempt ").concat(c,")"):"".concat(s.name," - ").concat(l.name),u=Object(Gt.f)(n.map((function(e){return e.startTime}))),j=Object(Gt.e)(n.map((function(e){return e.endTime}))),b=Object(Ye.a)(j)-Object(Ye.a)(u),m=new Date-Object(Ye.a)(u),h=Math.round(Object(Gt.a)(m,0,b)/b*100);return Object(V.jsxs)(le.a,{sx:{height:"100%",position:"relative"},children:[Object(V.jsx)(Jr.a,{component:a.b,to:"/competitions/".concat(i,"/rounds/").concat(l.id),disabled:!l.open,children:Object(V.jsx)(je.a,{avatar:Object(V.jsx)(Ee.a,{eventId:s.id}),title:d})}),Object(V.jsx)(de.a,{children:Object(V.jsx)(re.a,{container:!0,spacing:1,children:n.map((function(e){return Object(V.jsxs)(re.a,{item:!0,xs:6,children:[Object(V.jsx)(Kr,{room:e.room}),Object(V.jsx)(Fe.a,{component:"span",variant:"body2",sx:{ml:1},children:(t=e.startTime,n=e.endTime,"".concat(vi(t)," - ").concat(vi(n)))})]},e.id);var t,n}))})}),0<h&&h<100&&Object(V.jsx)(ce.a,{variant:"determinate",value:h,sx:{position:"absolute",bottom:0,left:0,right:0}})]})};var Ci,Ii=function(e){var t=e.venues,n=e.competitionEvents,i=e.competitionId,c=t.flatMap((function(e){return e.rooms})).flatMap((function(e){return e.activities.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{room:e})}))})).filter((function(e){return"official"===ei(e.activityCode).type&&ji(n,e.activityCode)})),a=Object(Gt.h)(c,(function(e){return e.startTime})),o=Object(Gt.m)(a.map((function(e){return gi(e.startTime)}))),s=Object(r.useState)(function(e){var t=Object(hi.a)(Object(Oi.a)(),e.map(Ye.a));return e[t]}(o)),l=Object($.a)(s,2),d=l[0],j=l[1],b=a.filter((function(e){return gi(e.startTime)===d})),m=Object(Gt.d)(b,(function(e){return e.activityCode}));return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(st.a,{indicatorColor:"secondary",variant:"scrollable",textColor:"inherit",value:d,onChange:function(e,t){return j(t)},sx:{mb:2},children:o.map((function(e){return Object(V.jsx)(lt.a,{label:(t=e,Object(mi.a)(Object(Ye.a)(t),"EEEE, MMM d")),value:e},e);var t}))}),Object(V.jsx)(re.a,{container:!0,spacing:1,children:Object.entries(m).map((function(e){var t=Object($.a)(e,2),r=t[0],c=t[1];return Object(V.jsx)(re.a,{item:!0,xs:12,sm:6,lg:4,children:Object(V.jsx)(wi,{activityCode:r,activities:c,competitionEvents:n,competitionId:i})},r)}))})]})},ki=Object(te.a)(Ci||(Ci=Object(ee.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      name\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          active\n          open\n          number\n        }\n      }\n      venues {\n        id\n        name\n        country {\n          iso2\n          name\n        }\n        rooms {\n          id\n          name\n          color\n          activities {\n            id\n            activityCode\n            name\n            startTime\n            endTime\n          }\n        }\n      }\n    }\n  }\n"])));var Si=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(ki,{variables:{id:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition,o=ui(c),s=Object(Gt.b)(c.competitionEvents,(function(e){return e.rounds.filter((function(e){return e.active})).map((function(t){return[e,t]}))}));return Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsxs)(re.a,{item:!0,sx:{width:"100%"},children:[Object(V.jsxs)(Fe.a,{variant:"h5",gutterBottom:!0,noWrap:!0,children:["Welcome to ",c.name,"!"]}),Object(V.jsxs)(Fe.a,{children:["This competition takes place in\n            ".concat(1===o.length?o[0].name:"multiple countries",". Check out the "),Object(V.jsx)(kr.a,{href:nt("/competitions/".concat(c.wcaId)),target:"_blank",underline:"hover",children:"WCA website"})," for more details on the competition."]})]}),s.length>0&&Object(V.jsxs)(re.a,{item:!0,sx:{width:"100%"},children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Active rounds"}),Object(V.jsx)(re.a,{container:!0,spacing:1,children:s.map((function(e){var t=Object($.a)(e,2),n=t[0],r=t[1];return Object(V.jsx)(re.a,{item:!0,xs:12,sm:6,lg:4,children:Object(V.jsx)(le.a,{children:Object(V.jsx)(Jr.a,{component:a.b,to:"/competitions/".concat(c.id,"/rounds/").concat(r.id),children:Object(V.jsx)(je.a,{avatar:Object(V.jsx)(Ee.a,{eventId:n.event.id}),title:"".concat(n.event.name," - ").concat(r.name)})})})},r.id)}))})]}),Object(V.jsxs)(re.a,{item:!0,sx:{width:"100%"},children:[Object(V.jsxs)(re.a,{container:!0,alignContent:"center",children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Fe.a,{variant:"h5",children:"Schedule"})}),Object(V.jsx)(re.a,{item:!0,sx:{flexGrow:1}}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)($t.a,{title:"\n              All the dates and times below are displayed in your local timezone: ".concat(Intl.DateTimeFormat().resolvedOptions().timeZone,"\n              "),children:Object(V.jsx)(Xr.a,{color:"action"})})})]}),Object(V.jsx)(Ii,{venues:c.venues,competitionEvents:c.competitionEvents,competitionId:c.id})]})]})},Ei=n(1e3),Ai=n(546),Ti=n.n(Ai),Ri=n(564),Pi=Object(Ri.a)(i.a,{useCssModules:!1}),Di={cell:{fontSize:"1.5rem",pr:0,"&:last-child":{pr:4}},ranking:{width:75,pr:2},advancing:{color:function(e){return e.palette.getContrastText(Nn.a.A400)},backgroundColor:Nn.a.A400},name:{width:"22%",overflow:"hidden",textOverflow:"ellipsis"},country:{width:50}},Ni={SHOWING:Symbol("showing"),SHOWN:Symbol("shown"),HIDING:Symbol("hiding")},Mi=1e4,zi=1e3,Wi=1e3;function Fi(){return Math.floor((window.innerHeight-64-50)/63)}var $i=function(e){var t=e.results,n=e.format,i=e.eventId,c=e.title,o=e.exitUrl,s=Object(r.useState)(Ni.SHOWING),l=Object($.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(0),m=Object($.a)(b,2),h=m[0],O=m[1],p=Cn(i,n),x=t.filter((function(e){return e.attempts.length>0}));return Object(r.useEffect)((function(){if(d!==Ni.SHOWN){if(d===Ni.SHOWING){var e=setTimeout((function(){j(Ni.SHOWN)}),zi);return function(){return clearTimeout(e)}}if(d===Ni.HIDING){var t=setTimeout((function(){j(Ni.SHOWING),O((function(e){var t=e+Fi();return t>=x.length?0:t}))}),Wi);return function(){return clearTimeout(t)}}throw new Error("Unrecognized status: ".concat(d))}if(x.length>Fi()){var n=setTimeout((function(){j(Ni.HIDING)}),Mi);return function(){return clearTimeout(n)}}}),[d,x.length]),Object(V.jsx)(Kn.a,{fullScreen:!0,open:!0,TransitionComponent:Ei.a,TransitionProps:{direction:"up"},transitionDuration:500,children:Object(V.jsxs)(ot.a,{sx:{maxHeight:"100vh",overflow:"hidden"},children:[Object(V.jsx)(Pr.a,{position:"sticky",children:Object(V.jsxs)(Sr.a,{children:[Object(V.jsx)(Fe.a,{variant:"h4",color:"inherit",children:c}),Object(V.jsx)(ot.a,{sx:{flexGrow:1}}),Object(V.jsx)(Nt.a,{color:"inherit",component:a.b,to:o,size:"large",children:Object(V.jsx)(Ti.a,{})})]})}),Object(V.jsxs)(jt.a,{sx:{tableLayout:"fixed"},children:[Object(V.jsx)(ht.a,{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Di.cell),Di.ranking),align:"right",children:"#"}),Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Di.cell),Di.name),children:"Name"}),Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Di.cell),Di.country)}),Object(Gt.k)(n.numberOfAttempts,(function(e){return Object(V.jsx)(pt.a,{sx:Di.cell,align:"right",children:e+1},e)})),p.map((function(e){var t=e.name;return Object(V.jsx)(pt.a,{sx:Di.cell,align:"right",children:t},t)}))]})}),Object(V.jsx)(bt.a,{children:x.slice(h,h+Fi()).map((function(e,t){return Object(V.jsx)(ie.a,{timeout:{enter:zi,exit:Wi},style:d===Ni.SHOWING?{transitionDelay:"".concat(150*t,"ms")}:{},in:[Ni.SHOWING,Ni.SHOWN].includes(d),children:Object(V.jsxs)(Ot.a,{sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)(Object(u.a)({},Di.cell),Di.ranking),e.advancing?Di.advancing:{}),children:e.ranking}),Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Di.cell),Di.name),children:e.person.name}),Object(V.jsx)(pt.a,{sx:Di.cell,align:"center",children:Object(V.jsx)(Pi,{code:e.person.country.iso2.toLowerCase()})}),kn(e,n.numberOfAttempts).map((function(e,t){return Object(V.jsx)(pt.a,{align:"right",sx:Di.cell,children:sn(e,i)},t)})),p.map((function(t,n){var r=t.name,c=t.field,a=t.recordTagField;return Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)({},Di.cell),{},{fontWeight:0===n?600:400}),children:Object(V.jsx)($n,{recordTag:e[a],hidePb:!0,children:sn(e[c],i)})},r)}))]})},e.person.id)}))})]})]})})},Bi=n(180),Ui=n.n(Bi);function Li(e){switch(e){case"222":return"2x2x2";case"333":return"3x3x3";case"333oh":return"3x3x3 One-Handed";case"333fm":return"3x3x3 Fewest Moves";case"333bf":return"3x3x3 Blindfolded";case"333mbf":return"3x3x3 Multi-Blindfolded";case"444":return"4x4x4";case"444bf":return"4x4x4 Blindfolded";case"555":return"5x5x5";case"555bf":return"5x5x5 Blindfolded";case"666":return"6x6x6";case"777":return"7x7x7";case"clock":return"Clock";case"minx":return"Megaminx";case"sq1":return"Square-1";case"skewb":return"Skewb";case"pyram":return"Pyraminx"}}function qi(){return(qi=Object(ni.a)(Object(ti.a)().mark((function e(t,n,r){var i,c,a,o,s,l,d,u,j;return Object(ti.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new Headers).append("Content-Type","application/json"),e.next=4,fetch("https://raw.githubusercontent.com/robiningelbrecht/wca-rest-api/master/api/persons/".concat(r,".json"));case 4:return c=e.sent,e.t0=JSON,e.next=8,c.text();case 8:e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),o=a.rank.singles.find((function(e){return e.eventId===n})),s="First Time Solver",void 0!==o&&(s="".concat(Li(n)," PR Single: ").concat(sn(o.best,n))),l=a.rank.averages.find((function(e){return e.eventId===n})),d="First Time Solver",void 0!==l&&(d="".concat(Li(n)," PR Average: ").concat(sn(l.best,n))),u={model:{fields:[{defaultValue:"Player Name",id:"name",title:"Player Name",type:"text"},{defaultValue:"0",id:"single",title:"Player Best Single",type:"text"},{defaultValue:"0",id:"average",title:"Player Best Average",type:"text"}]},payload:{name:a.name+"",single:"single"===t?s:d}},console.log(a),j={method:"PUT",headers:i,body:JSON.stringify(u),redirect:"follow"},fetch("https://app.singular.live/apiv1/datanodes/0NdPtR2WpFYZtDZ6qflFxT/data",j).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){console.log("error",e)}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hi=function(e){var t=e.type,n=e.eventId,r=e.wcaId;return Object(V.jsx)($t.a,{title:"Update Stream",children:Object(V.jsx)(Nt.a,{color:"inherit",onClick:function(){!function(e,t,n){qi.apply(this,arguments)}(t,n,r)},size:"small",children:Object(V.jsx)(Ui.a,{})})})},Gi={cell:{pr:{xs:"6px",md:"16px"},pl:{xs:"10px",md:"16px"},"&:last-child":{pr:2}},ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:function(e){return e.palette.getContrastText(Nn.a.A400)},backgroundColor:Nn.a.A400},name:{textOverflow:"ellipsis",overflow:"hidden",pr:0,maxWidth:{xs:150,md:250}}},Vi=i.a.memo((function(e){var t=e.results,n=e.format,r=e.eventId,i=e.competitionId,c=e.onResultClick,o=Object(B.a)((function(e){return e.breakpoints.up("sm")})),s=Object(B.a)((function(e){return e.breakpoints.up("md")})),l=Cn(r,n);return Object(V.jsx)(Ne.a,{children:Object(V.jsxs)(jt.a,{size:"small",children:[Object(V.jsx)(ht.a,{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Gi.cell),Gi.ranking),align:"right",children:"#"}),Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Gi.cell),Gi.ranking),align:"right",children:"PR"}),Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Gi.cell),Gi.ranking),align:"right",children:"AVG"}),Object(V.jsx)(pt.a,{sx:Gi.cell,children:"Name"}),s&&Object(V.jsx)(pt.a,{sx:Gi.cell,children:"Country"}),o&&Object(Gt.k)(n.numberOfAttempts,(function(e){return Object(V.jsx)(pt.a,{sx:Gi.cell,align:"right",children:e+1},e)})),l.map((function(e){var t=e.name;return Object(V.jsx)(pt.a,{sx:Gi.cell,align:"right",children:t},t)}))]})}),Object(V.jsx)(bt.a,{children:t.map((function(e){return Object(V.jsxs)(Ot.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:function(){return c&&c(e)},children:[Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)(Object(u.a)({},Gi.cell),Gi.ranking),e.advancing?Gi.advancing:{}),children:e.ranking}),Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)({},Gi.cell),Gi.ranking),children:Object(V.jsx)(Hi,{type:"single",eventId:r,wcaId:e.person.wcaId})}),Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)({},Gi.cell),Gi.ranking),children:Object(V.jsx)(Hi,{type:"average",eventId:r,wcaId:e.person.wcaId})}),Object(V.jsx)(pt.a,{sx:Object(u.a)(Object(u.a)({},Gi.cell),Gi.name),children:o?Object(V.jsx)(kr.a,{component:a.b,to:"/competitions/".concat(i,"/competitors/").concat(e.person.id),underline:"hover",children:e.person.name}):e.person.name}),s&&Object(V.jsx)(pt.a,{sx:Gi.cell,children:e.person.country.name}),o&&kn(e,n.numberOfAttempts).map((function(e,t){return Object(V.jsx)(pt.a,{align:"right",sx:Gi.cell,children:sn(e,r)},t)})),l.map((function(t,n){var i=t.name,c=t.field,a=t.recordTagField;return Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)({},Gi.cell),{},{fontWeight:0===n?600:400}),children:Object(V.jsx)($n,{recordTag:e[a],hidePb:!0,children:sn(e[c],r)})},i)}))]},e.id)}))})]})})}));var Qi=function(e){var t=e.result,n=e.format,r=e.eventId,i=e.competitionId,c=e.onClose,o=Cn(r,n);return Object(V.jsx)(Kn.a,{open:!!t,fullWidth:!0,onClose:c,children:!!t&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(rr.a,{children:[t.person.name," ",t.ranking&&"#".concat(t.ranking)]}),Object(V.jsx)(tr.a,{children:Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:"Name"}),Object(V.jsx)(Fe.a,{variant:"body2",children:t.person.name}),Object(V.jsx)(kr.a,{component:a.b,to:"/competitions/".concat(i,"/competitors/").concat(t.person.id),underline:"hover",children:"All results"})]}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:"Country"}),Object(V.jsx)(Fe.a,{variant:"body2",children:t.person.country.name})]}),t.ranking&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:"Attempts"}),Object(V.jsx)(Fe.a,{variant:"body2",children:t.attempts.map((function(e){return sn(e.result,r)})).join(", ")})]}),o.map((function(e){var n=e.name,i=e.field,c=e.recordTagField;return Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:n}),Object(V.jsx)(Fe.a,{variant:"body2",children:Object(V.jsx)($n,{recordTag:t[c],hidePb:!0,children:sn(t[i],r)})})]},n)}))]})]})}),Object(V.jsx)(er.a,{children:Object(V.jsx)(Oe.a,{color:"primary",onClick:c,children:"Close"})})]})})},Yi=100;var _i=function(e){var t=e.results,n=e.format,i=e.eventId,c=e.competitionId,a=Object(B.a)((function(e){return e.breakpoints.up("sm")})),o=Object(r.useState)(null),s=Object($.a)(o,2),l=s[0],d=s[1],u=Object(r.useState)(t.length<=Yi),j=Object($.a)(u,2),b=j[0],m=j[1];Object(r.useEffect)((function(){m(t.length<=Yi)}),[t]);var h=Object(r.useCallback)((function(e){d(e)}),[]),O=Object(r.useMemo)((function(){return b?t:t.slice(0,Yi)}),[t,b]);return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{container:!0,direction:"column",alignItems:"center",spacing:2,children:[Object(V.jsx)(re.a,{item:!0,style:{width:"100%"},children:Object(V.jsx)(Vi,{results:O,format:n,eventId:i,competitionId:c,onResultClick:h})}),!b&&Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Oe.a,{variant:"contained",disableElevation:!0,size:"small",onClick:function(){return m(!0)},children:[t.length-Yi," more"]})})]}),!a&&Object(V.jsx)(Qi,{result:l,format:n,eventId:i,competitionId:c,onClose:function(){return d(null)}})]})},Ji=n(547),Zi=n.n(Ji),Xi=n(1075),Ki=n(1034),ec=n(1037);function tc(){return(tc=Object(ni.a)(Object(ti.a)().mark((function e(t,n){var r,i,c,a;return Object(ti.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"},{defaultValue:"1",id:"roundId",title:"Round Id",type:"text"},{defaultValue:"Round 1",id:"roundName",title:"Round Name",type:"text"}]},payload:{competitionName:t.competitionEvent.competition.name,competitionId:t.competitionEvent.competition.id,eventName:t.competitionEvent.event.name,eventId:t.competitionEvent.event.id,roundName:t.name,roundId:t.id}},i=t.competitionEvent.event.id,t.results.forEach((function(e,t){if(null!==e.ranking&&e.ranking>n&&e.ranking<n+9){var c=t%8;r.model.fields.push({defaultValue:"",id:"player".concat(c,"name"),title:"Player ".concat(c," Name"),type:"text"}),r.model.fields.push({defaultValue:"",id:"player".concat(c,"country"),title:"Player ".concat(c," Country"),type:"text"}),r.model.fields.push({defaultValue:"",id:"player".concat(c,"solveAverage"),title:"Player ".concat(c," Average"),type:"text"}),r.model.fields.push({defaultValue:"",id:"player".concat(c,"solveBest"),title:"Player ".concat(c," Best"),type:"text"}),r.model.fields.push({defaultValue:"",id:"player".concat(c,"solveRank"),title:"Player ".concat(c," Rank"),type:"text"}),r.model.fields.push({defaultValue:"",id:"player".concat(c,"solveAdvancing"),title:"Player ".concat(c," Advancing"),type:"text"}),r.payload["player".concat(c,"name")]=e.person.name,r.payload["player".concat(c,"country")]=e.person.country.iso2,r.payload["player".concat(c,"solveAverage")]=sn(e.average,i),r.payload["player".concat(c,"solveBest")]=sn(e.best,i),r.payload["player".concat(c,"solveRank")]=e.ranking,r.payload["player".concat(c,"solveAdvancing")]=e.advancing,e.attempts.forEach((function(e,t){r.model.fields.push({defaultValue:"",id:"player".concat(c,"solve").concat(t),title:"Player ".concat(c," Solve ").concat(t),type:"text"}),r.payload["player".concat(c,"solve").concat(t)]=sn(e.result,i)}))}})),(c=new Headers).append("Content-Type","application/json"),a={method:"PUT",headers:c,body:JSON.stringify(r),redirect:"follow"},fetch("https://app.singular.live/apiv1/datanodes/3oJaI4WmaA1nqVuVuMGwaU/data",a).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nc=function(e){var t=e.round,n=Object(r.useState)(0),i=Object($.a)(n,2),c=i[0],a=i[1];return Object(r.useEffect)((function(){console.log(t.competitionEvent.competition.id),a(0)}),t.competitionEvent.competition.id),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)($t.a,{title:"Update Stream",children:Object(V.jsx)(Nt.a,{color:"inherit",onClick:function(){!function(e,t){tc.apply(this,arguments)}(t,c),console.log(t)},size:"large",children:Object(V.jsx)(Ui.a,{})})}),Object(V.jsxs)(Xi.a,{children:[Object(V.jsx)(ec.a,{id:"demo-simple-select-label",children:"Rank Range"}),Object(V.jsx)(Ki.a,{labelId:"demo-simple-select-label",id:t.eventId,value:c,label:"Rank Range",onChange:function(e){console.log(e.target.value),a(e.target.value)},children:t.results.map((function(e,n){if(n%8==0)return console.log(n),Object(V.jsxs)(Hn.a,{value:n,children:[n+1," to ",n+8]},"".concat(t.competitionEvent.competition.id,"-").concat(n))}))})]})]})};var rc,ic,cc,ac=function(e){var t=e.round,n=e.competitionId,r=Object(B.a)((function(e){return e.breakpoints.up("md")}));return Object(V.jsxs)(re.a,{item:!0,container:!0,alignItems:"center",children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Fe.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]})}),Object(V.jsx)(re.a,{item:!0,style:{flexGrow:1}}),r&&Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)($t.a,{title:"PDF",placement:"top",children:Object(V.jsx)(Nt.a,{component:"a",target:"_blank",href:tt("/pdf/rounds/".concat(t.id)),size:"large",children:Object(V.jsx)(Xn.a,{})})}),Object(V.jsx)($t.a,{title:"Projector view",placement:"top",children:Object(V.jsx)(Nt.a,{component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(t.id,"/projector"),size:"large",children:Object(V.jsx)(Zi.a,{})})}),Object(V.jsx)(nc,{round:t})]})]})},oc=Object(te.a)(rc||(rc=Object(ee.a)(["\n  fragment roundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      id\n      name\n      wcaId\n      country {\n        iso2\n        name\n      }\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"]))),sc=Object(te.a)(ic||(ic=Object(ee.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      finished\n      active\n      competitionEvent {\n        id\n        competition {\n          id\n          name\n        }\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),oc),lc=Object(te.a)(cc||(cc=Object(ee.a)(["\n  subscription RoundUpdated($id: ID!) {\n    roundUpdated(id: $id) {\n      id\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),oc);var dc=function(){var e=Object(K.h)(),t=e.competitionId,n=e.roundId,c=Object(ne.b)(sc,{variables:{id:n}}),a=c.data,o=c.loading,s=c.error,l=c.subscribeToMore,d=i.a.useState(void 0),u=Object($.a)(d,2),j=u[0],b=u[1];Object(r.useEffect)((function(){a&&b(a)}),[a]);var m=a||j,h=m&&m.round&&(!m.round.finished||m.round.active);if(Object(r.useEffect)((function(){if(h)return l({document:lc,variables:{id:n}})}),[l,n,h]),!m)return Object(V.jsx)(oe,{});if(s)return Object(V.jsx)(se.a,{error:s});var O=m.round;return Object(V.jsxs)(V.Fragment,{children:[o&&Object(V.jsx)(oe,{}),Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:1,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(ac,{round:O,competitionId:t})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(K.d,{children:[Object(V.jsx)(K.b,{path:"projector",element:Object(V.jsx)($i,{results:O.results,format:O.format,eventId:O.competitionEvent.event.id,title:"".concat(O.competitionEvent.event.name," - ").concat(O.name),exitUrl:"/competitions/".concat(t,"/rounds/").concat(n)})}),Object(V.jsx)(K.b,{path:"",element:Object(V.jsx)(_i,{results:O.results,format:O.format,eventId:O.competitionEvent.event.id,competitionId:t})}),Object(V.jsx)(K.b,{path:"*",element:Object(V.jsx)(K.a,{to:"/competitions/".concat(t,"/rounds/").concat(n)})})]})})]})]})},uc=n(70),jc=n(342),bc=n.n(jc);var mc,hc=function(e){var t=e.competitors,n=e.competitionId,i=Object(r.useState)(""),c=Object($.a)(i,2),o=c[0],s=c[1],l=function(e,t){var n=t.toLowerCase().split(/\s+/);return e.filter((function(e){return n.every((function(t){return e.name.toLowerCase().includes(t)}))}))}(t,o).sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(V.jsxs)(re.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Ne.a,{sx:{p:"2px 2px 2px 16px",display:"inline-block"},children:[Object(V.jsx)(uc.c,{autoFocus:!0,value:o,placeholder:"Search competitor",onChange:function(e){return s(e.target.value)}}),Object(V.jsx)(Nt.a,{disabled:!0,size:"large",children:Object(V.jsx)(bc.a,{})})]})}),Object(V.jsx)(re.a,{item:!0,sx:{width:"100%"},children:Object(V.jsx)(ue.a,{children:l.map((function(e){return Object(V.jsxs)(be.a,{button:!0,component:a.b,to:"/competitions/".concat(n,"/competitors/").concat(e.id),children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Pi,{code:e.country.iso2.toLowerCase(),size:"lg"})}),Object(V.jsx)(he.a,{primary:e.name})]},e.id)}))})})]})},Oc=Object(te.a)(mc||(mc=Object(ee.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var pc=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(Oc,{variables:{competitionId:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition;return Object(V.jsx)(hc,{competitors:c.competitors,competitionId:c.id})},xc=n.p+"static/media/wca-logo.513c1572.svg",fc={ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:function(e){return e.palette.getContrastText(Nn.a.A400)},backgroundColor:Nn.a.A400},roundName:{width:{xs:150,lg:200}}};var vc=function(e){var t=e.results,n=e.competitionId,r=e.onResultClick,i=Object(B.a)((function(e){return e.breakpoints.up("sm")})),c=t[0].round,o=c.format,s=c.competitionEvent.event,l=Cn(s.id,o),d=Math.max.apply(Math,Object(dt.a)(t.map((function(e){return e.round.format.numberOfAttempts}))));return Object(V.jsx)(Ne.a,{children:Object(V.jsxs)(jt.a,{size:"small",sx:{tableLayout:"fixed"},children:[Object(V.jsx)(ht.a,{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsx)(pt.a,{align:"right",sx:fc.ranking,children:"#"}),Object(V.jsx)(pt.a,{sx:fc.roundName,children:"Round"}),i&&Object(Gt.k)(d,(function(e){return Object(V.jsx)(pt.a,{align:"right",children:e+1},e)})),l.map((function(e){var t=e.name;return Object(V.jsx)(pt.a,{align:"right",children:t},t)}))]})}),Object(V.jsx)(bt.a,{children:t.map((function(e){return Object(V.jsxs)(Ot.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:function(t){return r(e,t)},children:[Object(V.jsx)(pt.a,{align:"right",sx:Object(u.a)(Object(u.a)({},fc.ranking),e.advancing?fc.advancing:{}),children:e.ranking}),Object(V.jsx)(pt.a,{sx:fc.roundName,children:i?Object(V.jsx)(kr.a,{component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(e.round.id),underline:"hover",children:e.round.name}):e.round.name}),i&&kn(e,o.numberOfAttempts).map((function(e,t){return Object(V.jsx)(pt.a,{align:"right",children:sn(e,s.id)},t)})),l.map((function(t,n){var r=t.name,i=t.field,c=t.recordTagField;return Object(V.jsx)(pt.a,{align:"right",sx:{fontWeight:0===n?600:400},children:Object(V.jsx)($n,{recordTag:e[c],children:sn(e[i],s.id)})},r)}))]},e.round.id)}))})]})})};var gc=function(e){var t=e.result,n=e.competitionId,r=e.onClose;return Object(V.jsxs)(Kn.a,{open:!!t,fullWidth:!0,onClose:r,children:[!!t&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(rr.a,{children:["#",t.ranking]}),Object(V.jsx)(tr.a,{children:Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:"Event"}),Object(V.jsx)(Fe.a,{variant:"body2",children:t.round.competitionEvent.event.name})]}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:"Round"}),Object(V.jsx)(Fe.a,{variant:"body2",children:t.round.name}),Object(V.jsx)(kr.a,{component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(t.round.id),underline:"hover",children:"All results"})]}),t.ranking&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:"Attempts"}),Object(V.jsx)(Fe.a,{variant:"body2",children:t.attempts.map((function(e){return sn(e.result,t.round.competitionEvent.event.id)})).join(", ")})]}),Cn(t.round.competitionEvent.event.id,t.round.format).map((function(e){var n=e.name,r=e.field,i=e.recordTagField;return Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle2",children:n}),Object(V.jsx)(Fe.a,{variant:"body2",children:Object(V.jsx)($n,{recordTag:t[i],children:sn(t[r],t.round.competitionEvent.event.id)})})]},n)}))]})]})})]}),Object(V.jsx)(er.a,{children:Object(V.jsx)(Oe.a,{color:"primary",onClick:r,children:"Close"})})]})};var yc,wc=function(e){var t=e.results,n=e.competitionId,i=Object(B.a)((function(e){return e.breakpoints.up("sm")})),c=Object(r.useState)(null),a=Object($.a)(c,2),o=a[0],s=a[1],l=t.filter((function(e){return e.attempts.length>0})),d=Object(Gt.d)(Object(Gt.h)(l,[function(e){return e.round.competitionEvent.event.rank},function(e){return e.round.number}]),(function(e){return e.round.competitionEvent.event.name}));return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(re.a,{container:!0,direction:"column",spacing:2,children:Object.entries(d).map((function(e){var t=Object($.a)(e,2),r=t[0],i=t[1];return Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle1",gutterBottom:!0,children:r}),Object(V.jsx)(vc,{results:i,competitionId:n,onResultClick:function(e){return s(e)}})]},r)}))}),!i&&Object(V.jsx)(gc,{result:o,competitionId:n,onClose:function(){return s(null)}})]})},Cc=Object(te.a)(yc||(yc=Object(ee.a)(["\n  query Competitor($id: ID!) {\n    person(id: $id) {\n      id\n      name\n      wcaId\n      country {\n        iso2\n      }\n      results {\n        id\n        ranking\n        advancing\n        attempts {\n          result\n        }\n        best\n        average\n        singleRecordTag\n        averageRecordTag\n        round {\n          id\n          name\n          number\n          competitionEvent {\n            id\n            event {\n              id\n              name\n              rank\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n      }\n    }\n  }\n"])));var Ic,kc=function(){var e=Object(K.h)(),t=e.competitionId,n=e.competitorId,r=Object(ne.b)(Cc,{variables:{id:n}}),i=r.data,c=r.loading,a=r.error;if(c&&!i)return Object(V.jsx)(oe,{});if(a)return Object(V.jsx)(se.a,{error:a});var o=i.person;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{container:!0,alignContent:"center",sx:{mb:2},children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(Fe.a,{variant:"h5",children:[o.name," ",Object(V.jsx)(Pi,{code:o.country.iso2.toLowerCase()})]})}),Object(V.jsx)(re.a,{item:!0,sx:{flexGrow:1}}),o.wcaId&&Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)("a",{href:nt("/persons/".concat(o.wcaId)),target:"_blank",rel:"noopener noreferrer",children:Object(V.jsx)("img",{src:xc,alt:"WCA Profile",height:"32",width:"32"})})})]}),Object(V.jsx)(wc,{results:o.results,competitionId:t})]})},Sc=Object(te.a)(Ic||(Ic=Object(ee.a)(["\n  query Podiums($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      podiums {\n        round {\n          id\n          finished\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n        results {\n          id\n          ranking\n          advancing\n          attempts {\n            result\n          }\n          best\n          average\n          person {\n            id\n            name\n            country {\n              iso2\n              name\n            }\n          }\n          singleRecordTag\n          averageRecordTag\n        }\n      }\n    }\n  }\n"])));var Ec,Ac=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(Sc,{variables:{competitionId:e}}),n=t.data,r=t.loading,i=t.error;if(r&&!n)return Object(V.jsx)(oe,{});if(i)return Object(V.jsx)(se.a,{error:i});var c=n.competition,a=Object(Gt.i)(c.podiums,(function(e){return e.round.finished})),o=Object($.a)(a,2),s=o[0],l=o[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Podiums"}),s.length>0?Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[s.map((function(e){var t=e.round,n=e.results;return Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"subtitle1",gutterBottom:!0,children:t.competitionEvent.event.name}),Object(V.jsx)(_i,{results:n,format:t.format,eventId:t.competitionEvent.event.id,competitionId:c.id})]},t.id)})),l.length>0&&Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{gutterBottom:!0,children:"Podiums for the following events are yet to be determined:"}),Object(V.jsx)(re.a,{container:!0,direction:"row",spacing:3,children:l.map((function(e){return e.round.competitionEvent.event})).map((function(e){return Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)($t.a,{title:e.name,children:Object(V.jsx)("span",{children:Object(V.jsx)(Ee.a,{eventId:e.id})})})},e.id)}))})]})]}):Object(V.jsx)(Fe.a,{children:"There are no podiums yet!"})]})},Tc=n(548),Rc=Object(te.a)(Ec||(Ec=Object(ee.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));var Pc=function(){var e=Object(K.h)().competitionId,t=Object(ne.b)(Rc,{variables:{id:e},pollInterval:6e4}),n=t.data,r=t.error,i=t.loading;if(r)return Object(V.jsx)(se.a,{error:r});var c=n?n.competition:null;return Object(V.jsxs)(Tc.a,{competition:c,children:[i&&Object(V.jsx)(oe,{}),Object(V.jsxs)(K.d,{children:[Object(V.jsx)(K.b,{path:"",element:Object(V.jsx)(Si,{})}),Object(V.jsx)(K.b,{path:"rounds/:roundId/*",element:Object(V.jsx)(dc,{})}),Object(V.jsx)(K.b,{path:"competitors",element:Object(V.jsx)(pc,{})}),Object(V.jsx)(K.b,{path:"competitors/:competitorId",element:Object(V.jsx)(kc,{})}),Object(V.jsx)(K.b,{path:"podiums",element:Object(V.jsx)(Ac,{})}),Object(V.jsx)(K.b,{path:"*",element:Object(V.jsx)(K.a,{to:"/competitions/".concat(e)})})]})]})},Dc=n(50),Nc=n(553),Mc=n.n(Nc),zc=n(554),Wc=n.n(zc),Fc={"&:hover":{opacity:.7}};var $c=function(){var e=Object(Dc.a)(),t=Object(r.useContext)(_);return Object(V.jsxs)(re.a,{container:!0,spacing:1,children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Nt.a,{size:"small",onClick:t,"aria-label":"Toggle theme",children:"dark"===e.palette.mode?Object(V.jsx)(Mc.a,{}):Object(V.jsx)(Wc.a,{})})}),Object(V.jsx)(re.a,{item:!0,sx:{flexGrow:1}}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(kr.a,{sx:Fc,variant:"subtitle1",component:a.b,to:"/about",underline:"none",children:"About"})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(kr.a,{sx:Fc,variant:"subtitle1",href:"https://github.com/thewca/wca-live",target:"_blank",rel:"noopener noreferrer",underline:"none",children:"GitHub"})})]})},Bc=n(568),Uc=n(555);var Lc=function(e){var t=e.maxHeight,n=e.itemHeight,r=e.items,i=e.renderItem,c=Math.min(t,r.length*n);return Object(V.jsx)("div",{style:{height:c},children:Object(V.jsx)(Uc.a,{children:function(e){var t=e.width;return Object(V.jsx)(Bc.a,{height:c,width:t,itemSize:n,itemCount:r.length,children:function(e){var t=e.index,n=e.style;return i(r[t],{style:n})}})}})})},qc=n(556),Hc=n.n(qc);var Gc=function(e){var t=ui(e.competition);if(1===t.length){var n=Object($.a)(t,1)[0];return Object(V.jsx)(Pi,{code:n.iso2.toLowerCase(),size:"lg"})}return Object(V.jsx)(Hc.a,{})};var Vc=function(e){var t=e.title,n=e.competitions;return Object(V.jsxs)(ue.a,{dense:!0,disablePadding:!0,children:[t&&Object(V.jsx)(ze.a,{disableSticky:!0,children:t}),Object(V.jsx)(Lc,{maxHeight:300,itemHeight:60,items:n,renderItem:function(e,t){var n=t.style;return Object(V.jsxs)(be.a,{style:n,button:!0,component:a.b,to:"/competitions/".concat(e.id),children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Me.a,{children:Object(V.jsx)(Gc,{competition:e})})}),Object(V.jsx)(he.a,{primary:e.name,secondary:fi(e.startDate,e.endDate)})]},e.id)}})]})};var Qc,Yc=function(e){var t=e.past,n=e.inProgress,i=e.upcoming,c=Object(r.useState)(n.length>0?"inProgress":"upcoming"),a=Object($.a)(c,2),o=a[0],s=a[1],l={past:t,inProgress:n,upcoming:i}[o];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(st.a,{indicatorColor:"secondary",textColor:"inherit",value:o,onChange:function(e,t){s(t)},variant:"fullWidth",children:[Object(V.jsx)(lt.a,{label:"Upcoming",value:"upcoming"}),n.length>0&&Object(V.jsx)(lt.a,{label:"Right now",value:"inProgress"}),t.length>0&&Object(V.jsx)(lt.a,{label:"Past month",value:"past"})]}),Object(V.jsx)(Vc,{competitions:l})]})},_c=n(557),Jc=n.n(_c),Zc=Object(te.a)(Qc||(Qc=Object(ee.a)(["\n  query Competitions($filter: String!) {\n    competitions(filter: $filter, limit: 10) {\n      id\n      name\n    }\n  }\n"])));var Xc=function(e){var t=e.onChange,n=e.TextFieldProps,i=void 0===n?{}:n,c=Object(r.useState)(""),a=Object($.a)(c,2),o=a[0],s=a[1],l=wt(o,250),d=Object(ne.b)(Zc,{variables:{filter:l}}),j=d.data,b=d.loading,m=j?j.competitions:[];return Object(V.jsx)(gt.a,{clearOnBlur:!0,blurOnSelect:!0,options:m,getOptionLabel:function(e){return e.name},loading:b,onInputChange:function(e,t,n){"input"===n&&s(t)},value:null,onChange:function(e,n,r){"selectOption"===r&&t(n)},renderInput:function(e){return Object(V.jsx)(yt.a,Object(u.a)(Object(u.a)({},e),i))}})};var Kc=function(e){e.upcoming;var t=e.inProgress,n=(e.past,Object(K.g)()),i=Object(r.useState)(!1),c=Object($.a)(i,2),a=c[0],o=c[1],s=Object(r.useRef)(null);return Object(V.jsxs)(re.a,{container:!0,alignItems:"center",justifyContent:"flex-end",spacing:1,children:[t.length>0&&ii&&Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)($t.a,{title:"Find nearest competition",placement:"top",children:Object(V.jsx)(Nt.a,{onClick:function(){(function(e){return bi.apply(this,arguments)})(t).then((function(e){n("/competitions/".concat(e.id))}))},"aria-label":"Nearest competition",size:"large",children:Object(V.jsx)(Jc.a,{})})})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)($t.a,{title:"Search competitions",placement:"top",children:Object(V.jsx)(Nt.a,{onClick:function(){return o(!a)},size:"large",children:Object(V.jsx)(bc.a,{})})})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(ie.a,{in:a,onEntered:function(){return s.current.focus()},unmountOnExit:!0,children:Object(V.jsx)("div",{children:Object(V.jsx)(Xc,{onChange:function(e){return n("/competitions/".concat(e.id))},TextFieldProps:{fullWidth:!0,placeholder:"Search",variant:"outlined",size:"small",inputRef:s,onBlur:function(){return o(!1)},style:{width:250}}})})})})]})};var ea,ta=function(e){var t=e.title,n=e.records;return Object(V.jsxs)(ue.a,{dense:!0,disablePadding:!0,children:[t&&Object(V.jsx)(ze.a,{disableSticky:!0,children:t}),Object(V.jsx)(ot.a,{sx:{maxHeight:300,overflowY:"auto"},children:n.map((function(e){return Object(V.jsxs)(be.a,{button:!0,component:a.b,to:"/competitions/".concat(e.result.round.competitionEvent.competition.id,"/rounds/").concat(e.result.round.id),children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Fn,{recordTag:e.tag})}),Object(V.jsx)(he.a,{primary:Object(V.jsxs)("span",{children:[Object(V.jsx)("span",{children:"".concat(e.result.round.competitionEvent.event.name," ").concat(e.type," of ")}),Object(V.jsx)(ot.a,{component:"span",sx:{fontWeight:600},children:"".concat(sn(e.attemptResult,e.result.round.competitionEvent.event.id))})]}),secondary:"".concat(e.result.person.name," from ").concat(e.result.person.country.name)})]},e.id)}))})]})},na=Object(te.a)(ea||(ea=Object(ee.a)(["\n  query Competitions($from: Date!) {\n    competitions(from: $from) {\n      id\n      name\n      startDate\n      endDate\n      startTime\n      endTime\n      venues {\n        id\n        country {\n          iso2\n        }\n      }\n    }\n    recentRecords {\n      id\n      tag\n      type\n      attemptResult\n      result {\n        id\n        person {\n          id\n          name\n          country {\n            iso2\n            name\n          }\n        }\n        round {\n          id\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n            competition {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var ra=function(){var e=Object(ne.b)(na,{variables:{from:yi()}}),t=e.data,n=e.loading,r=e.error;if(n&&!t)return Object(V.jsx)(oe,{});if(r)return Object(V.jsx)(se.a,{error:r});var i=t.recentRecords,c=Object(Gt.h)(t.competitions,[function(e){return e.startTime},function(e){return e.endTime}]),a=c.filter(li),o=c.filter(di),s=c.filter(si).reverse();return Object(V.jsx)(ot.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3},display:"flex",minHeight:"100%"},children:Object(V.jsxs)(re.a,{container:!0,spacing:2,direction:"column",sx:{flexGrow:1},children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Kc,{upcoming:a,inProgress:o,past:s})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Ne.a,{children:Object(V.jsx)(Yc,{upcoming:a,inProgress:o,past:s})})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Ne.a,{children:Object(V.jsx)(ta,{title:"Recent records",records:i})})}),Object(V.jsx)(re.a,{item:!0,sx:{flexGrow:1}}),Object(V.jsx)(re.a,{item:!0,sx:{width:"100%"},children:Object(V.jsx)($c,{})})]})})},ia=n.p+"static/media/logo.513c1572.svg",ca=n(1016),aa=n(1044),oa=n(215),sa=n(558),la=n.n(sa);var da=function(){var e=Object(oa.a)(),t=Object(K.g)();return Object(V.jsxs)(Hn.a,{onClick:function(){E(),t("/"),e.resetStore()},children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(la.a,{})}),"Sign out"]})},ua=n(559),ja=n.n(ua),ba=n(560),ma=n.n(ba);var ha=function(e){var t=e.user,n=Object(r.useState)(!1),i=Object($.a)(n,2),c=i[0],o=i[1],s=Object(r.useRef)();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Nt.a,{ref:s,onClick:function(){return o(!0)},size:"small",children:Object(V.jsx)(aa.a,{alt:t.name,src:t.avatar.thumbUrl,size:"small"})}),Object(V.jsxs)(qn.a,{open:c,onClick:function(){return o(!1)},onClose:function(){return o(!1)},anchorEl:s.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},sx:{minWidth:200},children:[Object(V.jsxs)(Hn.a,{component:a.b,to:"/account",children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(ja.a,{})}),"Account"]}),Object(V.jsxs)(Hn.a,{component:a.b,to:"/my-competitions",children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(ma.a,{})}),"My competitions"]}),Object(V.jsx)(ca.a,{sx:{my:1}}),Object(V.jsx)(da,{})]})]})};var Oa=function(e){var t=e.currentUser,n=e.loaded,r=e.children;return Object(V.jsxs)(ot.a,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(V.jsx)(Sr.a,{children:Object(V.jsxs)(re.a,{container:!0,spacing:2,alignItems:"center",children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsxs)(ot.a,{component:a.b,to:"/",sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit"},children:[Object(V.jsx)("img",{src:ia,alt:"wca logo",height:"40"}),Object(V.jsx)(Fe.a,{variant:"h6",sx:{ml:1},children:"WCA Live"})]})}),Object(V.jsx)(re.a,{item:!0,sx:{flexGrow:1}}),n&&(t?Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(ha,{user:t})}):Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Oe.a,{variant:"outlined",size:"small",color:"inherit",component:a.b,to:"/sign-in",children:"Sign in"})}))]})}),Object(V.jsx)(ot.a,{sx:{flexGrow:1},children:r})]})},pa=n(561),xa=n.n(pa);function fa(e){return/^\d+-\d{6}$/.test(e)}var va,ga=function(e){var t=e.onSubmit,n=e.disabled,i=void 0!==n&&n,c=Object(r.useState)(""),a=Object($.a)(c,2),o=a[0],s=a[1];return Object(V.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(o)},children:Object(V.jsx)(yt.a,{variant:"outlined",label:"Code",value:o,onChange:function(e){return s(e.target.value)},disabled:i,InputProps:{endAdornment:Object(V.jsx)(Nt.a,{type:"submit",disabled:i||!fa(o),size:"large",children:Object(V.jsx)(xa.a,{})})}})})},ya=Object(te.a)(va||(va=Object(ee.a)(["\n  mutation SignIn($code: String!) {\n    signIn(input: { code: $code }) {\n      token\n    }\n  }\n"])));var wa=function(){var e=fe(),t=Object(oa.a)(),n=Object(K.g)(),r=Object(pe.a)(ya,{onError:e,onCompleted:function(e){S(e.signIn.token),n("/"),t.resetStore()}}),i=Object($.a)(r,2),c=i[0],a=i[1].loading;return Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use a one-time code"}),Object(V.jsx)(Fe.a,{color:"textSecondary",align:"center",children:"Generate a code on your trusted device and type here to establish a session without going through the WCA website. This strategy is useful for scoretaking on an unknown machine."})]}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(ga,{onSubmit:function(e){c({variables:{code:e}})},disabled:a})})]})};var Ca=function(){return Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use your WCA account"}),Object(V.jsxs)(Fe.a,{color:"textSecondary",align:"center",children:["If you don't have a WCA account, you can create one"," ",Object(V.jsx)(kr.a,{href:nt("/users/sign_up"),underline:"hover",children:"here"}),"."]})]}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Oe.a,{size:"large",variant:"contained",color:"primary",href:tt("/oauth/authorize"),children:"Sign in"})})]})};var Ia=function(){var e=Object(B.a)((function(e){return e.breakpoints.up("md")}));return Object(V.jsx)(ot.a,{sx:{height:"100%",p:4},children:Object(V.jsxs)(re.a,{container:!0,alignItems:"center",sx:{height:"100%"},spacing:4,children:[Object(V.jsx)(re.a,{item:!0,xs:12,md:!0,children:Object(V.jsx)(Ca,{})}),e&&Object(V.jsx)(ca.a,{orientation:"vertical",flexItem:!0}),Object(V.jsx)(re.a,{item:!0,xs:12,md:!0,children:Object(V.jsx)(wa,{})})]})})},ka=n.p+"static/media/about.91bf4591.svg";var Sa=function(){return Object(V.jsx)(ot.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3}},children:Object(V.jsxs)(re.a,{container:!0,spacing:2,direction:"column",children:[Object(V.jsx)(re.a,{item:!0,sx:{textAlign:"center"},children:Object(V.jsx)("img",{src:ka,alt:"about",height:"250"})}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"About"}),Object(V.jsxs)(Fe.a,{gutterBottom:!0,children:["WCA Live is an official platform for running"," ",Object(V.jsx)(kr.a,{href:"https://en.wikipedia.org/wiki/Speedcubing",underline:"hover",children:"Speedcubing"})," ","competitions governed by the"," ",Object(V.jsx)(kr.a,{href:"https://www.worldcubeassociation.org/about",underline:"hover",children:"World Cube Association"}),"."]}),Object(V.jsx)(Fe.a,{gutterBottom:!0,children:"Every weekend hundreds of competitors gather at speedcubing competitions all around the world. They aim to get podiums, break records and outperform their mates, but most importantly to enjoy spending time with their friends and meet new members of the community. There are up to 17 official events held at every competition - the well known 3x3x3 Cube, solved with both hands, one hand, blindfolded, but also less known types of puzzles like cubes from 2x2x2 up to 7x7x7, a tetrahedron and dodecahedron cubes and more!"}),Object(V.jsxs)(Fe.a,{children:["During the competition WCA Live is the place where the results are entered and managed. In every event a competitor waits for his cube to be mixed up, then performs each of his official attempts under the supervision of a judge (who makes sure all the"," ",Object(V.jsx)(kr.a,{href:"https://www.worldcubeassociation.org/regulations/",underline:"hover",children:"WCA rules"})," ","are fallowed). All attempt results are put down on a piece of paper as the competitor does them, then a scoretaker enters them to the system to eventually build up competitors ranking for the given round. After a competition all the competitor results end up in"," ",Object(V.jsx)(kr.a,{href:"https://www.worldcubeassociation.org/results/rankings",underline:"hover",children:"the WCA rankings"}),"."]})]}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Get inspired"}),Object(V.jsxs)(Fe.a,{children:["If you want to get a better feeling of how WCA competitions look and the great community around them, there's a great documentary available called"," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/1oZY2e25VUw",underline:"hover",children:"Why We Cube"})," ","and"," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/DHgC2Ru7_MQ",underline:"hover",children:"many"})," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/8AwlVDT3jo4",underline:"hover",children:"other"})," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/ZSGOVRhYoWU",underline:"hover",children:"inspiring"})," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/sFc-6QNoh8s",underline:"hover",children:"stories"})," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/TOJ2dXahS1Q",underline:"hover",children:"out"})," ",Object(V.jsx)(kr.a,{href:"https://youtu.be/nXuINN-Ah4Y",underline:"hover",children:"there"}),"."]})]}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Technical details"}),Object(V.jsxs)(Fe.a,{gutterBottom:!0,children:["The platform is designed specifically for result management and is just a part of the bigger picture. It communicates with other tools using"," ",Object(V.jsx)(kr.a,{href:"https://github.com/thewca/wcif/blob/master/specification.md",underline:"hover",children:"a standardized format"}),", which allows the community to build tiny tools focused on specific competition tasks, following the"," ",Object(V.jsx)(kr.a,{href:"https://en.wikipedia.org/wiki/Unix_philosophy",underline:"hover",children:"Unix Philosophy"}),". See"," ",Object(V.jsx)(kr.a,{href:"https://github.com/thewca/wcif/blob/master/vision.md",underline:"hover",children:"this vision document"})," ","for more details."]}),Object(V.jsxs)(Fe.a,{gutterBottom:!0,children:["WCA Live is an open source project, so feel free to check out the specifics on"," ",Object(V.jsx)(kr.a,{href:"https://github.com/thewca/wca-live",underline:"hover",children:"GitHub"}),"."]})]}),Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"Contact"}),Object(V.jsxs)(Fe.a,{children:["In general prefer to use the"," ",Object(V.jsx)(kr.a,{href:"https://www.worldcubeassociation.org/contact/website",underline:"hover",children:"WCA contact form"}),", so that your message is directed to the right team. In case of bug reports feel free to submit a"," ",Object(V.jsx)(kr.a,{href:"https://github.com/thewca/wca-live/issues",underline:"hover",children:"GitHub issue"})," ","or contact us directly at"," ",Object(V.jsx)(kr.a,{href:"mailto:software@worldcubeassociation.org",underline:"hover",children:"software@worldcubeassociation.org"}),"."]})]})]})})};function Ea(e){var t=Object(Ye.a)(e.expiresAt),n=Object(Ye.a)(e.insertedAt),r=new Date,i=t-n;return 100-Math.max(t-r,0)/i*100}var Aa,Ta=function(e){var t=e.oneTimeCode,n=e.open,i=e.onClose,c=Object(r.useState)(0),a=Object($.a)(c,2),o=a[0],s=a[1],l=!!t&&100===Ea(t);return Object(r.useEffect)((function(){if(n&&t&&!l){var e=setInterval((function(){var e=Ea(t);s(e)}),25);return function(){return clearInterval(e)}}}),[t,l,n]),Object(V.jsxs)(Kn.a,{open:n,onClose:i,children:[Object(V.jsx)(tr.a,{children:Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Fe.a,{color:"textSecondary",children:"Navigate to the sign in page on another device and enter the following code."})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Fe.a,{variant:"h4",align:"center",children:l?"Expired":t&&t.code})}),Object(V.jsx)(re.a,{item:!0,style:{width:"100%"},children:Object(V.jsx)(ce.a,{variant:"determinate",value:100-o})})]})}),Object(V.jsx)(er.a,{children:Object(V.jsx)(Oe.a,{color:"primary",onClick:function(){return i()},children:"Close"})})]})},Ra=Object(te.a)(Aa||(Aa=Object(ee.a)(["\n  mutation GenerateOneTimeCode {\n    generateOneTimeCode {\n      oneTimeCode {\n        id\n        code\n        expiresAt\n        insertedAt\n      }\n    }\n  }\n"])));var Pa=function(){var e=fe(),t=Object(r.useState)(!1),n=Object($.a)(t,2),i=n[0],c=n[1],a=Object(pe.a)(Ra,{onError:e,onCompleted:function(){return c(!0)}}),o=Object($.a)(a,2),s=o[0],l=o[1],d=l.data,u=l.loading,j=d?d.generateOneTimeCode.oneTimeCode:null;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:2,children:[Object(V.jsxs)(re.a,{item:!0,children:[Object(V.jsx)(Fe.a,{variant:"h5",gutterBottom:!0,children:"One-time code"}),Object(V.jsx)(Fe.a,{color:"textSecondary",children:"Generate a temporary code and use it to establish a session on another (hypothetically untrusted) device without going through the WCA website. This strategy is useful for scoretaking on an unknown machine, as you don't have to type any credentials on that machine, just the temporary code."})]}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Oe.a,{variant:"contained",color:"primary",disabled:u,onClick:function(){return s()},children:"Generate"})})]}),Object(V.jsx)(Ta,{oneTimeCode:j,open:i,onClose:function(){return c(!1)}})]})};var Da=function(){return Object(V.jsx)(ot.a,{p:{xs:2,sm:3},children:Object(V.jsx)(Pa,{})})},Na=n(1043);function Ma(e){switch(e){case"delegate":return"Delegate";case"trainee-delegate":return"Trainee delegate";case"organizer":return"Organizer";case"staff-dataentry":return"Scoretaker";default:return e}}var za=function(e){var t=e.title,n=e.staffMembers;return Object(V.jsxs)(ue.a,{dense:!0,disablePadding:!0,children:[t&&Object(V.jsx)(ze.a,{disableSticky:!0,children:t}),Object(V.jsx)(Lc,{maxHeight:300,itemHeight:60,items:n,renderItem:function(e,t){var n=t.style,r=e.competition;return Object(V.jsxs)(be.a,{style:n,button:!0,component:a.b,to:"/admin/competitions/".concat(r.id),children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Me.a,{children:Object(V.jsx)(Gc,{competition:r})})}),Object(V.jsx)(he.a,{primary:r.name,secondary:fi(r.startDate,r.endDate)}),Object(V.jsx)(ot.a,{sx:{display:"flex"},children:e.roles.map((function(e){return Object(V.jsx)(Na.a,{label:Ma(e),size:"small",color:"secondary",sx:{fontWeight:500,margin:.5}},e)}))})]},r.id)}})]})};var Wa,Fa=function(e){var t=e.title,n=e.competitors;return Object(V.jsxs)(ue.a,{dense:!0,disablePadding:!0,children:[t&&Object(V.jsx)(ze.a,{disableSticky:!0,children:t}),Object(V.jsx)(Lc,{maxHeight:300,itemHeight:60,items:n,renderItem:function(e,t){var n=t.style,r=e.competition;return Object(V.jsxs)(be.a,{style:n,button:!0,component:a.b,to:"/competitions/".concat(r.id,"/competitors/").concat(e.id),children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Gc,{competition:r})}),Object(V.jsx)(he.a,{primary:r.name,secondary:fi(r.startDate,r.endDate)})]},r.id)}})]})},$a=n(1071),Ba=n(1073),Ua=n(1072),La=n(563),qa=n.n(La),Ha=n(562),Ga=n.n(Ha),Va=Object(te.a)(Wa||(Wa=Object(ee.a)(["\n  mutation ImportCompetition($input: ImportCompetitionInput!) {\n    importCompetition(input: $input) {\n      competition {\n        id\n      }\n    }\n  }\n"])));var Qa,Ya=function(e){var t=e.competition,n=Object(s.b)(),r=Object(K.g)(),i=fe(),c=Object(pe.a)(Va,{variables:{input:{wcaId:t.wcaId}},onCompleted:function(e){var t=e.importCompetition.competition;r("/admin/competitions/".concat(t.id))},onError:i}),a=Object($.a)(c,2),o=a[0],l=a[1].loading;return Object(V.jsxs)(be.a,{button:!0,onClick:function(){n({description:"This will import ".concat(t.name," from the WCA website.")}).then((function(){return o()}))},disabled:l,children:[Object(V.jsx)(Me.a,{children:Object(V.jsx)(Ga.a,{})}),Object(V.jsx)(he.a,{primary:t.name,secondary:fi(t.startDate,t.endDate)})]},t.wcaId)},_a=Object(te.a)(Qa||(Qa=Object(ee.a)(["\n  query ImportableCompetitions {\n    importableCompetitions {\n      wcaId\n      name\n      startDate\n      endDate\n    }\n  }\n"])));var Ja=function(){var e=Object(ne.b)(_a),t=e.data,n=e.loading,r=e.error;if(n&&!t)return Object(V.jsx)(oe,{});if(r)return Object(V.jsx)(se.a,{error:r});var i=t.importableCompetitions,c=Object(Gt.h)(i,[function(e){return e.startDate},function(e){return e.endDate}]);return 0===c.length?Object(V.jsx)(ot.a,{p:2,pt:0,children:Object(V.jsx)(Fe.a,{variant:"body2",children:"You have no importable competitions."})}):Object(V.jsx)(ue.a,{dense:!0,disablePadding:!0,sx:{width:"100%",maxHeight:300,overflowY:"auto"},children:c.map((function(e){return Object(V.jsx)(Ya,{competition:e},e.wcaId)}))})};var Za,Xa=function(){return Object(V.jsxs)($a.a,{TransitionProps:{mountOnEnter:!0},children:[Object(V.jsx)(Ua.a,{expandIcon:Object(V.jsx)(qa.a,{}),children:Object(V.jsx)(Fe.a,{variant:"subtitle2",color:"textSecondary",children:"Importable competitions"})}),Object(V.jsx)(Ba.a,{sx:{p:0},children:Object(V.jsx)(Ja,{})})]})},Ka=Object(te.a)(Za||(Za=Object(ee.a)(["\n  query Competitions {\n    currentUser {\n      id\n      staffMembers {\n        id\n        roles\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n      competitors {\n        id\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function eo(e){return Object(Gt.h)(e,[function(e){return e.competition.startDate},function(e){return e.competition.endDate}],["desc","desc"])}var to,no=function(){var e=Object(ne.b)(Ka),t=e.data,n=e.loading,r=e.error;if(n&&!t)return Object(V.jsx)(oe,{});if(r)return Object(V.jsx)(se.a,{error:r});var i=t.currentUser,c=i.staffMembers,a=i.competitors,o=eo(a),s=eo(c);return Object(V.jsx)(ot.a,{p:3,children:Object(V.jsxs)(re.a,{container:!0,direction:"column",spacing:3,children:[a.length>0&&Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Ne.a,{children:Object(V.jsx)(Fa,{title:"Competitor at",competitors:o})})}),c.length>0&&Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Ne.a,{children:Object(V.jsx)(za,{title:"Staff member at",staffMembers:s})})}),Object(V.jsx)(re.a,{item:!0,children:Object(V.jsx)(Xa,{})})]})})},ro=Object(te.a)(to||(to=Object(ee.a)(["\n  query CurrentUser {\n    currentUser {\n      id\n      name\n      avatar {\n        thumbUrl\n      }\n    }\n  }\n"])));var io=function(){var e=Object(ne.b)(ro),t=e.data,n=e.error,r=e.loading;if(n)return Object(V.jsx)(se.a,{error:n});var i=!r||!!t,c=t?t.currentUser:null;return Object(V.jsxs)(Oa,{currentUser:c,loaded:i,children:[r&&Object(V.jsx)(oe,{}),Object(V.jsxs)(K.d,{children:[Object(V.jsx)(K.b,{path:"",element:Object(V.jsx)(ra,{})}),Object(V.jsx)(K.b,{path:"sign-in",element:Object(V.jsx)(Ia,{})}),Object(V.jsx)(K.b,{path:"about",element:Object(V.jsx)(Sa,{})}),c&&Object(V.jsx)(K.b,{path:"my-competitions",element:Object(V.jsx)(no,{})}),c&&Object(V.jsx)(K.b,{path:"account",element:Object(V.jsx)(Da,{})}),i&&Object(V.jsx)(K.b,{path:"*",element:Object(V.jsx)(K.a,{to:"/"})})]})]})};var co=function(){return Object(V.jsxs)(K.d,{children:[Object(V.jsx)(K.b,{path:"/competitions/:competitionId/*",element:Object(V.jsx)(Pc,{})}),Object(V.jsx)(K.b,{path:"/admin/competitions/:competitionId/*",element:Object(V.jsx)(_r,{})}),Object(V.jsx)(K.b,{path:"/*",element:Object(V.jsx)(io,{})})]})};var ao=function(){return Object(V.jsx)(a.a,{children:Object(V.jsx)(l.a,{client:F,children:Object(V.jsx)(X.a,{injectFirst:!0,children:Object(V.jsx)(Z,{children:Object(V.jsx)(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(V.jsxs)(s.a,{children:[Object(V.jsx)(o.a,{}),Object(V.jsx)(co,{})]})})})})})})},oo=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function so(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}!function(){var e=window.location.hash;e.startsWith("#token=")&&(S(e.replace("#token=","")),window.history.replaceState({},document.title,window.location.pathname+window.location.search))}(),Object(c.createRoot)(document.getElementById("root")).render(Object(V.jsx)(i.a.StrictMode,{children:Object(V.jsx)(ao,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");oo?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):so(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):so(t,e)}))}}()}},[[927,1,2]]]);
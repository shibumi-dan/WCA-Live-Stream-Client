(this["webpackJsonpwca-live-client"]=this["webpackJsonpwca-live-client"]||[]).push([[0],{20:function(e,t,n){"use strict";function i(e,t){return e.reduce(((e,n)=>e.concat(t(n))),[])}function c(e,t,n){return e.map(((e,i)=>i===t?n:e))}function r(e,t){return Array.from({length:e},((e,n)=>t(n)))}function o(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}function a(e,t){return e.map(t).reduce(((t,n,i)=>(t[n]=(t[n]||[]).concat(e[i]),t)),{})}function s(e){return[...new Set(e)]}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"function"===typeof t&&(t=[t]),"string"===typeof n&&(n=[n]),e.slice(0).sort(((e,i)=>t.reduce(((t,c,r)=>{if(0===t){const o=c(e),a=c(i),s=o>a?1:o<a?-1:0;t="desc"===n[r]?-s:s}return t}),0)))}function d(e,t){return e.reduce(((e,n,i,c)=>(e[t(n,i,c)?0:1].push(n),e)),[[],[]])}function j(e){return e.reduce(((e,t)=>e<t?e:t))}function u(e){return e.reduce(((e,t)=>e>t?e:t))}function b(e,t){return e.reduce(((e,n)=>t(e)<t(n)?e:n))}function m(e,t,n){return Math.min(Math.max(e,t),n)}function h(e){return(t=e,t.charAt(0).toUpperCase()+t.slice(1)).replace(/\.?$/,".");var t}n.d(t,"b",(function(){return i})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"m",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return h}))},22:function(e,t,n){"use strict";var i=n(478),c=n(798),r=n(223),o=(n(1),n.p+"static/media/error.891f05e0.svg"),a=n(261),s=n(0);t.a=function(e){let{error:t=null}=e;const n=Object(a.a)(t);return Object(s.jsx)(i.a,{sx:{width:"100%",py:4},children:Object(s.jsxs)(c.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(s.jsx)(c.a,{item:!0,children:Object(s.jsx)(r.a,{variant:"h5",children:"Oh dear!"})}),Object(s.jsx)(c.a,{item:!0,children:Object(s.jsx)(i.a,{component:"img",src:o,height:300,alt:"error",sx:{maxWidth:"100%"}})}),Object(s.jsx)(c.a,{item:!0,children:Object(s.jsx)(r.a,{variant:"subtitle1",children:n})})]})})}},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(20);function c(e){return e&&e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.message)).map(i.c).join(" "):"Something went wrong."}},335:function(e,t,n){"use strict";var i=n(775),c=n(819),r=n(815),o=n(1),a=n(13),s=n(446),l=n.n(s),d=n(268),j=n.n(d),u=n(447),b=n.n(u),m=n(808),h=n(814),p=n(802),O=n(799),x=n(765),f=n(767),g=n(470),v=n(86),y=n(0);var w=function(e){let{competitionEvents:t,competitionId:n}=e;const[i,c]=Object(o.useState)(null);return Object(y.jsx)(h.a,{dense:!0,children:t.map((e=>Object(y.jsxs)(o.Fragment,{children:[Object(y.jsxs)(O.a,{button:!0,onClick:t=>function(e,t){c(i===t.id?null:t.id),e.stopPropagation()}(t,e),disabled:!e.rounds.some((e=>e.open)),children:[Object(y.jsx)(f.a,{children:Object(y.jsx)(v.a,{eventId:e.event.id})}),Object(y.jsx)(x.a,{primary:e.event.name})]}),Object(y.jsx)(m.a,{in:i===e.id,timeout:"auto",unmountOnExit:!0,onEntered:e=>{Object(g.a)(e,{behavior:"smooth",scrollMode:"if-needed",block:"end"})},children:Object(y.jsx)(h.a,{dense:!0,children:e.rounds.map((e=>Object(y.jsxs)(O.a,{button:!0,component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(e.id),disabled:!e.open,children:[Object(y.jsx)(x.a,{primary:e.name}),e.label&&Object(y.jsx)(p.a,{label:e.label,size:"small",sx:{borderRadius:"6px",fontSize:"0.7em",fontWeight:500}})]},e.id)))})})]},e.id)))})};t.a=function(e){let{competition:t}=e;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(c.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:1},children:[Object(y.jsx)(r.a,{component:a.b,to:"/","aria-label":"Homepage",size:"large",children:Object(y.jsx)(l.a,{})}),Object(y.jsx)(r.a,{component:a.b,to:"/competitions/".concat(t.id,"/competitors"),"aria-label":"Competitor",size:"large",children:Object(y.jsx)(j.a,{})}),Object(y.jsx)(r.a,{component:a.b,to:"/competitions/".concat(t.id,"/podiums"),"aria-label":"Podiums",size:"large",children:Object(y.jsx)(b.a,{})})]}),Object(y.jsx)(i.a,{}),Object(y.jsx)(w,{competitionEvents:t.competitionEvents,competitionId:t.id})]})}},445:function(e,t,n){"use strict";(function(e){var i=n(478),c=n(706),r=n(82),o=n(710),a=n(701),s=n(1),l=n(335),d=n(468),j=n(0);const u=250,b={appBarShift:{width:{lg:"calc(100% - ".concat(u,"px)")},ml:{lg:"".concat(u,"px")}}};t.a=function(t){let{competition:n,children:m}=t;const h=Object(a.a)((e=>e.breakpoints.up("lg"))),[p,O]=Object(s.useState)(!1),x=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.a,{position:"sticky",sx:b.appBarShift,children:n&&Object(j.jsx)(d.a,{competition:n,onMenuClick:()=>O(!0)})}),h?Object(j.jsx)(r.a,{variant:"permanent",sx:{"& .MuiDrawer-paper":{width:{lg:u}}},children:n&&Object(j.jsx)(l.a,{competition:n})}):Object(j.jsx)(c.a,{open:p,onOpen:()=>O(!0),onClose:()=>O(!1),onClick:()=>O(!1),sx:{"& .MuiDrawer-paper":{width:{lg:u}}},disableBackdropTransition:!x,disableDiscovery:x,children:n&&Object(j.jsx)(l.a,{competition:n})}),Object(j.jsx)(i.a,{sx:{position:"relative",overflowY:"auto",py:{xs:2,md:3},px:{xs:1,md:3},...b.appBarShift},children:m})]})}}).call(this,n(199))},468:function(e,t,n){"use strict";var i,c=n(819),r=n(818),o=n(478),a=n(223),s=n(815),l=(n(1),n(25)),d=n(13),j=n(449),u=n.n(j),b=n(448),m=n.n(b),h=n(14),p=n(782),O=n(141),x=n.n(O),f=(n(22),n(0));Object(p.a)(i||(i=Object(h.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));var g=function(e){let{competition:t}=e;return Object(f.jsx)(r.a,{title:"Update Stream",children:Object(f.jsx)(s.a,{color:"inherit",onClick:()=>{!async function(e){const t=JSON.stringify({model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"}]},payload:{competitionId:e.id,competitionName:e.shortName,eventName:e.competitionEvents[0].event.name,eventId:e.competitionEvents[0].event.id}});var n=new Headers;n.append("Content-Type","application/json"),fetch("https://app.singular.live/apiv1/datanodes/2Gtu4VucUktNoXOdJgAKd2/data",{method:"PUT",headers:n,body:t,redirect:"follow"}).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e)))}(t),console.log(t)},size:"large",children:Object(f.jsx)(x.a,{})})})};t.a=function(e){let{competition:t,onMenuClick:n}=e;const i=Object(l.f)();return Object(f.jsxs)(c.a,{children:[Object(f.jsx)(s.a,{color:"inherit",sx:{ml:"-12px",mr:"20px",display:{lg:"none"}},onClick:n,"aria-label":"Menu",size:"large",children:Object(f.jsx)(m.a,{})}),Object(f.jsx)(a.a,{variant:"h6",color:"inherit",sx:{flexGrow:1,color:"inherit",textDecoration:"none"},noWrap:!0,component:d.b,to:"/competitions/".concat(t.id),children:t.shortName}),Object(f.jsx)(o.a,{sx:{flexGrow:1}}),Object(f.jsx)(g,{competition:t}),t.access.canScoretake&&Object(f.jsx)(r.a,{title:"Admin view",children:Object(f.jsx)(s.a,{color:"inherit",component:d.b,to:"/admin".concat(i.pathname),size:"large",children:Object(f.jsx)(u.a,{})})})]})}},686:function(e,t,n){"use strict";n.r(t);n(500);var i=n(1),c=n.n(i),r=n(413),o=n(13),a=n(778),s=n(85),l=n(776),d=n(174),j=n(783),u=n(218),b=n(760),m=n(784),h=n(781),p=n(797),O=n(423),x=n(150),f=n(324),g=n(178),v=n(463);const y={};function w(e){return"wca-live:".concat(e)}const C="token";function I(){return function(e){if(e in y)return y[e];const t=localStorage.getItem(w(e));return y[e]=t,t}(C)}function k(e){var t,n;n=e,y[t=C]=n,localStorage.setItem(w(t),n)}function S(){var e;delete y[e=C],localStorage.removeItem(w(e))}const E=new j.a({uri:"https://live.worldcubeassociation.org/api",credentials:"same-origin"}),A=new p.a({delay:{initial:2e3},attempts:{max:2}}),T=Object(O.a)(((e,t)=>{let{headers:n}=t;const i=I();return i?{headers:{...n,authorization:"Bearer ".concat(i)}}:{headers:n}})),P=u.a.from([T,A,E]),R=new f.a("wss://".concat(window.location.host,"/socket")),D=g.a(R),N=Object(v.a)(D),M=Object(b.a)((e=>{let{query:t}=e;const n=Object(x.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),N,P),W=new m.a({typePolicies:{Country:{keyFields:["iso2"]},CompetitionBrief:{keyFields:["wcaId"]},Competition:{fields:{access:{merge:(e,t)=>({...e,...t})}}}}}),z=new h.a({cache:W,link:M,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}});var F=n(701),$=n(462),B=n(794),L=n(147),U=n(414),q=n(763),H=n(0);const V={light:Object($.a)({palette:{primary:{main:L.a[700]},secondary:{main:U.a[900]}}}),dark:Object($.a)({palette:{mode:"dark",primary:{main:L.a[200]},secondary:{main:q.a.A400}}})},G={light:L.a[700],dark:U.a[900]},_=Object(i.createContext)();function Q(){return localStorage.getItem("themeType")}function Y(e){let{children:t}=e;const n=Object(F.a)("(prefers-color-scheme: dark)")?"dark":"light",c=Object(i.useMemo)(Q,[]),[r,o]=Object(i.useState)(c||n),a=Object(i.useCallback)((()=>{o((e=>"light"===e?"dark":"light"))}),[]);return Object(i.useEffect)((()=>{!function(e){localStorage.setItem("themeType",e)}(r);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",G[r])}),[r]),Object(H.jsx)(B.a,{theme:V[r],children:Object(H.jsx)(_.Provider,{value:a,children:t})})}var J=n(777),Z=n(25),X=n(14),K=n(782),ee=n(467),te=n(798),ne=n(755),ie=n(811);var ce,re=function(){return Object(H.jsx)(ne.a,{in:!0,style:{transitionDelay:"800ms"},children:Object(H.jsx)(ie.a,{sx:{position:"absolute",left:0,right:0,top:0}})})},oe=n(22),ae=n(812),se=n(822),le=n(814),de=n(813),je=n(799),ue=n(833),be=n(765),me=n(475),he=n(764),pe=n(261);function Oe(){const{enqueueSnackbar:e}=Object(d.b)();return Object(i.useCallback)((t=>{const n=Object(pe.a)(t);e(n,{variant:"error"})}),[e])}const xe=Object(K.a)(ce||(ce=Object(X.a)(["\n  mutation OpenRound($input: OpenRoundInput!) {\n    openRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var fe,ge=function(e){let{round:t,competitionEvent:n}=e;const i=Object(s.b)(),c=Oe(),[r,{loading:o}]=Object(he.a)(xe,{variables:{input:{id:t.id}},onError:c});return Object(H.jsx)(me.a,{size:"small",onClick:function(){const e=n.rounds.find((e=>e.number===t.number-1));e&&!e.finished?i({description:"\n          There are some missing results in the previous round.\n          Opening this round will permanently remove them.\n        "}).then(r):r()},disabled:o,children:"Open"})};const ve=Object(K.a)(fe||(fe=Object(X.a)(["\n  mutation ClearRound($input: ClearRoundInput!) {\n    clearRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var ye=function(e){let{round:t,competitionEvent:n}=e;const i=Object(s.b)(),c=Oe(),[r,{loading:o}]=Object(he.a)(ve,{variables:{input:{id:t.id}},onError:c});return Object(H.jsx)(me.a,{size:"small",onClick:function(){i({description:"\n        This will irreversibly remove all results\n        from ".concat(n.event.name," - ").concat(t.name,".\n      ")}).then(r)},disabled:o,children:"Clear"})};function we(e,t){const n=t.rounds.find((t=>t.number===e.number-1));return!e.open&&(!n||n.open)}function Ce(e,t){const n=t.rounds.find((t=>t.number===e.number+1));return e.open&&(!n||!n.open)}var Ie=function(e){let{round:t,competitionEvent:n,competitionId:i}=e;return Object(H.jsxs)(je.a,{button:!0,component:o.b,to:"/admin/competitions/".concat(i,"/rounds/").concat(t.id),disabled:!t.open,children:[Object(H.jsx)(be.a,{primary:t.name}),Object(H.jsxs)(ue.a,{children:[we(t,n)&&Object(H.jsx)(ge,{round:t,competitionEvent:n}),Ce(t,n)&&Object(H.jsx)(ye,{round:t,competitionEvent:n})]})]},t.id)},ke=n(86);var Se,Ee=function(e){let{competitionEvent:t,competitionId:n}=e;return Object(H.jsxs)(ae.a,{style:{height:"100%"},children:[Object(H.jsx)(de.a,{avatar:Object(H.jsx)(ke.a,{eventId:t.event.id}),title:t.event.name}),Object(H.jsx)(se.a,{style:{padding:0},children:Object(H.jsx)(le.a,{dense:!0,children:t.rounds.map((e=>Object(H.jsx)(Ie,{round:e,competitionEvent:t,competitionId:n},e.id)))})})]})};const Ae=Object(K.a)(Se||(Se=Object(X.a)(["\n  query CompetitionEvents($id: ID!) {\n    competition(id: $id) {\n      id\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          name\n          open\n          finished\n        }\n      }\n    }\n  }\n"])));var Te,Pe=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(Ae,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:{competitionEvents:c}}=t;return Object(H.jsx)(te.a,{container:!0,spacing:2,direction:"row",children:c.map((t=>Object(H.jsx)(te.a,{item:!0,xs:12,md:4,children:Object(H.jsx)(Ee,{competitionEvent:t,competitionId:e})},t.id)))})},Re=n(807),De=n(767),Ne=n(816),Me=n(787),We=n(223),ze=n(426),Fe=n.n(ze),$e=n(263),Be=n.n($e),Le=n(427),Ue=n.n(Le),qe=n(428),He=n.n(qe),Ve=n(466),Ge=n(766);const _e=Object(K.a)(Te||(Te=Object(X.a)(["\n  mutation Synchronize($input: SynchronizeInput!) {\n    synchronizeCompetition(input: $input) {\n      competition {\n        id\n        synchronizedAt\n      }\n    }\n  }\n"])));var Qe=function(e){let{competitionId:t}=e;const n=Oe(),[i,{loading:c}]=Object(he.a)(_e,{variables:{input:{id:t}},onError:n});return Object(H.jsx)(me.a,{variant:"contained",disableElevation:!0,color:"primary",size:"large",onClick:i,disabled:c,children:"Synchronize"})};const Ye="https://www.worldcubeassociation.org",Je="https://groupifier.jonatanklosko.com",Ze="https://scrambles-matcher.worldcubeassociation.org";function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat("").concat(e)}function Ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(Ye).concat(e)}function et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="";return"".concat(Je).concat(e).concat(t)}function tt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="";return"".concat(Ze).concat(e).concat(t)}var nt;const it=Object(K.a)(nt||(nt=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      synchronizedAt\n    }\n  }\n"])));var ct=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(it,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t;return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Qe,{competitionId:c.id})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(We.a,{variant:"caption",component:"div",align:"center",children:["Last synchronized"," ",Object(H.jsx)(Ve.a,{date:Object(Ge.a)(c.synchronizedAt)}),"."]})})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Synchronization"}),Object(H.jsx)(We.a,{children:"\n          WCA Live is specifically designed to deal with competition results\n          and it relies on the WCA website to provide a lot of competition information\n          (like events, schedule and registered competitors). It is also meant to cooperate\n          with other tools that are dedicated to do specific tasks. Synchronization\n          is the process of getting the latest data from the WCA website, combining it\n          with the local changes (mostly results) and saving that data back to the WCA website,\n          so that other tools can use it.\n          "})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Me.a,{severity:"info",children:"Always make sure to Synchronize before using any other tool if you want it to see\n          the newly entered results. If the tool modifies relevant competition data,\n          synchronize afterwards to see the changes reflected here."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Re.a,{children:Object(H.jsxs)(le.a,{dense:!0,children:[Object(H.jsx)(Ne.a,{sx:{backgroundColor:"inherit"},children:"WCA website"}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:Ke("/competitions/".concat(c.wcaId,"/events/edit")),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(Fe.a,{})}),Object(H.jsx)(be.a,{primary:"Change round details",secondary:"Manage events and rounds on the WCA website."})]}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:Ke("/competitions/".concat(c.wcaId,"/registrations/add")),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(Be.a,{})}),Object(H.jsx)(be.a,{primary:"Add competitor",secondary:"Use a form on the WCA website to register someone during the competition (if applicable)."})]}),Object(H.jsx)(Ne.a,{sx:{backgroundColor:"inherit"},children:"Additional tools"}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:et("/competitions/".concat(c.wcaId)),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(Ue.a,{})}),Object(H.jsx)(be.a,{primary:"Groupifier",secondary:"Manage competitor groups and print scorecards."})]}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:tt(),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(He.a,{})}),Object(H.jsx)(be.a,{primary:"Scrambles Matcher",secondary:"Use it after the competition to attach scrambles to rounds and proceed with results submission."})]})]})})})]})},rt=n(478),ot=n(786),at=n(817),st=n(823),lt=n(824),dt=n(828),jt=n(792),ut=n(825),bt=n(826),mt=n(827);const ht=[{role:"organizer",name:"Organizer",editable:!1},{role:"delegate",name:"Delegate",editable:!1},{role:"trainee-delegate",name:"Trainee delegate",editable:!1},{role:"staff-dataentry",name:"Scoretaker",editable:!0}];var pt,Ot=function(e){let{staffMembers:t,onChange:n}=e;return Object(H.jsx)(st.a,{component:Re.a,children:Object(H.jsxs)(lt.a,{children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{children:"Name"}),ht.map((e=>{let{role:t,name:n}=e;return Object(H.jsx)(mt.a,{children:n},t)}))]})}),Object(H.jsx)(dt.a,{children:t.map((e=>Object(H.jsxs)(bt.a,{sx:{"&:last-child td":{border:0}},children:[Object(H.jsx)(mt.a,{children:e.user.name}),ht.map((i=>{let{role:c,editable:r}=i;return Object(H.jsx)(mt.a,{padding:"checkbox",align:"center",children:Object(H.jsx)(jt.a,{disabled:!r,checked:e.roles.includes(c),onChange:()=>function(e,i){n(t.map((t=>{return t===e?{...t,roles:(n=t.roles,c=i,n.includes(c)?n.filter((e=>e!==c)):[...n,c])}:t;var n,c})))}(e,c)})},c)}))]},e.user.id)))})]})})},xt=n(804),ft=n(795);function gt(e,t){const[n,c]=Object(i.useState)(e);return Object(i.useEffect)((()=>{const n=setTimeout((()=>{c(e)}),t);return()=>clearTimeout(n)}),[e,t]),n}const vt=Object(K.a)(pt||(pt=Object(X.a)(["\n  query Users($filter: String!) {\n    users(filter: $filter) {\n      id\n      name\n    }\n  }\n"])));var yt,wt=function(e){let{onChange:t,TextFieldProps:n={}}=e;const[c,r]=Object(i.useState)(""),o=gt(c,250),{data:a,loading:s}=Object(ee.b)(vt,{variables:{filter:o}}),l=a?a.users:[];return Object(H.jsx)(xt.a,{clearOnBlur:!0,blurOnSelect:!0,options:l,getOptionLabel:e=>e.name,loading:s,onInputChange:function(e,t,n){"input"===n&&r(t)},value:null,onChange:function(e,n,i){"selectOption"===i&&t(n)},renderInput:e=>Object(H.jsx)(ft.a,{...e,...n})})};const Ct=Object(K.a)(yt||(yt=Object(X.a)(["\n  mutation UpdateCompetitionAccess($input: UpdateCompetitionAccessInput!) {\n    updateCompetitionAccess(input: $input) {\n      competition {\n        id\n        staffMembers {\n          id\n          user {\n            id\n          }\n          roles\n        }\n      }\n    }\n  }\n"])));function It(e){const{id:t,user:n,roles:i}=e;return{id:t,userId:n.id,roles:i}}function kt(e){return e.filter((e=>e.roles.length>0)).map(It)}var St,Et=function(e){let{competition:t}=e;const n=Oe(),[c,r]=Object(i.useState)(t.staffMembers),[o,{loading:a}]=Object(he.a)(Ct,{variables:{input:{id:t.id,staffMembers:kt(c)}},onError:n});return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(We.a,{children:"Delegates and organizers have full access to the competition.\n            Additionally, you can grant scoretaking access to any WCA Live user."})}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(Ot,{staffMembers:c,onChange:r})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(wt,{onChange:function(e){if(null===e)return;if(c.some((t=>t.user.id===e.id)))return;const t={id:null,user:e,roles:[]};r([...c,t])},TextFieldProps:{label:"Add user",sx:{width:250},variant:"outlined",size:"small"}})}),Object(H.jsx)(te.a,{item:!0,sx:{mt:2},children:Object(H.jsx)(me.a,{variant:"contained",color:"primary",onClick:o,disabled:a,children:"Save"})})]})};const At=Object(K.a)(St||(St=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      staffMembers {\n        id\n        user {\n          id\n          name\n        }\n        roles\n      }\n    }\n  }\n"])));var Tt=function(){const{competitionId:e}=Object(Z.h)(),[t,n]=Object(i.useState)("access"),{data:c,loading:r,error:o}=Object(ee.b)(At,{variables:{id:e}});if(r&&!c)return Object(H.jsx)(re,{});if(o)return Object(H.jsx)(oe.a,{error:o});const{competition:a}=c;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ot.a,{indicatorColor:"secondary",textColor:"inherit",value:t,onChange:(e,t)=>n(t),children:Object(H.jsx)(at.a,{label:"Access",value:"access"})}),Object(H.jsx)(rt.a,{sx:{mt:2},children:"access"===t&&Object(H.jsx)(Et,{competition:a})})]})},Pt=n(815),Rt=n(430),Dt=n.n(Rt),Nt=n(431),Mt=n.n(Nt),Wt=n(818),zt=n(429),Ft=n.n(zt);const $t=["d","D","/"],Bt=["s","S","*"];var Lt=n(20);const Ut=-1,qt=-2;function Ht(e){return e>0}function Vt(e){return 0===e}function Gt(e,t){return Ht(e)||Ht(t)?!Ht(e)&&Ht(t)?1:Ht(e)&&!Ht(t)?-1:e-t:0}function _t(e){return 0===e.length?[]:0===e[e.length-1]?_t(e.slice(0,-1)):e}function Qt(e){const t=e.filter((e=>!Vt(e))),n=e.filter(Ht);return 0===t.length?0:0===n.length?Math.max(...t):Math.min(...n)}function Yt(e,t){if(!t)throw new Error("Missing argument: eventId");if("333mbf"===t)return 0;if(e.some(Vt))return 0;if("333fm"===t){const t=e.map((e=>100*e));switch(e.length){case 3:return Xt(t);case 5:return Zt(t);default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}switch(e.length){case 3:return Jt(Xt(e));case 5:return Jt(Zt(e));default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}function Jt(e){return Ht(e)?e<=6e4?e:100*Math.round(e/100):e}function Zt(e){const[,t,n,i]=e.slice().sort(Gt);return Xt([t,n,i])}function Xt(e){return e.every(Ht)?function(e,t,n){return Math.round((e+t+n)/3)}(...e):Ut}function Kt(e){if(e<=0)return{solved:0,attempted:0,centiseconds:e};const t=e%100,n=Math.floor(e/100)%1e5,i=99-Math.floor(e/1e7)%100+t;return{solved:i,attempted:i+t,centiseconds:99999===n?null:100*n}}function en(e){let{solved:t,attempted:n,centiseconds:i}=e;if(i<=0)return i;const c=n-t;return 1e7*(99-(t-c))+100*Math.round((i||9999900)/100)+c}function tn(e){if(!Number.isFinite(e))throw new Error("Invalid centiseconds, expected positive number, got ".concat(e,"."));return new Date(10*e).toISOString().substr(11,11).replace(/^[0:]*(?!\.)/g,"")}function nn(e,t){return 0===e?"":e===Ut?"DNF":e===qt?"DNS":"333mbf"===t?function(e){const{solved:t,attempted:n,centiseconds:i}=Kt(e),c=tn(i).replace(/\.00$/,"");return"".concat(t,"/").concat(n," ").concat(c)}(e):"333fm"===t?function(e){return e>=1e3?(e/100).toFixed(2):e.toString()}(e):tn(e)}function cn(e,t){if(!t)return!0;const{numberOfAttempts:n,attemptResult:i}=t;return e.slice(0,n).some((e=>e>0&&e<i))}var rn=function(e){let{value:t,onChange:n,label:c,disabled:r,TextFieldProps:o={}}=e;const[a,s]=Object(i.useState)(t),[l,d]=Object(i.useState)(t);return a!==t&&(d(t),s(t)),Object(H.jsx)(ft.a,{...o,label:c,disabled:r,spellCheck:!1,value:(j=l,0===j?"":j===Ut?"DNF":j===qt?"DNS":j.toString()),onChange:function(e){const t=e.nativeEvent.data;if($t.includes(t))d(Ut);else if(Bt.includes(t))d(qt);else{const t=Object(Lt.l)(e.target.value.replace(/\D/g,""))||0;d(t)}},onBlur:function(){var e;n((e=l)>80?Ut:e),d(t)}});var j};function on(e){if(""===e)return 0;if("DNF"===e)return Ut;if("DNS"===e)return qt;const t=Object(Lt.l)(e.replace(/\D/g,""))||0;return 36e4*Math.floor(t/1e6)+6e3*Math.floor(t%1e6/1e4)+100*Math.floor(t%1e4/100)+t%100}function an(e){return 0===e?"":e===Ut?"DNF":e===qt?"DNS":tn(e)}var sn=function(e){let{value:t,onChange:n,label:c,disabled:r,TextFieldProps:o={}}=e;const[a,s]=Object(i.useState)(t),[l,d]=Object(i.useState)(an(t));return a!==t&&(d(an(t)),s(t)),Object(H.jsx)(ft.a,{...o,label:c,disabled:r,spellCheck:!1,value:l,onChange:function(e){const t=e.nativeEvent.data;$t.includes(t)?d("DNF"):Bt.includes(t)?d("DNS"):d(function(e){const t=Object(Lt.l)(e.replace(/\D/g,""))||0;if(0===t)return"";const n="00000000"+t.toString().slice(0,8),[,i,c,r,o]=n.match(/(\d\d)(\d\d)(\d\d)(\d\d)$/);return"".concat(i,":").concat(c,":").concat(r,".").concat(o).replace(/^[0:]*(?!\.)/g,"")}(e.target.value))},onBlur:function(){const e=(i=l)===an(on(i))?Jt(on(l)):0;var i;n(e),d(an(t))}})};var ln=function(e){let{value:t,onChange:n,label:c,disabled:r,TextFieldProps:o={}}=e;const[a,s]=Object(i.useState)(t),[l,d]=Object(i.useState)(t);return a!==t&&(d(t),s(t)),Object(H.jsx)(ft.a,{...o,label:c,disabled:r,spellCheck:!1,value:(j=l,0===j?"":j.toString()),onChange:function(e){const t=Object(Lt.l)(e.target.value.replace(/\D/g,""))||0;t<=99&&d(t)},onBlur:function(){n(l),d(t)}});var j};var dn=function(e){let{value:t,onChange:n,disabled:c,label:r,TextFieldProps:o={}}=e;const[a,s]=Object(i.useState)(t),[l,d]=Object(i.useState)(Kt(t));function j(e){const i=function(e){let{attempted:t,solved:n,centiseconds:i}=e;return!t||n>t?{solved:n,attempted:n,centiseconds:i}:n<t/2||n<=1||i>6e4*Math.min(6,t)+3e3?{solved:0,attempted:0,centiseconds:Ut}:{solved:n,attempted:t,centiseconds:i}}(e);en(i)!==t?(n(en(i)),d(Kt(t))):d(i)}return a!==t&&(d(Kt(t)),s(t)),Object(H.jsxs)(te.a,{container:!0,direction:"row",spacing:1,onInputCapture:function(e){const t=e.nativeEvent.data;$t.includes(t)?(j(Kt(Ut)),e.preventDefault()):Bt.includes(t)&&(j(Kt(qt)),e.preventDefault())},children:[Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(ln,{value:l.solved,onChange:e=>j({...l,solved:e}),disabled:c,TextFieldProps:o})}),Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(ln,{value:l.attempted,onChange:e=>j({...l,attempted:e}),disabled:c,TextFieldProps:o})}),Object(H.jsx)(te.a,{item:!0,xs:8,children:Object(H.jsx)(sn,{label:r,value:l.centiseconds,onChange:e=>j({...l,centiseconds:e}),disabled:c,TextFieldProps:o})})]})};var jn=function(e){let{eventId:t,...n}=e;return"333fm"===t?Object(H.jsx)(rn,{...n}):"333mbf"===t?Object(H.jsx)(dn,{...n}):Object(H.jsx)(sn,{...n})};function un(e){return Array.from(e.querySelectorAll("input, button")).filter((e=>!e.disabled))}function bn(e){return"".concat(e.name," (").concat(e.registrantId,")")}var mn=function(e){let{persons:t,value:n,onChange:i,TextFieldProps:c={}}=e;return Object(H.jsx)(xt.a,{options:t,getOptionLabel:bn,value:n,onChange:function(e,t,n){"selectOption"===n&&i(t)},forcePopupIcon:!1,disableClearable:!0,autoHighlight:!0,filterOptions:(e,t)=>{let{inputValue:n}=t;return function(e,t){const n=t.trim().toLowerCase();if(!n)return e;const i=e.find((e=>e.registrantId===Object(Lt.l)(n)));if(i)return[i];const c=e.filter((e=>e.name.toLowerCase().startsWith(n))),r=e.filter((e=>e.name.toLowerCase().includes(n)));return Object(Lt.m)([...c,...r]).slice(0,5)}(e,n)},renderInput:e=>Object(H.jsx)(ft.a,{...e,label:"Competitor",spellCheck:!1,placeholder:"Type ID or name",...c,inputProps:{...e.inputProps,...c.inputProps||{}}})})};var hn=function(e){let{results:t,value:n,onChange:c,TextFieldProps:r={}}=e;const o=Object(i.useMemo)((()=>t.map((e=>e.person)).sort(((e,t)=>e.name.localeCompare(t.name)))),[t]);return Object(H.jsx)(mn,{persons:o,value:n?o.find((e=>e.id===n.person.id)):null,onChange:e=>{c(e?t.find((t=>t.person.id===e.id)):null)},TextFieldProps:r})};function pn(e,t){return e?"333mbf"===t?"".concat(function(e){const{solved:t,attempted:n}=Kt(e);return t-(n-t)}(e.attemptResult)," points"):"333fm"===t?"".concat(e.attemptResult," moves"):tn(e.attemptResult):"None"}function On(e,t){if(["333mbf","333fm"].includes(t))return"Regulated";const{centiseconds:n,cumulativeRoundWcifIds:i}=e,c=tn(n);return 0===i.length?c:1===i.length?"".concat(c," in total"):"".concat(c," total for ").concat(i.join(", "))}function xn(e,t){const{numberOfAttempts:n,sortBy:i}=t;if(!fn(e,t))return[{name:"Best",field:"best",recordTagField:"singleRecordTag"}];const c=[{name:"Best",field:"best",recordTagField:"singleRecordTag"},{name:3===n?"Mean":"Average",field:"average",recordTagField:"averageRecordTag"}];return"best"===i?c:c.reverse()}function fn(e,t){return"333mbf"!==e&&[3,5].includes(t.numberOfAttempts)}function gn(e,t){return function(e,t){return Object(Lt.k)(t,(t=>t<e.length?e[t]:0))}(e.attempts.map((e=>e.result)),t)}var vn,yn,wn=function(e){let{result:t,results:n,onResultChange:c,eventId:r,format:o,timeLimit:a,cutoff:l,onSubmit:d,disabled:j=!1,focusOnResultChange:u=!1}=e;const b=Object(s.b)(),{numberOfAttempts:m}=o,h=Object(i.useMemo)((()=>Object(Lt.k)(m,(()=>0))),[m]),[p,O]=Object(i.useState)(h),x=Object(i.useRef)(null);var f;f=x,Object(i.useEffect)((()=>{const e=f.current;function t(t){if(!["ArrowUp","ArrowDown","Enter","Tab","Escape"].includes(t.key))return;if("Escape"===t.key)return void(t.target.blur&&t.target.blur());const n=Boolean(e.querySelector('.MuiAutocomplete-root[aria-expanded="true"]'));if(!["ArrowUp","ArrowDown","Enter"].includes(t.key)||!n){if(["ArrowUp","ArrowDown"].includes(t.key)&&(t.preventDefault(),t.stopPropagation()),"INPUT"===t.target.tagName&&"attempt-result"===t.target.dataset.type&&t.target.blur(),"Tab"===t.key&&"result-select"===t.target.dataset.type)return t.preventDefault(),t.stopPropagation(),void t.target.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter"}));"Tab"!==t.key&&setTimeout((()=>{const n=un(e),i=n.findIndex((e=>t.target===e));if(-1===i)return;const c=e=>(e+n.length)%n.length;if("ArrowUp"===t.key){const e=n[c(i-1)];e.focus(),e.select&&e.select()}else if("ArrowDown"===t.key||"INPUT"===t.target.tagName&&"Enter"===t.key){const e=n[c(i+1)];e.focus(),e.select&&e.select()}}),0)}}return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}),[f]),Object(i.useEffect)((()=>{const e=f.current;function t(t){if(["ArrowUp","ArrowDown","Enter"].includes(t.key)&&t.target===document.body){t.preventDefault();const[n]=un(e);n&&(n.focus(),n.select())}}return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[f]),Object(i.useEffect)((()=>{O(t?gn(t,m):h)}),[t,m,h]),Object(i.useEffect)((()=>{if(!u)return;const[e,n]=x.current.getElementsByTagName("input");t?setTimeout((()=>{n.focus(),n.select()}),0):e.focus()}),[t,u]);const g=cn(p,l)?m:l.numberOfAttempts;function v(e,t){const n=Object(Lt.j)(p,e,t);O(function(e,t){return cn(e,t)?e:e.map(((e,n)=>n<t.numberOfAttempts?e:0))}(function(e,t){if(null===t)return e;if(0===t.cumulativeRoundWcifIds.length)return e.map((e=>e>=t.centiseconds?Ut:e));{const[n]=e.reduce(((e,n)=>{let[i,c]=e;const r=n>0?c+n:c,o=n>0&&r>=t.centiseconds?Ut:n;return[i.concat(o),r]}),[[],0]);return n}}(n,a),l))}return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:1,ref:x,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(We.a,{variant:"body2",children:["Time limit: ",On(a,r)]})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(We.a,{variant:"body2",children:["Cutoff: ",pn(l,r)]})}),Object(H.jsx)(te.a,{item:!0,sx:{my:2},children:Object(H.jsx)(hn,{results:n,value:t,onChange:c,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined",inputProps:{"data-type":"result-select"}}})}),p.map(((e,n)=>Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(jn,{eventId:r,label:"Attempt ".concat(n+1),disabled:!t||j||n>=g,value:e,onChange:e=>v(n,e),TextFieldProps:{fullWidth:!0,variant:"outlined",inputProps:{"data-type":"attempt-result"}}})},n))),Object(H.jsxs)(te.a,{item:!0,container:!0,children:[Object(H.jsx)(te.a,{item:!0,xs:!0,children:Object(H.jsxs)(We.a,{variant:"body2",children:["Best: ",nn(Qt(p),r)]})}),fn(r,o)&&Object(H.jsx)(te.a,{item:!0,xs:!0,children:Object(H.jsxs)(We.a,{variant:"body2",children:["Average:"," ",nn(Yt(p,r),r)]})})]}),Object(H.jsxs)(te.a,{item:!0,container:!0,alignItems:"flex-end",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{type:"submit",variant:"outlined",color:"primary",disabled:!t||j,onClick:function(){(function(){const e=function(e,t){const n=_t(e).indexOf(0);if(-1!==n)return"You've omitted attempt ".concat(n+1,". Make sure it's intentional.");if("333mbf"===t){const t=e.findIndex((e=>{const{attempted:t,centiseconds:n}=Kt(e);return e>0&&n/t<3e3}));if(-1!==t)return"\n        The result you're trying to submit seems to be impossible:\n        attempt ".concat(t+1," is done in\n        less than 30 seconds per cube tried.\n        If you want to enter minutes, don't forget to add two zeros\n        for centiseconds at the end of the score.\n      ")}else{const n=e.filter(Ht);if(n.length>0){const e=Math.min(...n),i=Math.max(...n);if(i>4*e)return"\n          The result you're trying to submit seem to be inconsistent.\n          There's a big difference between the best single\n          (".concat(nn(e,t),") and the worst single\n          (").concat(nn(i,t),").\n          Please check that the results are accurate.\n        ")}}return null}(p,r);return e?b({description:e,confirmationText:"Submit"}):Promise.resolve()})().then((()=>{const e=_t(p).map((e=>({result:e})));d(e)}))},children:"Submit"})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Wt.a,{title:Object(H.jsxs)("div",{children:["Key bindings:",Object(H.jsx)("div",{children:"/ or d - DNF"}),Object(H.jsx)("div",{children:"* or s - DNS"}),Object(H.jsx)("div",{children:"Up, Down, Enter - navigation"})]}),children:Object(H.jsx)(Ft.a,{sx:{verticalAlign:"middle"},color:"action"})})})]})]})};const Cn=Object(K.a)(vn||(vn=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        attempts {\n          result\n        }\n        person {\n          id\n          name\n          registrantId\n        }\n        enteredAt\n      }\n    }\n  }\n"]))),In=Object(K.a)(yn||(yn=Object(X.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        attempts {\n          result\n        }\n      }\n    }\n  }\n"])));var kn=function(){const e=Oe(),{roundId:t}=Object(Z.h)(),[n,c]=Object(i.useState)(0),r=Object(i.useRef)(null),o=Object(i.useRef)(null);Object(i.useEffect)((()=>{function e(e){"INPUT"!==e.target.tagName.toUpperCase()&&("ArrowLeft"===e.key?r.current.click():"ArrowRight"===e.key&&o.current.click())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const{data:a,loading:s,error:l}=Object(ee.b)(Cn,{variables:{id:t}}),[d,{error:j}]=Object(he.a)(In,{onCompleted:()=>{o.current.focus()},onError:e});if(s&&!a)return Object(H.jsx)(re,{});if(l)return Object(H.jsx)(oe.a,{error:l});const{round:u}=a,b=Object(Lt.h)(u.results,(e=>-Object(Ge.a)(e.enteredAt))),m=Math.round((n+1)/b.length*100);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ie.a,{variant:"determinate",value:m,sx:{position:"absolute",top:0,left:0,right:0}}),Object(H.jsxs)(We.a,{variant:"subtitle1",align:"right",children:[n+1," of ",b.length]}),Object(H.jsxs)(te.a,{container:!0,direction:"row",alignItems:"center",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(H.jsx)(Pt.a,{ref:r,onClick:()=>c(n-1),disabled:0===n,size:"large",children:Object(H.jsx)(Dt.a,{})})}),Object(H.jsx)(te.a,{item:!0,md:3,children:Object(H.jsx)(wn,{result:b[n],results:u.results,onResultChange:function(e){null!==e&&c(b.indexOf(e))},eventId:u.competitionEvent.event.id,format:u.format,timeLimit:u.timeLimit,cutoff:u.cutoff,disabled:j,onSubmit:function(e){d({variables:{input:{id:b[n].id,attempts:e}}})}})}),Object(H.jsx)(te.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(H.jsx)(Pt.a,{ref:o,autoFocus:!0,onClick:()=>c(n+1),disabled:n===b.length-1,size:"large",children:Object(H.jsx)(Mt.a,{})})}),Object(H.jsxs)(te.a,{item:!0,md:5,children:[Object(H.jsxs)(We.a,{variant:"h5",align:"center",children:[u.competitionEvent.event.name," - ",u.name]}),Object(H.jsx)(We.a,{variant:"subtitle1",align:"center",gutterBottom:!0,children:"Double-check"}),Object(H.jsx)(We.a,{align:"justify",children:"Here you can iterate over results ordered by entry time (newest first).\n              When doing double-check you can place a scorecard\n              next to the form to quickly compare attempt results.\n              For optimal experience make sure to always put entered/updated\n              scorecard at the top of the pile."})]})]})]})},Sn=n(805),En=n(149),An=n(148),Tn=n(771);const Pn={wr:{color:e=>e.palette.getContrastText(An.a[500]),backgroundColor:An.a[500]},cr:{color:e=>e.palette.getContrastText(Tn.a[500]),backgroundColor:Tn.a[500]},nr:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},pb:{color:e=>e.palette.getContrastText(L.a[700]),backgroundColor:L.a[700]}};var Rn=function(e){let{recordTag:t,sx:n}=e;return Object(H.jsx)(rt.a,{component:"span",sx:{display:"block",lineHeight:1,py:.8,px:1,borderRadius:1,fontWeight:600,fontSize:"0.7em",...n,...Pn[t.toLowerCase()]||{}},children:t})};var Dn=function(e){let{recordTag:t,hidePb:n=!1,children:i}=e;return!t||n&&"PB"===t?i:Object(H.jsxs)(rt.a,{component:"span",sx:{position:"relative"},children:[i,Object(H.jsx)(Rn,{recordTag:t,sx:{position:"absolute",top:0,right:0,transform:"translate(110%, -40%)",fontSize:"0.6em",py:"0.3em",px:"0.4em"}})]})};const Nn={ranking:{pr:2,width:50},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400}};function Mn(e,t,n){return null===t?e:e.slice().sort(((e,i)=>{if("registrantId"===t){const t=e.person.registrantId-i.person.registrantId;return"asc"===n?t:-t}if("name"===t){const t=e.person.name.localeCompare(i.person.name);return"asc"===n?t:-t}throw new Error("Unrecognized order rule: ".concat(t))}))}var Wn=c.a.memo((e=>{let{results:t,eventId:n,format:c,onResultClick:r}=e;const[o,a]=Object(i.useState)("asc"),[s,l]=Object(i.useState)(null);function d(e){s!==e?(l(e),a("asc")):"asc"===o?a("desc"):(l(null),a("asc"))}const j=xn(n,c);return Object(H.jsxs)(lt.a,{size:"small",children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{align:"right",sx:Nn.ranking,children:"#"}),Object(H.jsx)(mt.a,{align:"right",children:Object(H.jsx)(Sn.a,{active:"registrantId"===s,direction:o,onClick:()=>d("registrantId"),children:"ID"})}),Object(H.jsx)(mt.a,{children:Object(H.jsx)(Sn.a,{active:"name"===s,direction:o,onClick:()=>d("name"),children:"Name"})}),Object(Lt.k)(c.numberOfAttempts,(e=>Object(H.jsx)(mt.a,{align:"right",children:e+1},e))),j.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:Mn(t,s,o).map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap",cursor:"pointer","&:last-child td":{border:0}},onClick:t=>r(e,t),children:[Object(H.jsx)(mt.a,{align:"right",sx:{...Nn.ranking,...e.advancing?Nn.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{align:"right",children:e.person.registrantId}),Object(H.jsx)(mt.a,{children:e.person.name}),gn(e,c.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",children:nn(e,n)},t))),j.map(((t,i)=>{let{name:c,field:r,recordTagField:o}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{fontWeight:0===i?600:400},children:Object(H.jsx)(Dn,{recordTag:e[o],hidePb:!0,children:nn(e[r],n)})},c)}))]},e.person.id)))})]})})),zn=n(464),Fn=n(829);var $n,Bn=function(e){let{result:t,position:n,onClose:i,onEditClick:c,onQuitClick:r,onClearClick:a,competitionId:s}=e;return Object(H.jsx)(Re.a,{children:Object(H.jsxs)(zn.a,{open:Boolean(t&&n),onClose:i,anchorReference:"anchorPosition",anchorPosition:n,transformOrigin:{vertical:0,horizontal:"center"},MenuListProps:{subheader:Object(H.jsx)(Ne.a,{sx:{backgroundColor:"inherit"},children:t&&t.person.name})},children:[Object(H.jsx)(Fn.a,{onClick:function(){c(t),i()},children:"Edit"}),Object(H.jsx)(Fn.a,{component:o.b,to:"/competitions/".concat(s,"/competitors/").concat(t&&t.person.id),children:"Results"}),t&&t.attempts.length>0?Object(H.jsx)(Fn.a,{onClick:function(){a(t),i()},children:"Clear"}):Object(H.jsx)(Fn.a,{onClick:function(){r(t),i()},children:"Quit"})]})})},Ln=n(433),Un=n.n(Ln),qn=n(266),Hn=n.n(qn),Vn=n(707),Gn=n(709),_n=n(476),Qn=n(708),Yn=n(696),Jn=n(772);const Zn=Object(K.a)($n||($n=Object(X.a)(["\n  fragment adminRoundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      id\n      registrantId\n      name\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"])));var Xn,Kn;const ei=Object(K.a)(Xn||(Xn=Object(X.a)(["\n  query AdvancementCandidates($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      advancementCandidates {\n        qualifying {\n          id\n          name\n          registrantId\n        }\n        revocable {\n          id\n          name\n          registrantId\n        }\n      }\n    }\n  }\n"]))),ti=Object(K.a)(Kn||(Kn=Object(X.a)(["\n  mutation AddPersonToRound($input: AddPersonToRoundInput!) {\n    addPersonToRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),Zn);var ni=function(e){let{open:t,onClose:n,roundId:c}=e;const r=Oe(),[o,a]=Object(i.useState)(null),[s,{data:l,loading:d,error:j}]=Object(Jn.a)(ei,{variables:{roundId:c}});Object(i.useEffect)((()=>{t&&(s(),a(null))}),[t,s]);const[u,{loading:b}]=Object(he.a)(ti,{variables:{input:{roundId:c,personId:o&&o.id}},onCompleted:m,onError:r});function m(){a(null),n()}return Object(H.jsxs)(Vn.a,{open:t,onClose:m,children:[d&&Object(H.jsx)(re,{}),Object(H.jsx)(Yn.a,{children:"Add competitor"}),Object(H.jsxs)(_n.a,{children:[j&&Object(H.jsx)(oe.a,{error:j}),l&&(l.round.advancementCandidates.qualifying.length>0?Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Qn.a,{children:"You can add any competitor who qualifies for this round. This is a way to quickly register someone for the first round without going to the WCA website or to bring back a competitor you have quit before."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(mn,{persons:l.round.advancementCandidates.qualifying,value:o,onChange:a,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined"}})}),l.round.advancementCandidates.revocable.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(We.a,{color:"error",children:["This will also remove the following competitors from this round: ",Object(H.jsx)("span",{style:{fontWeight:500},children:l.round.advancementCandidates.revocable.map((e=>e.name)).join(", ")})]})})]}):Object(H.jsx)(Qn.a,{children:"No one else qualifies to this round."}))]}),Object(H.jsxs)(Gn.a,{children:[Object(H.jsx)(me.a,{onClick:m,children:"Cancel"}),Object(H.jsx)(me.a,{onClick:u,color:"primary",disabled:!o||b,children:"Confirm"})]})]})};function ii(e){const t=e.results.filter((e=>e.attempts.length>0));return"".concat(t.length," of ").concat(e.results.length," entered")}var ci,ri,oi=function(e){let{round:t,competitionId:n}=e;const[c,r]=Object(i.useState)(!1);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsxs)(We.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]}),Object(H.jsx)(We.a,{variant:"body2",color:"textSecondary",children:ii(t)})]}),Object(H.jsx)(te.a,{item:!0,style:{flexGrow:1}}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Wt.a,{title:"PDF",placement:"top",children:Object(H.jsx)(Pt.a,{component:"a",target:"_blank",href:Xe("/pdf/rounds/".concat(t.id)),size:"large",children:Object(H.jsx)(Hn.a,{})})}),Object(H.jsx)(Wt.a,{title:"Add competitor",placement:"top",children:Object(H.jsx)(Pt.a,{onClick:()=>r(!0),size:"large",children:Object(H.jsx)(Be.a,{})})}),Object(H.jsx)(Wt.a,{title:"Double-check",placement:"top",children:Object(H.jsx)(Pt.a,{component:o.b,to:"/admin/competitions/".concat(n,"/rounds/").concat(t.id,"/doublecheck"),size:"large",children:Object(H.jsx)(Un.a,{})})})]})]}),Object(H.jsx)(ni,{open:c,onClose:()=>r(!1),roundId:t.id})]})},ai=n(806),si=n(835),li=n(788);const di=Object(K.a)(ci||(ci=Object(X.a)(["\n  query NextQualifying($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      nextQualifying {\n        id\n        name\n      }\n    }\n  }\n"]))),ji=Object(K.a)(ri||(ri=Object(X.a)(["\n  mutation RemovePersonFromRound($input: RemovePersonFromRoundInput!) {\n    removePersonFromRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),Zn);var ui,bi=e=>{let{open:t,onClose:n,competitor:c,roundId:r}=e;const o=Oe(),[a,s]=Object(i.useState)(""),[l,{data:d,loading:j,error:u}]=Object(Jn.a)(di,{variables:{roundId:r}});Object(i.useEffect)((()=>{t&&(l(),s(""))}),[t,l]);const[b,{loading:m}]=Object(he.a)(ji,{variables:{input:{roundId:r,personId:c&&c.id,replace:"yes"===a}},onCompleted:n,onError:o});return Object(H.jsxs)(Vn.a,{open:t,onClose:n,children:[j&&Object(H.jsx)(re,{}),Object(H.jsxs)(Yn.a,{children:["Quit ",c&&c&&c.name]}),Object(H.jsxs)(_n.a,{children:[u&&Object(H.jsx)(oe.a,{error:u}),d&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Qn.a,{children:["Going to permanently remove ",c&&c.name," from this round. Are you sure you want to proceed?"]}),Object(H.jsxs)(ai.a,{value:a,onChange:e=>s(e.target.value),children:[d.round.nextQualifying.length>0&&Object(H.jsx)(si.a,{control:Object(H.jsx)(li.a,{}),value:"yes",label:"\n                    Yes, remove ".concat(c&&c.name,"\n                    and replace they with other qualifying competitors:\n                    ").concat(d.round.nextQualifying.map((e=>{let{name:t}=e;return t})).join(", "),".\n                  ")}),Object(H.jsx)(si.a,{control:Object(H.jsx)(li.a,{}),value:"no",label:d.round.nextQualifying.length>0?"Yes, just remove ".concat(c&&c.name," and don't replace them."):"Yes, remove ".concat(c&&c.name,".")})]})]})]}),Object(H.jsxs)(Gn.a,{children:[Object(H.jsx)(me.a,{onClick:n,children:"Cancel"}),Object(H.jsx)(me.a,{onClick:b,color:"primary",disabled:""===a||m,children:"Confirm"})]})]})};const mi=Object(K.a)(ui||(ui=Object(X.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        round {\n          id\n          results {\n            id\n            ...adminRoundResult\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),Zn);var hi,pi=function(e){let{round:t,competitionId:n}=e;const c=Object(s.b)(),{enqueueSnackbar:r}=Object(d.b)(),o=Oe(),[a,l]=Object(i.useState)(null),[j,u]=Object(i.useState)({}),[b,m]=Object(i.useState)(null),[h,{loading:p}]=Object(he.a)(mi,{onCompleted:()=>{l(null)},onError:o}),O=Object(i.useCallback)(((e,t)=>{u({position:{left:t.clientX,top:t.clientY},result:e})}),[]),x=t.competitionEvent.rounds.find((e=>e.number===t.number+1)),f=x&&x.open;return Object(i.useEffect)((()=>{f&&r("The next round has already been open, any changes won't affect it!",{variant:"info"})}),[f,r]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"row",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,xs:12,md:3,children:Object(H.jsx)(wn,{result:a,results:t.results,onResultChange:l,eventId:t.competitionEvent.event.id,format:t.format,timeLimit:t.timeLimit,cutoff:t.cutoff,focusOnResultChange:!0,disabled:p,onSubmit:function(e){h({variables:{input:{id:a.id,attempts:e}}})}})}),Object(H.jsxs)(te.a,{item:!0,xs:12,md:9,container:!0,direction:"column",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(oi,{round:t,competitionId:n})}),Object(H.jsx)(te.a,{item:!0,sx:{maxWidth:"100%"},children:Object(H.jsx)(st.a,{component:Re.a,sx:{pr:.5},children:Object(H.jsx)(Wn,{results:t.results,format:t.format,eventId:t.competitionEvent.event.id,onResultClick:O})})})]})]}),Object(H.jsx)(Bn,{...j,onClose:()=>u({}),onEditClick:e=>l(e),onQuitClick:e=>m(e.person),onClearClick:function(e){c({description:"This will clear all attempts of ".concat(e.person.name,".")}).then((()=>{h({variables:{input:{id:e.id,attempts:[]}}})}))},competitionId:n}),Object(H.jsx)(bi,{open:Boolean(b),onClose:()=>m(null),competitor:b,roundId:t.id})]})};const Oi=Object(K.a)(hi||(hi=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      number\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          open\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        ...adminRoundResult\n      }\n    }\n  }\n  ","\n"])),Zn);var xi=function(){const{competitionId:e,roundId:t}=Object(Z.h)(),{data:n,loading:i,error:c}=Object(ee.b)(Oi,{variables:{id:t}});if(i&&!n)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(oe.a,{error:c});const{round:r}=n;return Object(H.jsx)(pi,{round:r,competitionId:e})},fi=n(791),gi=n(800),vi=n(819);var yi,wi=c.a.memo((e=>{let{competitors:t,competitionEvents:n,competitionId:c}=e;const[r,a]=Object(i.useState)(0),[s,l]=Object(i.useState)(10),[d,j]=Object(i.useState)("");const u=function(e,t){return t?e.filter((e=>{const n=[e.name,e.wcaId,e.country.name,e.registrantId.toString()];return t.toLowerCase().split(/\s+/).every((e=>n.some((t=>t&&t.toLowerCase().includes(e)))))})):e}(Object(i.useMemo)((()=>t.slice().sort(((e,t)=>e.name.localeCompare(t.name)))),[t]),d),b=u.slice(r*s,r*s+s);return Object(H.jsxs)(Re.a,{children:[Object(H.jsx)(vi.a,{children:Object(H.jsx)(ft.a,{variant:"standard",label:"Search",value:d,onChange:function(e){j(e.target.value),a(0)}})}),Object(H.jsx)(st.a,{children:Object(H.jsxs)(lt.a,{size:"small",children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{align:"right",children:"#"}),Object(H.jsx)(mt.a,{children:"Name"}),Object(H.jsx)(mt.a,{children:"Country"}),Object(H.jsx)(mt.a,{children:"WCA ID"}),Object(H.jsx)(mt.a,{align:"center",colSpan:n.length,children:"Results"})]})}),Object(H.jsx)(dt.a,{children:b.map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(H.jsx)(mt.a,{align:"right",children:e.registrantId}),Object(H.jsx)(mt.a,{children:Object(H.jsx)(gi.a,{component:o.b,to:"/competitions/".concat(c,"/competitors/").concat(e.id),underline:"hover",children:e.name})}),Object(H.jsx)(mt.a,{children:e.country.name}),Object(H.jsx)(mt.a,{children:e.wcaId&&Object(H.jsx)(gi.a,{href:Ke("/persons/".concat(e.wcaId)),target:"_blank",underline:"hover",children:e.wcaId})}),n.map((t=>{const n=t.rounds[0].results.find((t=>t.person.id===e.id));return Object(H.jsx)(mt.a,{align:"center",sx:{opacity:n&&0===n.attempts.length?.5:1},padding:"none",children:n&&Object(H.jsx)(Wt.a,{title:n.attempts.length>0?"Competed":"Awaiting result",placement:"top",children:Object(H.jsx)("span",{children:Object(H.jsx)(ke.a,{eventId:t.event.id,small:!0})})})},t.id)}))]},e.id)))})]})}),Object(H.jsx)(fi.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:t.length,rowsPerPage:s,page:r,onPageChange:function(e,t){a(t)},onRowsPerPageChange:function(e){l(parseInt(e.target.value,10)),a(0)}})]})}));const Ci=Object(K.a)(yi||(yi=Object(X.a)(["\n  query Competitors($id: ID!) {\n    competition(id: $id) {\n      id\n      competitors {\n        id\n        registrantId\n        name\n        wcaId\n        country {\n          iso2\n          name\n        }\n      }\n      competitionEvents {\n        id\n        event {\n          id\n        }\n        rounds {\n          id\n          results {\n            id\n            person {\n              id\n            }\n            attempts {\n              result\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var Ii=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(Ci,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Competitors"}),Object(H.jsx)(wi,{competitors:c.competitors,competitionEvents:c.competitionEvents,competitionId:c.id})]})},ki=n(710),Si=n(438),Ei=n.n(Si),Ai=n(437),Ti=n.n(Ai),Pi=n(435),Ri=n.n(Pi),Di=n(434),Ni=n.n(Di),Mi=n(436),Wi=n.n(Mi),zi=n(268),Fi=n.n(zi);var $i=function(e){let{competition:t}=e;const n=Object(Z.f)();return Object(H.jsxs)(vi.a,{sx:{justifyContent:{xs:"center",md:"flex-start"}},children:[Object(H.jsxs)(rt.a,{component:o.b,to:"/admin/competitions/".concat(t.id),sx:{color:"inherit",textDecoration:"none",display:{xs:"none",md:"unset"}},children:[Object(H.jsx)(We.a,{variant:"h6",color:"inherit",component:"span",children:t.shortName}),Object(H.jsx)(We.a,{variant:"overline",component:"span",sx:{ml:1},children:"Admin"})]}),Object(H.jsx)(rt.a,{sx:{flexGrow:1,display:{xs:"none",md:"unset"}}}),Object(H.jsx)(Wt.a,{title:"Events",children:Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:"/admin/competitions/".concat(t.id),size:"large",children:Object(H.jsx)(Ni.a,{})})}),t.access.canManage&&Object(H.jsx)(Wt.a,{title:"Synchronization",children:Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:"/admin/competitions/".concat(t.id,"/sync"),size:"large",children:Object(H.jsx)(Ri.a,{})})}),Object(H.jsx)(Wt.a,{title:"Competitors",children:Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:"/admin/competitions/".concat(t.id,"/competitors"),size:"large",children:Object(H.jsx)(Fi.a,{})})}),t.access.canManage&&Object(H.jsx)(Wt.a,{title:"Settings",children:Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:"/admin/competitions/".concat(t.id,"/settings"),size:"large",children:Object(H.jsx)(Wi.a,{})})}),Object(H.jsx)(Wt.a,{title:"Public view",children:Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:n.pathname.replace(/^\/admin/,""),size:"large",children:Object(H.jsx)(Ti.a,{})})}),Object(H.jsx)(Wt.a,{title:"My competitions",children:Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:"/my-competitions",size:"large",children:Object(H.jsx)(Ei.a,{})})})]})};var Bi,Li=function(e){let{competition:t,children:n}=e;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ki.a,{position:"sticky",children:Object(H.jsx)($i,{competition:t})}),Object(H.jsx)(rt.a,{sx:{position:"relative",p:3},children:n})]})};const Ui=Object(K.a)(Bi||(Bi=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      access {\n        canManage\n        canScoretake\n      }\n    }\n  }\n"])));var qi=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(Ui,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t;return c.access.canScoretake?Object(H.jsx)(Li,{competition:c,children:Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Pe,{})}),c.access.canManage&&Object(H.jsx)(Z.b,{path:"sync",element:Object(H.jsx)(ct,{})}),c.access.canManage&&Object(H.jsx)(Z.b,{path:"settings",element:Object(H.jsx)(Tt,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId/doublecheck",element:Object(H.jsx)(kn,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId",element:Object(H.jsx)(xi,{})}),Object(H.jsx)(Z.b,{path:"competitors",element:Object(H.jsx)(Ii,{})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/admin/competitions/".concat(c.id)})})]})}):Object(H.jsx)(Z.a,{to:"/sign-in"})},Hi=n(821),Vi=n(439),Gi=n.n(Vi);var _i=function(e){let{room:t}=e;return Object(H.jsx)(Wt.a,{title:t.name,placement:"top",children:Object(H.jsx)(rt.a,{sx:{display:"inline-block",width:10,height:10,borderRadius:"100%",backgroundColor:t.color}})})};function Qi(e){if(e.startsWith("other-"))return{type:"other",id:e.replace(/^other-/,"")};{const t=e.match(/^(\w+)(?:-r(\d+))?(?:-g(\d+))?(?:-a(\d+))?$/);if(!t)throw new Error("Invalid activity code: '".concat(e,"'."));const[,n,i,c,r]=t;return{type:"official",eventId:n,roundNumber:i?parseInt(i,10):null,groupName:c||null,attemptNumber:r?parseInt(r,10):null}}}var Yi=n(801);const Ji="geolocation"in navigator;function Zi(e){return e*Math.PI/180}function Xi(e){const t=Object(Ge.a)(e.endTime);return Object(Yi.a)(new Date,t)>60}function Ki(e){const t=Object(Ge.a)(e.startTime);return Object(Yi.a)(t,new Date)>60}function ec(e){return!Xi(e)&&!Ki(e)}function tc(e){const t=e.venues.map((e=>e.country));return Object(Lt.m)(t.map((e=>e.iso2))).map((e=>t.find((t=>t.iso2===e))))}function nc(e,t){const{eventId:n,roundNumber:i}=Qi(t),c=e.find((e=>{let{event:t}=e;return t.id===n}));if(!c)return null;const r=c.rounds.find((e=>e.number===i));return r?{event:c.event,round:r}:null}async function ic(e){const{latitude:t,longitude:n}=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:i}=t.coords;e({latitude:n,longitude:i})}),t,{maximumAge:3e5})}));return Object(Lt.g)(e,(e=>{const i=e.venues.map((e=>function(e,t,n,i){const c=Zi(i-t)*Math.cos(Zi(e+n)/2),r=Zi(n-e);return 6371*Math.sqrt(c*c+r*r)}(t,n,e.latitude,e.longitude)));return Math.min(...i)}))}var cc=n(780),rc=n(773),oc=n(820),ac=n(790),sc=n(774);function lc(e,t){const[n,i,c]=Object(cc.a)(Object(Ge.a)(e),"d MMM yyyy").split(" "),[r,o,a]=Object(cc.a)(Object(Ge.a)(t),"d MMM yyyy").split(" ");return e===t?"".concat(i," ").concat(n,", ").concat(c):i===o&&c===a?"".concat(i," ").concat(n," - ").concat(r,", ").concat(a):c===a?"".concat(i," ").concat(n," - ").concat(o," ").concat(r,", ").concat(c):"".concat(i," ").concat(n,", ").concat(c," - ").concat(o," ").concat(r,", ").concat(a)}function dc(e){return Object(cc.a)(Object(Ge.a)(e),"HH:mm")}function jc(e){return Object(cc.a)(Object(Ge.a)(e),"yyyy-MM-dd")}function uc(){const e=Object(ac.a)(Object(oc.a)(),{months:1});return Object(sc.a)(e,{representation:"date"})}var bc=function(e){let{activityCode:t,activities:n,competitionEvents:i,competitionId:c}=e;const{attemptNumber:r}=Qi(t),{event:a,round:s}=nc(i,t),l=r?"".concat(a.name," - ").concat(s.name," (Attempt ").concat(r,")"):"".concat(a.name," - ").concat(s.name),d=Object(Lt.f)(n.map((e=>e.startTime))),j=Object(Lt.e)(n.map((e=>e.endTime))),u=Object(Ge.a)(j)-Object(Ge.a)(d),b=new Date-Object(Ge.a)(d),m=Math.round(Object(Lt.a)(b,0,u)/u*100);return Object(H.jsxs)(ae.a,{sx:{height:"100%",position:"relative"},children:[Object(H.jsx)(Hi.a,{component:o.b,to:"/competitions/".concat(c,"/rounds/").concat(s.id),disabled:!s.open,children:Object(H.jsx)(de.a,{avatar:Object(H.jsx)(ke.a,{eventId:a.id}),title:l})}),Object(H.jsx)(se.a,{children:Object(H.jsx)(te.a,{container:!0,spacing:1,children:n.map((e=>{return Object(H.jsxs)(te.a,{item:!0,xs:6,children:[Object(H.jsx)(_i,{room:e.room}),Object(H.jsx)(We.a,{component:"span",variant:"body2",sx:{ml:1},children:(t=e.startTime,n=e.endTime,"".concat(dc(t)," - ").concat(dc(n)))})]},e.id);var t,n}))})}),0<m&&m<100&&Object(H.jsx)(ie.a,{variant:"determinate",value:m,sx:{position:"absolute",bottom:0,left:0,right:0}})]})};var mc,hc=function(e){let{venues:t,competitionEvents:n,competitionId:c}=e;const r=t.flatMap((e=>e.rooms)).flatMap((e=>e.activities.map((t=>({...t,room:e}))))).filter((e=>"official"===Qi(e.activityCode).type&&nc(n,e.activityCode))),o=Object(Lt.h)(r,(e=>e.startTime)),a=Object(Lt.m)(o.map((e=>jc(e.startTime)))),[s,l]=Object(i.useState)(function(e){const t=Object(rc.a)(Object(oc.a)(),e.map(Ge.a));return e[t]}(a)),d=o.filter((e=>jc(e.startTime)===s)),j=Object(Lt.d)(d,(e=>e.activityCode));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ot.a,{indicatorColor:"secondary",variant:"scrollable",textColor:"inherit",value:s,onChange:(e,t)=>l(t),sx:{mb:2},children:a.map((e=>{return Object(H.jsx)(at.a,{label:(t=e,Object(cc.a)(Object(Ge.a)(t),"EEEE, MMM d")),value:e},e);var t}))}),Object(H.jsx)(te.a,{container:!0,spacing:1,children:Object.entries(j).map((e=>{let[t,i]=e;return Object(H.jsx)(te.a,{item:!0,xs:12,sm:6,lg:4,children:Object(H.jsx)(bc,{activityCode:t,activities:i,competitionEvents:n,competitionId:c})},t)}))})]})};const pc=Object(K.a)(mc||(mc=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      name\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          active\n          open\n          number\n        }\n      }\n      venues {\n        id\n        name\n        country {\n          iso2\n          name\n        }\n        rooms {\n          id\n          name\n          color\n          activities {\n            id\n            activityCode\n            name\n            startTime\n            endTime\n          }\n        }\n      }\n    }\n  }\n"])));var Oc=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(pc,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t,r=tc(c),a=Object(Lt.b)(c.competitionEvents,(e=>e.rounds.filter((e=>e.active)).map((t=>[e,t]))));return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsxs)(We.a,{variant:"h5",gutterBottom:!0,noWrap:!0,children:["Welcome to ",c.name,"!"]}),Object(H.jsxs)(We.a,{children:["This competition takes place in\n            ".concat(1===r.length?r[0].name:"multiple countries",". Check out the "),Object(H.jsx)(gi.a,{href:Ke("/competitions/".concat(c.wcaId)),target:"_blank",underline:"hover",children:"WCA website"})," for more details on the competition."]})]}),a.length>0&&Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Active rounds"}),Object(H.jsx)(te.a,{container:!0,spacing:1,children:a.map((e=>{let[t,n]=e;return Object(H.jsx)(te.a,{item:!0,xs:12,sm:6,lg:4,children:Object(H.jsx)(ae.a,{children:Object(H.jsx)(Hi.a,{component:o.b,to:"/competitions/".concat(c.id,"/rounds/").concat(n.id),children:Object(H.jsx)(de.a,{avatar:Object(H.jsx)(ke.a,{eventId:t.event.id}),title:"".concat(t.event.name," - ").concat(n.name)})})})},n.id)}))})]}),Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsxs)(te.a,{container:!0,alignContent:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(We.a,{variant:"h5",children:"Schedule"})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Wt.a,{title:"\n              All the dates and times below are displayed in your local timezone: ".concat(Intl.DateTimeFormat().resolvedOptions().timeZone,"\n              "),children:Object(H.jsx)(Gi.a,{color:"action"})})})]}),Object(H.jsx)(hc,{venues:c.venues,competitionEvents:c.competitionEvents,competitionId:c.id})]})]})},xc=n(759),fc=n(443),gc=n.n(fc),vc=n(461);var yc=Object(vc.a)(c.a,{useCssModules:!1});const wc={cell:{fontSize:"1.5rem",pr:0,"&:last-child":{pr:4}},ranking:{width:75,pr:2},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},name:{width:"22%",overflow:"hidden",textOverflow:"ellipsis"},country:{width:50}},Cc={SHOWING:Symbol("showing"),SHOWN:Symbol("shown"),HIDING:Symbol("hiding")},Ic=1e4,kc=1e3,Sc=1e3;function Ec(){return Math.floor((window.innerHeight-64-50)/63)}var Ac=function(e){let{results:t,format:n,eventId:c,title:r,exitUrl:a}=e;const[s,l]=Object(i.useState)(Cc.SHOWING),[d,j]=Object(i.useState)(0),u=xn(c,n),b=t.filter((e=>e.attempts.length>0));return Object(i.useEffect)((()=>{if(s!==Cc.SHOWN){if(s===Cc.SHOWING){const e=setTimeout((()=>{l(Cc.SHOWN)}),kc);return()=>clearTimeout(e)}if(s===Cc.HIDING){const e=setTimeout((()=>{l(Cc.SHOWING),j((e=>{const t=e+Ec();return t>=b.length?0:t}))}),Sc);return()=>clearTimeout(e)}throw new Error("Unrecognized status: ".concat(s))}if(b.length>Ec()){const e=setTimeout((()=>{l(Cc.HIDING)}),Ic);return()=>clearTimeout(e)}}),[s,b.length]),Object(H.jsx)(Vn.a,{fullScreen:!0,open:!0,TransitionComponent:xc.a,TransitionProps:{direction:"up"},transitionDuration:500,children:Object(H.jsxs)(rt.a,{sx:{maxHeight:"100vh",overflow:"hidden"},children:[Object(H.jsx)(ki.a,{position:"sticky",children:Object(H.jsxs)(vi.a,{children:[Object(H.jsx)(We.a,{variant:"h4",color:"inherit",children:r}),Object(H.jsx)(rt.a,{sx:{flexGrow:1}}),Object(H.jsx)(Pt.a,{color:"inherit",component:o.b,to:a,size:"large",children:Object(H.jsx)(gc.a,{})})]})}),Object(H.jsxs)(lt.a,{sx:{tableLayout:"fixed"},children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{sx:{...wc.cell,...wc.ranking},align:"right",children:"#"}),Object(H.jsx)(mt.a,{sx:{...wc.cell,...wc.name},children:"Name"}),Object(H.jsx)(mt.a,{sx:{...wc.cell,...wc.country}}),Object(Lt.k)(n.numberOfAttempts,(e=>Object(H.jsx)(mt.a,{sx:wc.cell,align:"right",children:e+1},e))),u.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{sx:wc.cell,align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:b.slice(d,d+Ec()).map(((e,t)=>Object(H.jsx)(ne.a,{timeout:{enter:kc,exit:Sc},style:s===Cc.SHOWING?{transitionDelay:"".concat(150*t,"ms")}:{},in:[Cc.SHOWING,Cc.SHOWN].includes(s),children:Object(H.jsxs)(bt.a,{sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(H.jsx)(mt.a,{align:"right",sx:{...wc.cell,...wc.ranking,...e.advancing?wc.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{sx:{...wc.cell,...wc.name},children:e.person.name}),Object(H.jsx)(mt.a,{sx:wc.cell,align:"center",children:Object(H.jsx)(yc,{code:e.person.country.iso2.toLowerCase()})}),gn(e,n.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",sx:wc.cell,children:nn(e,c)},t))),u.map(((t,n)=>{let{name:i,field:r,recordTagField:o}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{...wc.cell,fontWeight:0===n?600:400},children:Object(H.jsx)(Dn,{recordTag:e[o],hidePb:!0,children:nn(e[r],c)})},i)}))]})},e.person.id)))})]})]})})},Tc=n(141),Pc=n.n(Tc);function Rc(e){switch(e){case"222":return"2x2x2";case"333":return"3x3x3";case"333oh":return"3x3x3 One-Handed";case"333fm":return"3x3x3 Fewest Moves";case"333bf":return"3x3x3 Blindfolded";case"333mbf":return"3x3x3 Multi-Blindfolded";case"444":return"4x4x4";case"444bf":return"4x4x4 Blindfolded";case"555":return"5x5x5";case"555bf":return"5x5x5 Blindfolded";case"666":return"6x6x6";case"777":return"7x7x7";case"clock":return"Clock";case"minx":return"Megaminx";case"sq1":return"Square-1";case"skewb":return"Skewb";case"pyram":return"Pyraminx"}}var Dc=function(e){let{type:t,eventId:n,wcaId:i}=e;return Object(H.jsx)(Wt.a,{title:"Update Stream",children:Object(H.jsx)(Pt.a,{color:"inherit",onClick:()=>{!async function(e,t,n){var i=new Headers;i.append("Content-Type","application/json");const c=await fetch("https://raw.githubusercontent.com/robiningelbrecht/wca-rest-api/master/api/persons/".concat(n,".json")),r=JSON.parse(await c.text()),o=r.rank.singles.find((e=>e.eventId===t));let a="First Time Solver";void 0!==o&&(a="".concat(Rc(t)," PR Single: ").concat(nn(o.best,t)));const s=r.rank.averages.find((e=>e.eventId===t));let l="First Time Solver";void 0!==s&&(l="".concat(Rc(t)," PR Average: ").concat(nn(s.best,t)));const d={model:{fields:[{defaultValue:"Player Name",id:"name",title:"Player Name",type:"text"},{defaultValue:"0",id:"single",title:"Player Best Single",type:"text"},{defaultValue:"0",id:"average",title:"Player Best Average",type:"text"}]},payload:{name:r.name+"",single:"single"===e?a:l}};console.log(r);var j={method:"PUT",headers:i,body:JSON.stringify(d),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/0NdPtR2WpFYZtDZ6qflFxT/data",j).then((e=>e.text())).then((e=>console.log(e))).catch((e=>{console.log("error",e)}))}(t,n,i)},size:"small",children:Object(H.jsx)(Pc.a,{})})})};const Nc={cell:{pr:{xs:"6px",md:"16px"},pl:{xs:"10px",md:"16px"},"&:last-child":{pr:2}},ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},name:{textOverflow:"ellipsis",overflow:"hidden",pr:0,maxWidth:{xs:150,md:250}}};var Mc=c.a.memo((e=>{let{results:t,format:n,eventId:i,competitionId:c,onResultClick:r}=e;const a=Object(F.a)((e=>e.breakpoints.up("sm"))),s=Object(F.a)((e=>e.breakpoints.up("md"))),l=xn(i,n);return Object(H.jsx)(Re.a,{children:Object(H.jsxs)(lt.a,{size:"small",children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{sx:{...Nc.cell,...Nc.ranking},align:"right",children:"#"}),Object(H.jsx)(mt.a,{sx:{...Nc.cell,...Nc.ranking},align:"right",children:"PR"}),Object(H.jsx)(mt.a,{sx:{...Nc.cell,...Nc.ranking},align:"right",children:"AVG"}),Object(H.jsx)(mt.a,{sx:Nc.cell,children:"Name"}),s&&Object(H.jsx)(mt.a,{sx:Nc.cell,children:"Country"}),a&&Object(Lt.k)(n.numberOfAttempts,(e=>Object(H.jsx)(mt.a,{sx:Nc.cell,align:"right",children:e+1},e))),l.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{sx:Nc.cell,align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:t.map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:()=>r&&r(e),children:[Object(H.jsx)(mt.a,{align:"right",sx:{...Nc.cell,...Nc.ranking,...e.advancing?Nc.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{align:"right",sx:{...Nc.cell,...Nc.ranking},children:Object(H.jsx)(Dc,{type:"single",eventId:i,wcaId:e.person.wcaId})}),Object(H.jsx)(mt.a,{align:"right",sx:{...Nc.cell,...Nc.ranking},children:Object(H.jsx)(Dc,{type:"average",eventId:i,wcaId:e.person.wcaId})}),Object(H.jsx)(mt.a,{sx:{...Nc.cell,...Nc.name},children:a?Object(H.jsx)(gi.a,{component:o.b,to:"/competitions/".concat(c,"/competitors/").concat(e.person.id),underline:"hover",children:e.person.name}):e.person.name}),s&&Object(H.jsx)(mt.a,{sx:Nc.cell,children:e.person.country.name}),a&&gn(e,n.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",sx:Nc.cell,children:nn(e,i)},t))),l.map(((t,n)=>{let{name:c,field:r,recordTagField:o}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{...Nc.cell,fontWeight:0===n?600:400},children:Object(H.jsx)(Dn,{recordTag:e[o],hidePb:!0,children:nn(e[r],i)})},c)}))]},e.id)))})]})})}));var Wc=function(e){let{result:t,format:n,eventId:i,competitionId:c,onClose:r}=e;const a=xn(i,n);return Object(H.jsx)(Vn.a,{open:!!t,fullWidth:!0,onClose:r,children:!!t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Yn.a,{children:[t.person.name," ",t.ranking&&"#".concat(t.ranking)]}),Object(H.jsx)(_n.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:"Name"}),Object(H.jsx)(We.a,{variant:"body2",children:t.person.name}),Object(H.jsx)(gi.a,{component:o.b,to:"/competitions/".concat(c,"/competitors/").concat(t.person.id),underline:"hover",children:"All results"})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:"Country"}),Object(H.jsx)(We.a,{variant:"body2",children:t.person.country.name})]}),t.ranking&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:"Attempts"}),Object(H.jsx)(We.a,{variant:"body2",children:t.attempts.map((e=>nn(e.result,i))).join(", ")})]}),a.map((e=>{let{name:n,field:c,recordTagField:r}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:n}),Object(H.jsx)(We.a,{variant:"body2",children:Object(H.jsx)(Dn,{recordTag:t[r],hidePb:!0,children:nn(t[c],i)})})]},n)}))]})]})}),Object(H.jsx)(Gn.a,{children:Object(H.jsx)(me.a,{color:"primary",onClick:r,children:"Close"})})]})})};const zc=100;var Fc=function(e){let{results:t,format:n,eventId:c,competitionId:r}=e;const o=Object(F.a)((e=>e.breakpoints.up("sm"))),[a,s]=Object(i.useState)(null),[l,d]=Object(i.useState)(t.length<=zc);Object(i.useEffect)((()=>{d(t.length<=zc)}),[t]);const j=Object(i.useCallback)((e=>{s(e)}),[]),u=Object(i.useMemo)((()=>l?t:t.slice(0,zc)),[t,l]);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,style:{width:"100%"},children:Object(H.jsx)(Mc,{results:u,format:n,eventId:c,competitionId:r,onResultClick:j})}),!l&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(me.a,{variant:"contained",disableElevation:!0,size:"small",onClick:()=>d(!0),children:[t.length-zc," more"]})})]}),!o&&Object(H.jsx)(Wc,{result:a,format:n,eventId:c,competitionId:r,onClose:()=>s(null)})]})},$c=n(444),Bc=n.n($c),Lc=n(834),Uc=n(793),qc=n(796);var Hc=function(e){let{round:t}=e;const[n,c]=Object(i.useState)(0);return Object(i.useEffect)((()=>{console.log(t.competitionEvent.competition.id),c(0)}),t.competitionEvent.competition.id),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Wt.a,{title:"Update Stream",children:Object(H.jsx)(Pt.a,{color:"inherit",onClick:()=>{!async function(e,t){const n={model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"},{defaultValue:"1",id:"roundId",title:"Round Id",type:"text"},{defaultValue:"Round 1",id:"roundName",title:"Round Name",type:"text"}]},payload:{competitionName:e.competitionEvent.competition.name,competitionId:e.competitionEvent.competition.id,eventName:e.competitionEvent.event.name,eventId:e.competitionEvent.event.id,roundName:e.name,roundId:e.id}};let i=e.competitionEvent.event.id;e.results.forEach(((e,c)=>{if(null!==e.ranking&&e.ranking>t&&e.ranking<t+9){const t=c%8;n.model.fields.push({defaultValue:"",id:"player".concat(t,"name"),title:"Player ".concat(t," Name"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"country"),title:"Player ".concat(t," Country"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveAverage"),title:"Player ".concat(t," Average"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveBest"),title:"Player ".concat(t," Best"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveRank"),title:"Player ".concat(t," Rank"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveAdvancing"),title:"Player ".concat(t," Advancing"),type:"text"}),n.payload["player".concat(t,"name")]=e.person.name,n.payload["player".concat(t,"country")]=e.person.country.iso2,n.payload["player".concat(t,"solveAverage")]=nn(e.average,i),n.payload["player".concat(t,"solveBest")]=nn(e.best,i),n.payload["player".concat(t,"solveRank")]=e.ranking,n.payload["player".concat(t,"solveAdvancing")]=e.advancing,e.attempts.forEach(((e,c)=>{n.model.fields.push({defaultValue:"",id:"player".concat(t,"solve").concat(c),title:"Player ".concat(t," Solve ").concat(c),type:"text"}),n.payload["player".concat(t,"solve").concat(c)]=nn(e.result,i)}))}}));var c=new Headers;c.append("Content-Type","application/json");var r={method:"PUT",headers:c,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/3oJaI4WmaA1nqVuVuMGwaU/data",r).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e)))}(t,n),console.log(t)},size:"large",children:Object(H.jsx)(Pc.a,{})})}),Object(H.jsxs)(Lc.a,{children:[Object(H.jsx)(qc.a,{id:"demo-simple-select-label",children:"Rank Range"}),Object(H.jsx)(Uc.a,{labelId:"demo-simple-select-label",id:t.eventId,value:n,label:"Rank Range",onChange:e=>{console.log(e.target.value),c(e.target.value)},children:t.results.map(((e,n)=>{if(n%8==0)return console.log(n),Object(H.jsxs)(Fn.a,{value:n,children:[n+1," to ",n+8]},"".concat(t.competitionEvent.competition.id,"-").concat(n))}))})]})]})};var Vc,Gc,_c,Qc=function(e){let{round:t,competitionId:n}=e;const i=Object(F.a)((e=>e.breakpoints.up("md")));return Object(H.jsxs)(te.a,{item:!0,container:!0,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(We.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]})}),Object(H.jsx)(te.a,{item:!0,style:{flexGrow:1}}),i&&Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Wt.a,{title:"PDF",placement:"top",children:Object(H.jsx)(Pt.a,{component:"a",target:"_blank",href:Xe("/pdf/rounds/".concat(t.id)),size:"large",children:Object(H.jsx)(Hn.a,{})})}),Object(H.jsx)(Wt.a,{title:"Projector view",placement:"top",children:Object(H.jsx)(Pt.a,{component:o.b,to:"/competitions/".concat(n,"/rounds/").concat(t.id,"/projector"),size:"large",children:Object(H.jsx)(Bc.a,{})})}),Object(H.jsx)(Hc,{round:t})]})]})};const Yc=Object(K.a)(Vc||(Vc=Object(X.a)(["\n  fragment roundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      wcaId\n      id\n      name\n      wcaId\n      country {\n        iso2\n        name\n      }\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"]))),Jc=Object(K.a)(Gc||(Gc=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      finished\n      active\n      competitionEvent {\n        id\n        competition {\n          id\n          name\n        }\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),Yc),Zc=Object(K.a)(_c||(_c=Object(X.a)(["\n  subscription RoundUpdated($id: ID!) {\n    roundUpdated(id: $id) {\n      id\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),Yc);var Xc=function(){const{competitionId:e,roundId:t}=Object(Z.h)(),{data:n,loading:r,error:o,subscribeToMore:a}=Object(ee.b)(Jc,{variables:{id:t}}),[s,l]=c.a.useState(void 0);Object(i.useEffect)((()=>{n&&l(n)}),[n]);const d=n||s,j=d&&d.round&&(!d.round.finished||d.round.active);if(Object(i.useEffect)((()=>{if(j){return a({document:Zc,variables:{id:t}})}}),[a,t,j]),!d)return Object(H.jsx)(re,{});if(o)return Object(H.jsx)(oe.a,{error:o});const{round:u}=d;return Object(H.jsxs)(H.Fragment,{children:[r&&Object(H.jsx)(re,{}),Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Qc,{round:u,competitionId:e})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"projector",element:Object(H.jsx)(Ac,{results:u.results,format:u.format,eventId:u.competitionEvent.event.id,title:"".concat(u.competitionEvent.event.name," - ").concat(u.name),exitUrl:"/competitions/".concat(e,"/rounds/").concat(t)})}),Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Fc,{results:u.results,format:u.format,eventId:u.competitionEvent.event.id,competitionId:e})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/competitions/".concat(e,"/rounds/").concat(t)})})]})})]})]})},Kc=n(52),er=n(212),tr=n.n(er);var nr,ir=function(e){let{competitors:t,competitionId:n}=e;const[c,r]=Object(i.useState)(""),a=function(e,t){const n=t.toLowerCase().split(/\s+/);return e.filter((e=>n.every((t=>e.name.toLowerCase().includes(t)))))}(t,c).sort(((e,t)=>e.name.localeCompare(t.name)));return Object(H.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Re.a,{sx:{p:"2px 2px 2px 16px",display:"inline-block"},children:[Object(H.jsx)(Kc.c,{autoFocus:!0,value:c,placeholder:"Search competitor",onChange:e=>r(e.target.value)}),Object(H.jsx)(Pt.a,{disabled:!0,size:"large",children:Object(H.jsx)(tr.a,{})})]})}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(le.a,{children:a.map((e=>Object(H.jsxs)(je.a,{button:!0,component:o.b,to:"/competitions/".concat(n,"/competitors/").concat(e.id),children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(yc,{code:e.country.iso2.toLowerCase(),size:"lg"})}),Object(H.jsx)(be.a,{primary:e.name})]},e.id)))})})]})};const cr=Object(K.a)(nr||(nr=Object(X.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var rr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(cr,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t;return Object(H.jsx)(ir,{competitors:c.competitors,competitionId:c.id})},or=n.p+"static/media/wca-logo.513c1572.svg";const ar={ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},roundName:{width:{xs:150,lg:200}}};var sr=function(e){let{results:t,competitionId:n,onResultClick:i}=e;const c=Object(F.a)((e=>e.breakpoints.up("sm"))),{format:r,competitionEvent:{event:a}}=t[0].round,s=xn(a.id,r),l=Math.max(...t.map((e=>e.round.format.numberOfAttempts)));return Object(H.jsx)(Re.a,{children:Object(H.jsxs)(lt.a,{size:"small",sx:{tableLayout:"fixed"},children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{align:"right",sx:ar.ranking,children:"#"}),Object(H.jsx)(mt.a,{sx:ar.roundName,children:"Round"}),c&&Object(Lt.k)(l,(e=>Object(H.jsx)(mt.a,{align:"right",children:e+1},e))),s.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:t.map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:t=>i(e,t),children:[Object(H.jsx)(mt.a,{align:"right",sx:{...ar.ranking,...e.advancing?ar.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{sx:ar.roundName,children:c?Object(H.jsx)(gi.a,{component:o.b,to:"/competitions/".concat(n,"/rounds/").concat(e.round.id),underline:"hover",children:e.round.name}):e.round.name}),c&&gn(e,r.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",children:nn(e,a.id)},t))),s.map(((t,n)=>{let{name:i,field:c,recordTagField:r}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{fontWeight:0===n?600:400},children:Object(H.jsx)(Dn,{recordTag:e[r],children:nn(e[c],a.id)})},i)}))]},e.round.id)))})]})})};var lr=function(e){let{result:t,competitionId:n,onClose:i}=e;return Object(H.jsxs)(Vn.a,{open:!!t,fullWidth:!0,onClose:i,children:[!!t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Yn.a,{children:["#",t.ranking]}),Object(H.jsx)(_n.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:"Event"}),Object(H.jsx)(We.a,{variant:"body2",children:t.round.competitionEvent.event.name})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:"Round"}),Object(H.jsx)(We.a,{variant:"body2",children:t.round.name}),Object(H.jsx)(gi.a,{component:o.b,to:"/competitions/".concat(n,"/rounds/").concat(t.round.id),underline:"hover",children:"All results"})]}),t.ranking&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:"Attempts"}),Object(H.jsx)(We.a,{variant:"body2",children:t.attempts.map((e=>nn(e.result,t.round.competitionEvent.event.id))).join(", ")})]}),xn(t.round.competitionEvent.event.id,t.round.format).map((e=>{let{name:n,field:i,recordTagField:c}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle2",children:n}),Object(H.jsx)(We.a,{variant:"body2",children:Object(H.jsx)(Dn,{recordTag:t[c],children:nn(t[i],t.round.competitionEvent.event.id)})})]},n)}))]})]})})]}),Object(H.jsx)(Gn.a,{children:Object(H.jsx)(me.a,{color:"primary",onClick:i,children:"Close"})})]})};var dr,jr=function(e){let{results:t,competitionId:n}=e;const c=Object(F.a)((e=>e.breakpoints.up("sm"))),[r,o]=Object(i.useState)(null),a=t.filter((e=>e.attempts.length>0)),s=Object(Lt.d)(Object(Lt.h)(a,[e=>e.round.competitionEvent.event.rank,e=>e.round.number]),(e=>e.round.competitionEvent.event.name));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(te.a,{container:!0,direction:"column",spacing:2,children:Object.entries(s).map((e=>{let[t,i]=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle1",gutterBottom:!0,children:t}),Object(H.jsx)(sr,{results:i,competitionId:n,onResultClick:e=>o(e)})]},t)}))}),!c&&Object(H.jsx)(lr,{result:r,competitionId:n,onClose:()=>o(null)})]})};const ur=Object(K.a)(dr||(dr=Object(X.a)(["\n  query Competitor($id: ID!) {\n    person(id: $id) {\n      id\n      name\n      wcaId\n      country {\n        iso2\n      }\n      results {\n        id\n        ranking\n        advancing\n        attempts {\n          result\n        }\n        best\n        average\n        singleRecordTag\n        averageRecordTag\n        round {\n          id\n          name\n          number\n          competitionEvent {\n            id\n            event {\n              id\n              name\n              rank\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n      }\n    }\n  }\n"])));var br,mr=function(){const{competitionId:e,competitorId:t}=Object(Z.h)(),{data:n,loading:i,error:c}=Object(ee.b)(ur,{variables:{id:t}});if(i&&!n)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(oe.a,{error:c});const{person:r}=n;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,alignContent:"center",sx:{mb:2},children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(We.a,{variant:"h5",children:[r.name," ",Object(H.jsx)(yc,{code:r.country.iso2.toLowerCase()})]})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),r.wcaId&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)("a",{href:Ke("/persons/".concat(r.wcaId)),target:"_blank",rel:"noopener noreferrer",children:Object(H.jsx)("img",{src:or,alt:"WCA Profile",height:"32",width:"32"})})})]}),Object(H.jsx)(jr,{results:r.results,competitionId:e})]})};const hr=Object(K.a)(br||(br=Object(X.a)(["\n  query Podiums($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      podiums {\n        round {\n          id\n          finished\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n        results {\n          id\n          ranking\n          advancing\n          attempts {\n            result\n          }\n          best\n          average\n          person {\n            id\n            name\n            country {\n              iso2\n              name\n            }\n          }\n          singleRecordTag\n          averageRecordTag\n        }\n      }\n    }\n  }\n"])));var pr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(hr,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t,[r,o]=Object(Lt.i)(c.podiums,(e=>e.round.finished));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Podiums"}),r.length>0?Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[r.map((e=>{let{round:t,results:n}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"subtitle1",gutterBottom:!0,children:t.competitionEvent.event.name}),Object(H.jsx)(Fc,{results:n,format:t.format,eventId:t.competitionEvent.event.id,competitionId:c.id})]},t.id)})),o.length>0&&Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{gutterBottom:!0,children:"Podiums for the following events are yet to be determined:"}),Object(H.jsx)(te.a,{container:!0,direction:"row",spacing:3,children:o.map((e=>{let{round:t}=e;return t.competitionEvent.event})).map((e=>Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Wt.a,{title:e.name,children:Object(H.jsx)("span",{children:Object(H.jsx)(ke.a,{eventId:e.id})})})},e.id)))})]})]}):Object(H.jsx)(We.a,{children:"There are no podiums yet!"})]})};function Or(e){return void 0===e||null===e?"":Math.trunc(100*e.result)}var xr=function(e){let{competitionId:t,index:n}=e;const[c,r]=Object(i.useState)(null);return(e=>{const t=new WebSocket("wss://api.timebase.live/livestream/BayAreaSpeedcubin632024/".concat(e));t.addEventListener("open",(t=>{console.log("Hello - "+e),n()})),t.addEventListener("close",(t=>{console.log("Closed - "+e)})),t.addEventListener("message",(t=>{console.log("Message from server - "+e,t.data);const n=JSON.parse(t.data);r(n)}));const n=()=>{t.send("ping"),setTimeout(n,3e3)}})(n),Object(H.jsx)(me.a,{button:!0,onClick:()=>{!function(e){const t=[];t.push(Or(e.current_results[0])),t.push(Or(e.current_results[1])),t.push(Or(e.current_results[2])),t.push(Or(e.current_results[3])),t.push(Or(e.current_results[4]));const n=t.filter((e=>e<0)).length,i=t.filter((e=>""===e)).length,c=null!==e.current_results[0]&&void 0!==e.current_results[0]?e.current_results[0].event_id:"333",r=Yt(t,c),o=1===i?Yt(t.filter((e=>""!==e)).concat(.01),c):"--",a=1===i?Yt(t.filter((e=>""!==e)).concat(-1),c):"--",s={model:{fields:[{defaultValue:"Player 1 Name",id:"p1Name",title:"Player 1 Name",type:"text"},{defaultValue:"",id:"p1Score1",title:"Player 1 Score 1",type:"text"},{defaultValue:"",id:"p1Score2",title:"Player 1 Score 2",type:"text"},{defaultValue:"",id:"p1Score3",title:"Player 1 Score 3",type:"text"},{defaultValue:"",id:"p1Score4",title:"Player 1 Score 4",type:"text"},{defaultValue:"",id:"p1Score5",title:"Player 1 Score 5",type:"text"},{defaultValue:"",id:"p1Count",title:"Player 1 DNF Count",type:"text"},{defaultValue:"",id:"p1Remaining",title:"Player 1 Remaining Solves",type:"text"},{defaultValue:"",id:"p1Mean",title:"Player 1 Mean",type:"text"},{defaultValue:"",id:"p1Best",title:"Player 1 Best",type:"text"},{defaultValue:"",id:"p1Average",title:"Player 1 Average",type:"text"},{defaultValue:"",id:"p1Worst",title:"Player 1 Worst",type:"text"}]},payload:{p1Name:e.name,p1Score1:""!==t[0]?t[0]/100:"",p1Score2:""!==t[1]?t[1]/100:"",p1Score3:""!==t[2]?t[2]/100:"",p1Score4:""!==t[3]?t[3]/100:"",p1Score5:""!==t[4]?t[4]/100:"",p1Count:n,p1Remaining:i,p1Mean:0!==r?r/100:"--",p1Best:o,p1Average:0!==r?r/100:"--",p1Worst:a}};var l=new Headers;l.append("Content-Type","application/json");var d={method:"PUT",headers:l,body:JSON.stringify(s),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/4uEqIEL6YSbGZbF4JwL5ac/data",d).then((e=>e.text())).then((e=>console.log(e))).catch((e=>{console.log("error",e)}))}(c)},children:Object(H.jsx)(ae.a,{children:Object(H.jsxs)(se.a,{children:[Object(H.jsxs)(We.a,{variant:"h5",children:["#",n]}),c&&Object(H.jsx)(We.a,{variant:"caption",children:c.name})]})})},n)};var fr,gr=function(e){let{competitors:t,competitionId:n}=e;const[c,r]=Object(i.useState)("");return function(e,t){const n=t.toLowerCase().split(/\s+/);return e.filter((e=>n.every((t=>e.name.toLowerCase().includes(t)))))}(t,c).sort(((e,t)=>e.name.localeCompare(t.name))),Object(H.jsx)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:Object(H.jsx)(te.a,{container:!0,item:!0,sx:{width:"100%"},children:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map((e=>Object(H.jsx)(te.a,{item:!0,xs:{width:"200px"},children:Object(H.jsx)(xr,{competitionId:n,index:e})})))})})};const vr=Object(K.a)(fr||(fr=Object(X.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var yr,wr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:i}=Object(ee.b)(vr,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(oe.a,{error:i});const{competition:c}=t;return Object(H.jsx)(gr,{competitors:c.competitors,competitionId:c.id})},Cr=n(445);const Ir=Object(K.a)(yr||(yr=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));var kr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,error:n,loading:i}=Object(ee.b)(Ir,{variables:{id:e},pollInterval:6e4});if(n)return Object(H.jsx)(oe.a,{error:n});const c=t?t.competition:null;return Object(H.jsxs)(Cr.a,{competition:c,children:[i&&Object(H.jsx)(re,{}),Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Oc,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId/*",element:Object(H.jsx)(Xc,{})}),Object(H.jsx)(Z.b,{path:"competitors",element:Object(H.jsx)(rr,{})}),Object(H.jsx)(Z.b,{path:"competitors/:competitorId",element:Object(H.jsx)(mr,{})}),Object(H.jsx)(Z.b,{path:"podiums",element:Object(H.jsx)(pr,{})}),Object(H.jsx)(Z.b,{path:"timebase",element:Object(H.jsx)(wr,{})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/competitions/".concat(e)})})]})]})},Sr=n(36),Er=n(450),Ar=n.n(Er),Tr=n(451),Pr=n.n(Tr);const Rr={"&:hover":{opacity:.7}};var Dr=function(){const e=Object(Sr.a)(),t=Object(i.useContext)(_);return Object(H.jsxs)(te.a,{container:!0,spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Pt.a,{size:"small",onClick:t,"aria-label":"Toggle theme",children:"dark"===e.palette.mode?Object(H.jsx)(Ar.a,{}):Object(H.jsx)(Pr.a,{})})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(gi.a,{sx:Rr,variant:"subtitle1",component:o.b,to:"/about",underline:"none",children:"About"})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(gi.a,{sx:Rr,variant:"subtitle1",href:"https://github.com/thewca/wca-live",target:"_blank",rel:"noopener noreferrer",underline:"none",children:"GitHub"})})]})},Nr=n(465),Mr=n(452);var Wr=function(e){let{maxHeight:t,itemHeight:n,items:i,renderItem:c}=e;const r=Math.min(t,i.length*n);return Object(H.jsx)("div",{style:{height:r},children:Object(H.jsx)(Mr.a,{children:e=>{let{width:t}=e;return Object(H.jsx)(Nr.a,{height:r,width:t,itemSize:n,itemCount:i.length,children:e=>{let{index:t,style:n}=e;return c(i[t],{style:n})}})}})})},zr=n(453),Fr=n.n(zr);var $r=function(e){let{competition:t}=e;const n=tc(t);if(1===n.length){const[e]=n;return Object(H.jsx)(yc,{code:e.iso2.toLowerCase(),size:"lg"})}return Object(H.jsx)(Fr.a,{})};var Br=function(e){let{title:t,competitions:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Ne.a,{disableSticky:!0,children:t}),Object(H.jsx)(Wr,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;return Object(H.jsxs)(je.a,{style:n,button:!0,component:o.b,to:"/competitions/".concat(e.id),children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(De.a,{children:Object(H.jsx)($r,{competition:e})})}),Object(H.jsx)(be.a,{primary:e.name,secondary:lc(e.startDate,e.endDate)})]},e.id)}})]})};var Lr,Ur=function(e){let{past:t,inProgress:n,upcoming:c}=e;const[r,o]=Object(i.useState)(n.length>0?"inProgress":"upcoming"),a={past:t,inProgress:n,upcoming:c}[r];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(ot.a,{indicatorColor:"secondary",textColor:"inherit",value:r,onChange:function(e,t){o(t)},variant:"fullWidth",children:[Object(H.jsx)(at.a,{label:"Upcoming",value:"upcoming"}),n.length>0&&Object(H.jsx)(at.a,{label:"Right now",value:"inProgress"}),t.length>0&&Object(H.jsx)(at.a,{label:"Past month",value:"past"})]}),Object(H.jsx)(Br,{competitions:a})]})},qr=n(454),Hr=n.n(qr);const Vr=Object(K.a)(Lr||(Lr=Object(X.a)(["\n  query Competitions($filter: String!) {\n    competitions(filter: $filter, limit: 10) {\n      id\n      name\n    }\n  }\n"])));var Gr=function(e){let{onChange:t,TextFieldProps:n={}}=e;const[c,r]=Object(i.useState)(""),o=gt(c,250),{data:a,loading:s}=Object(ee.b)(Vr,{variables:{filter:o}}),l=a?a.competitions:[];return Object(H.jsx)(xt.a,{clearOnBlur:!0,blurOnSelect:!0,options:l,getOptionLabel:e=>e.name,loading:s,onInputChange:function(e,t,n){"input"===n&&r(t)},value:null,onChange:function(e,n,i){"selectOption"===i&&t(n)},renderInput:e=>Object(H.jsx)(ft.a,{...e,...n})})};var _r=function(e){let{upcoming:t,inProgress:n,past:c}=e;const r=Object(Z.g)(),[o,a]=Object(i.useState)(!1),s=Object(i.useRef)(null);return Object(H.jsxs)(te.a,{container:!0,alignItems:"center",justifyContent:"flex-end",spacing:1,children:[n.length>0&&Ji&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Wt.a,{title:"Find nearest competition",placement:"top",children:Object(H.jsx)(Pt.a,{onClick:()=>{ic(n).then((e=>{r("/competitions/".concat(e.id))}))},"aria-label":"Nearest competition",size:"large",children:Object(H.jsx)(Hr.a,{})})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Wt.a,{title:"Search competitions",placement:"top",children:Object(H.jsx)(Pt.a,{onClick:()=>a(!o),size:"large",children:Object(H.jsx)(tr.a,{})})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(ne.a,{in:o,onEntered:()=>s.current.focus(),unmountOnExit:!0,children:Object(H.jsx)("div",{children:Object(H.jsx)(Gr,{onChange:e=>r("/competitions/".concat(e.id)),TextFieldProps:{fullWidth:!0,placeholder:"Search",variant:"outlined",size:"small",inputRef:s,onBlur:()=>a(!1),style:{width:250}}})})})})]})};var Qr,Yr=function(e){let{title:t,records:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Ne.a,{disableSticky:!0,children:t}),Object(H.jsx)(rt.a,{sx:{maxHeight:300,overflowY:"auto"},children:n.map((e=>Object(H.jsxs)(je.a,{button:!0,component:o.b,to:"/competitions/".concat(e.result.round.competitionEvent.competition.id,"/rounds/").concat(e.result.round.id),children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(Rn,{recordTag:e.tag})}),Object(H.jsx)(be.a,{primary:Object(H.jsxs)("span",{children:[Object(H.jsx)("span",{children:"".concat(e.result.round.competitionEvent.event.name," ").concat(e.type," of ")}),Object(H.jsx)(rt.a,{component:"span",sx:{fontWeight:600},children:"".concat(nn(e.attemptResult,e.result.round.competitionEvent.event.id))})]}),secondary:"".concat(e.result.person.name," from ").concat(e.result.person.country.name)})]},e.id)))})]})};const Jr=Object(K.a)(Qr||(Qr=Object(X.a)(["\n  query Competitions($from: Date!) {\n    competitions(from: $from) {\n      id\n      name\n      startDate\n      endDate\n      startTime\n      endTime\n      venues {\n        id\n        country {\n          iso2\n        }\n      }\n    }\n    recentRecords {\n      id\n      tag\n      type\n      attemptResult\n      result {\n        id\n        person {\n          id\n          name\n          country {\n            iso2\n            name\n          }\n        }\n        round {\n          id\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n            competition {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var Zr=function(){const{data:e,loading:t,error:n}=Object(ee.b)(Jr,{variables:{from:uc()}});if(t&&!e)return Object(H.jsx)(re,{});if(n)return Object(H.jsx)(oe.a,{error:n});const{recentRecords:i}=e,c=Object(Lt.h)(e.competitions,[e=>e.startTime,e=>e.endTime]),r=c.filter(Ki),o=c.filter(ec),a=c.filter(Xi).reverse();return Object(H.jsx)(rt.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3},display:"flex",minHeight:"100%"},children:Object(H.jsxs)(te.a,{container:!0,spacing:2,direction:"column",sx:{flexGrow:1},children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(_r,{upcoming:r,inProgress:o,past:a})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Re.a,{children:Object(H.jsx)(Ur,{upcoming:r,inProgress:o,past:a})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Re.a,{children:Object(H.jsx)(Yr,{title:"Recent records",records:i})})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(Dr,{})})]})})},Xr=n.p+"static/media/logo.513c1572.svg",Kr=n(775),eo=n(803),to=n(172),no=n(455),io=n.n(no);var co=function(){const e=Object(to.a)(),t=Object(Z.g)();return Object(H.jsxs)(Fn.a,{onClick:function(){S(),t("/"),e.resetStore()},children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(io.a,{})}),"Sign out"]})},ro=n(456),oo=n.n(ro),ao=n(457),so=n.n(ao);var lo=function(e){let{user:t}=e;const[n,c]=Object(i.useState)(!1),r=Object(i.useRef)();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Pt.a,{ref:r,onClick:()=>c(!0),size:"small",children:Object(H.jsx)(eo.a,{alt:t.name,src:t.avatar.thumbUrl,size:"small"})}),Object(H.jsxs)(zn.a,{open:n,onClick:()=>c(!1),onClose:()=>c(!1),anchorEl:r.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},sx:{minWidth:200},children:[Object(H.jsxs)(Fn.a,{component:o.b,to:"/account",children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(oo.a,{})}),"Account"]}),Object(H.jsxs)(Fn.a,{component:o.b,to:"/my-competitions",children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(so.a,{})}),"My competitions"]}),Object(H.jsx)(Kr.a,{sx:{my:1}}),Object(H.jsx)(co,{})]})]})};var jo=function(e){let{currentUser:t,loaded:n,children:i}=e;return Object(H.jsxs)(rt.a,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(H.jsx)(vi.a,{children:Object(H.jsxs)(te.a,{container:!0,spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(rt.a,{component:o.b,to:"/",sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit"},children:[Object(H.jsx)("img",{src:Xr,alt:"wca logo",height:"40"}),Object(H.jsx)(We.a,{variant:"h6",sx:{ml:1},children:"WCA Live"})]})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),n&&(t?Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(lo,{user:t})}):Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{variant:"outlined",size:"small",color:"inherit",component:o.b,to:"/sign-in",children:"Sign in"})}))]})}),Object(H.jsx)(rt.a,{sx:{flexGrow:1},children:i})]})},uo=n(458),bo=n.n(uo);function mo(e){return/^\d+-\d{6}$/.test(e)}var ho,po=function(e){let{onSubmit:t,disabled:n=!1}=e;const[c,r]=Object(i.useState)("");return Object(H.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(c)},children:Object(H.jsx)(ft.a,{variant:"outlined",label:"Code",value:c,onChange:e=>r(e.target.value),disabled:n,InputProps:{endAdornment:Object(H.jsx)(Pt.a,{type:"submit",disabled:n||!mo(c),size:"large",children:Object(H.jsx)(bo.a,{})})}})})};const Oo=Object(K.a)(ho||(ho=Object(X.a)(["\n  mutation SignIn($code: String!) {\n    signIn(input: { code: $code }) {\n      token\n    }\n  }\n"])));var xo=function(){const e=Oe(),t=Object(to.a)(),n=Object(Z.g)(),[i,{loading:c}]=Object(he.a)(Oo,{onError:e,onCompleted:e=>{let{signIn:{token:i}}=e;k(i),n("/"),t.resetStore()}});return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use a one-time code"}),Object(H.jsx)(We.a,{color:"textSecondary",align:"center",children:"Generate a code on your trusted device and type here to establish a session without going through the WCA website. This strategy is useful for scoretaking on an unknown machine."})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(po,{onSubmit:function(e){i({variables:{code:e}})},disabled:c})})]})};var fo=function(){return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use your WCA account"}),Object(H.jsxs)(We.a,{color:"textSecondary",align:"center",children:["If you don't have a WCA account, you can create one"," ",Object(H.jsx)(gi.a,{href:Ke("/users/sign_up"),underline:"hover",children:"here"}),"."]})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{size:"large",variant:"contained",color:"primary",href:Xe("/oauth/authorize"),children:"Sign in"})})]})};var go=function(){const e=Object(F.a)((e=>e.breakpoints.up("md")));return Object(H.jsx)(rt.a,{sx:{height:"100%",p:4},children:Object(H.jsxs)(te.a,{container:!0,alignItems:"center",sx:{height:"100%"},spacing:4,children:[Object(H.jsx)(te.a,{item:!0,xs:12,md:!0,children:Object(H.jsx)(fo,{})}),e&&Object(H.jsx)(Kr.a,{orientation:"vertical",flexItem:!0}),Object(H.jsx)(te.a,{item:!0,xs:12,md:!0,children:Object(H.jsx)(xo,{})})]})})},vo=n.p+"static/media/about.91bf4591.svg";var yo=function(){return Object(H.jsx)(rt.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3}},children:Object(H.jsxs)(te.a,{container:!0,spacing:2,direction:"column",children:[Object(H.jsx)(te.a,{item:!0,sx:{textAlign:"center"},children:Object(H.jsx)("img",{src:vo,alt:"about",height:"250"})}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"About"}),Object(H.jsxs)(We.a,{gutterBottom:!0,children:["WCA Live is an official platform for running"," ",Object(H.jsx)(gi.a,{href:"https://en.wikipedia.org/wiki/Speedcubing",underline:"hover",children:"Speedcubing"})," ","competitions governed by the"," ",Object(H.jsx)(gi.a,{href:"https://www.worldcubeassociation.org/about",underline:"hover",children:"World Cube Association"}),"."]}),Object(H.jsx)(We.a,{gutterBottom:!0,children:"Every weekend hundreds of competitors gather at speedcubing competitions all around the world. They aim to get podiums, break records and outperform their mates, but most importantly to enjoy spending time with their friends and meet new members of the community. There are up to 17 official events held at every competition - the well known 3x3x3 Cube, solved with both hands, one hand, blindfolded, but also less known types of puzzles like cubes from 2x2x2 up to 7x7x7, a tetrahedron and dodecahedron cubes and more!"}),Object(H.jsxs)(We.a,{children:["During the competition WCA Live is the place where the results are entered and managed. In every event a competitor waits for his cube to be mixed up, then performs each of his official attempts under the supervision of a judge (who makes sure all the"," ",Object(H.jsx)(gi.a,{href:"https://www.worldcubeassociation.org/regulations/",underline:"hover",children:"WCA rules"})," ","are fallowed). All attempt results are put down on a piece of paper as the competitor does them, then a scoretaker enters them to the system to eventually build up competitors ranking for the given round. After a competition all the competitor results end up in"," ",Object(H.jsx)(gi.a,{href:"https://www.worldcubeassociation.org/results/rankings",underline:"hover",children:"the WCA rankings"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Get inspired"}),Object(H.jsxs)(We.a,{children:["If you want to get a better feeling of how WCA competitions look and the great community around them, there's a great documentary available called"," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/1oZY2e25VUw",underline:"hover",children:"Why We Cube"})," ","and"," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/DHgC2Ru7_MQ",underline:"hover",children:"many"})," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/8AwlVDT3jo4",underline:"hover",children:"other"})," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/ZSGOVRhYoWU",underline:"hover",children:"inspiring"})," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/sFc-6QNoh8s",underline:"hover",children:"stories"})," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/TOJ2dXahS1Q",underline:"hover",children:"out"})," ",Object(H.jsx)(gi.a,{href:"https://youtu.be/nXuINN-Ah4Y",underline:"hover",children:"there"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Technical details"}),Object(H.jsxs)(We.a,{gutterBottom:!0,children:["The platform is designed specifically for result management and is just a part of the bigger picture. It communicates with other tools using"," ",Object(H.jsx)(gi.a,{href:"https://github.com/thewca/wcif/blob/master/specification.md",underline:"hover",children:"a standardized format"}),", which allows the community to build tiny tools focused on specific competition tasks, following the"," ",Object(H.jsx)(gi.a,{href:"https://en.wikipedia.org/wiki/Unix_philosophy",underline:"hover",children:"Unix Philosophy"}),". See"," ",Object(H.jsx)(gi.a,{href:"https://github.com/thewca/wcif/blob/master/vision.md",underline:"hover",children:"this vision document"})," ","for more details."]}),Object(H.jsxs)(We.a,{gutterBottom:!0,children:["WCA Live is an open source project, so feel free to check out the specifics on"," ",Object(H.jsx)(gi.a,{href:"https://github.com/thewca/wca-live",underline:"hover",children:"GitHub"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"Contact"}),Object(H.jsxs)(We.a,{children:["In general prefer to use the"," ",Object(H.jsx)(gi.a,{href:"https://www.worldcubeassociation.org/contact/website",underline:"hover",children:"WCA contact form"}),", so that your message is directed to the right team. In case of bug reports feel free to submit a"," ",Object(H.jsx)(gi.a,{href:"https://github.com/thewca/wca-live/issues",underline:"hover",children:"GitHub issue"})," ","or contact us directly at"," ",Object(H.jsx)(gi.a,{href:"mailto:software@worldcubeassociation.org",underline:"hover",children:"software@worldcubeassociation.org"}),"."]})]})]})})};function wo(e){const t=Object(Ge.a)(e.expiresAt),n=Object(Ge.a)(e.insertedAt),i=new Date,c=t-n;return 100-Math.max(t-i,0)/c*100}var Co,Io=function(e){let{oneTimeCode:t,open:n,onClose:c}=e;const[r,o]=Object(i.useState)(0),a=!!t&&100===wo(t);return Object(i.useEffect)((()=>{if(n&&t&&!a){function e(){const e=wo(t);o(e)}const i=setInterval(e,25);return()=>clearInterval(i)}}),[t,a,n]),Object(H.jsxs)(Vn.a,{open:n,onClose:c,children:[Object(H.jsx)(_n.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(We.a,{color:"textSecondary",children:"Navigate to the sign in page on another device and enter the following code."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(We.a,{variant:"h4",align:"center",children:a?"Expired":t&&t.code})}),Object(H.jsx)(te.a,{item:!0,style:{width:"100%"},children:Object(H.jsx)(ie.a,{variant:"determinate",value:100-r})})]})}),Object(H.jsx)(Gn.a,{children:Object(H.jsx)(me.a,{color:"primary",onClick:()=>c(),children:"Close"})})]})};const ko=Object(K.a)(Co||(Co=Object(X.a)(["\n  mutation GenerateOneTimeCode {\n    generateOneTimeCode {\n      oneTimeCode {\n        id\n        code\n        expiresAt\n        insertedAt\n      }\n    }\n  }\n"])));var So=function(){const e=Oe(),[t,n]=Object(i.useState)(!1),[c,{data:r,loading:o}]=Object(he.a)(ko,{onError:e,onCompleted:()=>n(!0)}),a=r?r.generateOneTimeCode.oneTimeCode:null;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(We.a,{variant:"h5",gutterBottom:!0,children:"One-time code"}),Object(H.jsx)(We.a,{color:"textSecondary",children:"Generate a temporary code and use it to establish a session on another (hypothetically untrusted) device without going through the WCA website. This strategy is useful for scoretaking on an unknown machine, as you don't have to type any credentials on that machine, just the temporary code."})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{variant:"contained",color:"primary",disabled:o,onClick:()=>c(),children:"Generate"})})]}),Object(H.jsx)(Io,{oneTimeCode:a,open:t,onClose:()=>n(!1)})]})};var Eo=function(){return Object(H.jsx)(rt.a,{p:{xs:2,sm:3},children:Object(H.jsx)(So,{})})},Ao=n(802);function To(e){switch(e){case"delegate":return"Delegate";case"trainee-delegate":return"Trainee delegate";case"organizer":return"Organizer";case"staff-dataentry":return"Scoretaker";default:return e}}var Po=function(e){let{title:t,staffMembers:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Ne.a,{disableSticky:!0,children:t}),Object(H.jsx)(Wr,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;const i=e.competition;return Object(H.jsxs)(je.a,{style:n,button:!0,component:o.b,to:"/admin/competitions/".concat(i.id),children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(De.a,{children:Object(H.jsx)($r,{competition:i})})}),Object(H.jsx)(be.a,{primary:i.name,secondary:lc(i.startDate,i.endDate)}),Object(H.jsx)(rt.a,{sx:{display:"flex"},children:e.roles.map((e=>Object(H.jsx)(Ao.a,{label:To(e),size:"small",color:"secondary",sx:{fontWeight:500,margin:.5}},e)))})]},i.id)}})]})};var Ro,Do=function(e){let{title:t,competitors:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(Ne.a,{disableSticky:!0,children:t}),Object(H.jsx)(Wr,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;const i=e.competition;return Object(H.jsxs)(je.a,{style:n,button:!0,component:o.b,to:"/competitions/".concat(i.id,"/competitors/").concat(e.id),children:[Object(H.jsx)(De.a,{children:Object(H.jsx)($r,{competition:i})}),Object(H.jsx)(be.a,{primary:i.name,secondary:lc(i.startDate,i.endDate)})]},i.id)}})]})},No=n(830),Mo=n(832),Wo=n(831),zo=n(460),Fo=n.n(zo),$o=n(459),Bo=n.n($o);const Lo=Object(K.a)(Ro||(Ro=Object(X.a)(["\n  mutation ImportCompetition($input: ImportCompetitionInput!) {\n    importCompetition(input: $input) {\n      competition {\n        id\n      }\n    }\n  }\n"])));var Uo,qo=function(e){let{competition:t}=e;const n=Object(s.b)(),i=Object(Z.g)(),c=Oe(),[r,{loading:o}]=Object(he.a)(Lo,{variables:{input:{wcaId:t.wcaId}},onCompleted:e=>{let{importCompetition:{competition:t}}=e;i("/admin/competitions/".concat(t.id))},onError:c});return Object(H.jsxs)(je.a,{button:!0,onClick:function(){n({description:"This will import ".concat(t.name," from the WCA website.")}).then((()=>r()))},disabled:o,children:[Object(H.jsx)(De.a,{children:Object(H.jsx)(Bo.a,{})}),Object(H.jsx)(be.a,{primary:t.name,secondary:lc(t.startDate,t.endDate)})]},t.wcaId)};const Ho=Object(K.a)(Uo||(Uo=Object(X.a)(["\n  query ImportableCompetitions {\n    importableCompetitions {\n      wcaId\n      name\n      startDate\n      endDate\n    }\n  }\n"])));var Vo=function(){const{data:e,loading:t,error:n}=Object(ee.b)(Ho);if(t&&!e)return Object(H.jsx)(re,{});if(n)return Object(H.jsx)(oe.a,{error:n});const{importableCompetitions:i}=e,c=Object(Lt.h)(i,[e=>e.startDate,e=>e.endDate]);return 0===c.length?Object(H.jsx)(rt.a,{p:2,pt:0,children:Object(H.jsx)(We.a,{variant:"body2",children:"You have no importable competitions."})}):Object(H.jsx)(le.a,{dense:!0,disablePadding:!0,sx:{width:"100%",maxHeight:300,overflowY:"auto"},children:c.map((e=>Object(H.jsx)(qo,{competition:e},e.wcaId)))})};var Go,_o=function(){return Object(H.jsxs)(No.a,{TransitionProps:{mountOnEnter:!0},children:[Object(H.jsx)(Wo.a,{expandIcon:Object(H.jsx)(Fo.a,{}),children:Object(H.jsx)(We.a,{variant:"subtitle2",color:"textSecondary",children:"Importable competitions"})}),Object(H.jsx)(Mo.a,{sx:{p:0},children:Object(H.jsx)(Vo,{})})]})};const Qo=Object(K.a)(Go||(Go=Object(X.a)(["\n  query Competitions {\n    currentUser {\n      id\n      staffMembers {\n        id\n        roles\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n      competitors {\n        id\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Yo(e){return Object(Lt.h)(e,[e=>e.competition.startDate,e=>e.competition.endDate],["desc","desc"])}var Jo,Zo=function(){const{data:e,loading:t,error:n}=Object(ee.b)(Qo);if(t&&!e)return Object(H.jsx)(re,{});if(n)return Object(H.jsx)(oe.a,{error:n});const{staffMembers:i,competitors:c}=e.currentUser,r=Yo(c),o=Yo(i);return Object(H.jsx)(rt.a,{p:3,children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:3,children:[c.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Re.a,{children:Object(H.jsx)(Do,{title:"Competitor at",competitors:r})})}),i.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Re.a,{children:Object(H.jsx)(Po,{title:"Staff member at",staffMembers:o})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(_o,{})})]})})};const Xo=Object(K.a)(Jo||(Jo=Object(X.a)(["\n  query CurrentUser {\n    currentUser {\n      id\n      name\n      avatar {\n        thumbUrl\n      }\n    }\n  }\n"])));var Ko=function(){const{data:e,error:t,loading:n}=Object(ee.b)(Xo);if(t)return Object(H.jsx)(oe.a,{error:t});const i=!n||!!e,c=e?e.currentUser:null;return Object(H.jsxs)(jo,{currentUser:c,loaded:i,children:[n&&Object(H.jsx)(re,{}),Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Zr,{})}),Object(H.jsx)(Z.b,{path:"sign-in",element:Object(H.jsx)(go,{})}),Object(H.jsx)(Z.b,{path:"about",element:Object(H.jsx)(yo,{})}),c&&Object(H.jsx)(Z.b,{path:"my-competitions",element:Object(H.jsx)(Zo,{})}),c&&Object(H.jsx)(Z.b,{path:"account",element:Object(H.jsx)(Eo,{})}),i&&Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/"})})]})]})};var ea=function(){return Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"/competitions/:competitionId/*",element:Object(H.jsx)(kr,{})}),Object(H.jsx)(Z.b,{path:"/admin/competitions/:competitionId/*",element:Object(H.jsx)(qi,{})}),Object(H.jsx)(Z.b,{path:"/*",element:Object(H.jsx)(Ko,{})})]})};var ta=function(){return Object(H.jsx)(o.a,{children:Object(H.jsx)(l.a,{client:z,children:Object(H.jsx)(J.a,{injectFirst:!0,children:Object(H.jsx)(Y,{children:Object(H.jsx)(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(H.jsxs)(s.a,{children:[Object(H.jsx)(a.a,{}),Object(H.jsx)(ea,{})]})})})})})})};const na=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ia(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}!function(){const e=window.location.hash;if(e.startsWith("#token=")){k(e.replace("#token=","")),window.history.replaceState({},document.title,window.location.pathname+window.location.search)}}();Object(r.createRoot)(document.getElementById("root")).render(Object(H.jsx)(c.a.StrictMode,{children:Object(H.jsx)(ta,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/service-worker.js");na?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):ia(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ia(t,e)}))}}()},86:function(e,t,n){"use strict";var i=n(478),c=(n(1),n(0));t.a=function(e){let{eventId:t,small:n=!1,...r}=e;return Object(c.jsx)(i.a,{component:"span",className:"cubing-icon event-".concat(t),sx:{color:e=>"dark"===e.palette.mode?"#fff":"rgba(0, 0, 0, 0.54)",fontSize:n?16:24},...r})}}},[[686,1,2]]]);
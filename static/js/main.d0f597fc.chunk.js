(this["webpackJsonpwca-live-client"]=this["webpackJsonpwca-live-client"]||[]).push([[0],{20:function(e,t,n){"use strict";function c(e,t){return e.reduce(((e,n)=>e.concat(t(n))),[])}function i(e,t,n){return e.map(((e,c)=>c===t?n:e))}function r(e,t){return Array.from({length:e},((e,n)=>t(n)))}function a(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}function o(e,t){return e.map(t).reduce(((t,n,c)=>(t[n]=(t[n]||[]).concat(e[c]),t)),{})}function s(e){return[...new Set(e)]}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"function"===typeof t&&(t=[t]),"string"===typeof n&&(n=[n]),e.slice(0).sort(((e,c)=>t.reduce(((t,i,r)=>{if(0===t){const a=i(e),o=i(c),s=a>o?1:a<o?-1:0;t="desc"===n[r]?-s:s}return t}),0)))}function d(e,t){return e.reduce(((e,n,c,i)=>(e[t(n,c,i)?0:1].push(n),e)),[[],[]])}function j(e){return e.reduce(((e,t)=>e<t?e:t))}function u(e){return e.reduce(((e,t)=>e>t?e:t))}function b(e,t){return e.reduce(((e,n)=>t(e)<t(n)?e:n))}function m(e,t,n){return Math.min(Math.max(e,t),n)}function p(e){return(t=e,t.charAt(0).toUpperCase()+t.slice(1)).replace(/\.?$/,".");var t}n.d(t,"b",(function(){return c})),n.d(t,"j",(function(){return i})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"m",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p}))},22:function(e,t,n){"use strict";var c=n(480),i=n(800),r=n(223),a=(n(1),n.p+"static/media/error.891f05e0.svg"),o=n(262),s=n(0);t.a=function(e){let{error:t=null}=e;const n=Object(o.a)(t);return Object(s.jsx)(c.a,{sx:{width:"100%",py:4},children:Object(s.jsxs)(i.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(s.jsx)(i.a,{item:!0,children:Object(s.jsx)(r.a,{variant:"h5",children:"Oh dear!"})}),Object(s.jsx)(i.a,{item:!0,children:Object(s.jsx)(c.a,{component:"img",src:a,height:300,alt:"error",sx:{maxWidth:"100%"}})}),Object(s.jsx)(i.a,{item:!0,children:Object(s.jsx)(r.a,{variant:"subtitle1",children:n})})]})})}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(20);function i(e){return e&&e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.message)).map(c.c).join(" "):"Something went wrong."}},336:function(e,t,n){"use strict";var c=n(777),i=n(821),r=n(817),a=n(1),o=n(13),s=n(448),l=n.n(s),d=n(269),j=n.n(d),u=n(449),b=n.n(u),m=n(810),p=n(816),h=n(804),x=n(801),O=n(767),f=n(769),g=n(472),v=n(86),y=n(0);var w=function(e){let{competitionEvents:t,competitionId:n}=e;const[c,i]=Object(a.useState)(null);return Object(y.jsx)(p.a,{dense:!0,children:t.map((e=>Object(y.jsxs)(a.Fragment,{children:[Object(y.jsxs)(x.a,{button:!0,onClick:t=>function(e,t){i(c===t.id?null:t.id),e.stopPropagation()}(t,e),disabled:!e.rounds.some((e=>e.open)),children:[Object(y.jsx)(f.a,{children:Object(y.jsx)(v.a,{eventId:e.event.id})}),Object(y.jsx)(O.a,{primary:e.event.name})]}),Object(y.jsx)(m.a,{in:c===e.id,timeout:"auto",unmountOnExit:!0,onEntered:e=>{Object(g.a)(e,{behavior:"smooth",scrollMode:"if-needed",block:"end"})},children:Object(y.jsx)(p.a,{dense:!0,children:e.rounds.map((e=>Object(y.jsxs)(x.a,{button:!0,component:o.b,to:"/competitions/".concat(n,"/rounds/").concat(e.id),disabled:!e.open,children:[Object(y.jsx)(O.a,{primary:e.name}),e.label&&Object(y.jsx)(h.a,{label:e.label,size:"small",sx:{borderRadius:"6px",fontSize:"0.7em",fontWeight:500}})]},e.id)))})})]},e.id)))})};t.a=function(e){let{competition:t}=e;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(i.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:1},children:[Object(y.jsx)(r.a,{component:o.b,to:"/","aria-label":"Homepage",size:"large",children:Object(y.jsx)(l.a,{})}),Object(y.jsx)(r.a,{component:o.b,to:"/competitions/".concat(t.id,"/competitors"),"aria-label":"Competitor",size:"large",children:Object(y.jsx)(j.a,{})}),Object(y.jsx)(r.a,{component:o.b,to:"/competitions/".concat(t.id,"/podiums"),"aria-label":"Podiums",size:"large",children:Object(y.jsx)(b.a,{})})]}),Object(y.jsx)(c.a,{}),Object(y.jsx)(w,{competitionEvents:t.competitionEvents,competitionId:t.id})]})}},447:function(e,t,n){"use strict";(function(e){var c=n(480),i=n(708),r=n(82),a=n(712),o=n(703),s=n(1),l=n(336),d=n(470),j=n(0);const u=250,b={appBarShift:{width:{lg:"calc(100% - ".concat(u,"px)")},ml:{lg:"".concat(u,"px")}}};t.a=function(t){let{competition:n,children:m}=t;const p=Object(o.a)((e=>e.breakpoints.up("lg"))),[h,x]=Object(s.useState)(!1),O=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(a.a,{position:"sticky",sx:b.appBarShift,children:n&&Object(j.jsx)(d.a,{competition:n,onMenuClick:()=>x(!0)})}),p?Object(j.jsx)(r.a,{variant:"permanent",sx:{"& .MuiDrawer-paper":{width:{lg:u}}},children:n&&Object(j.jsx)(l.a,{competition:n})}):Object(j.jsx)(i.a,{open:h,onOpen:()=>x(!0),onClose:()=>x(!1),onClick:()=>x(!1),sx:{"& .MuiDrawer-paper":{width:{lg:u}}},disableBackdropTransition:!O,disableDiscovery:O,children:n&&Object(j.jsx)(l.a,{competition:n})}),Object(j.jsx)(c.a,{sx:{position:"relative",overflowY:"auto",py:{xs:2,md:3},px:{xs:1,md:3},...b.appBarShift},children:m})]})}}).call(this,n(199))},470:function(e,t,n){"use strict";var c,i=n(821),r=n(820),a=n(480),o=n(223),s=n(817),l=(n(1),n(25)),d=n(13),j=n(451),u=n.n(j),b=n(450),m=n.n(b),p=n(14),h=n(784),x=n(141),O=n.n(x),f=(n(22),n(0));Object(h.a)(c||(c=Object(p.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));var g=function(e){let{competition:t}=e;return Object(f.jsx)(r.a,{title:"Update Stream",children:Object(f.jsx)(s.a,{color:"inherit",onClick:()=>{!async function(e){const t=JSON.stringify({model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"}]},payload:{competitionId:e.id,competitionName:e.shortName,eventName:e.competitionEvents[0].event.name,eventId:e.competitionEvents[0].event.id}});var n=new Headers;n.append("Content-Type","application/json"),fetch("https://app.singular.live/apiv1/datanodes/2Gtu4VucUktNoXOdJgAKd2/data",{method:"PUT",headers:n,body:t,redirect:"follow"}).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e)))}(t),console.log(t)},size:"large",children:Object(f.jsx)(O.a,{})})})};t.a=function(e){let{competition:t,onMenuClick:n}=e;const c=Object(l.f)();return Object(f.jsxs)(i.a,{children:[Object(f.jsx)(s.a,{color:"inherit",sx:{ml:"-12px",mr:"20px",display:{lg:"none"}},onClick:n,"aria-label":"Menu",size:"large",children:Object(f.jsx)(m.a,{})}),Object(f.jsx)(o.a,{variant:"h6",color:"inherit",sx:{flexGrow:1,color:"inherit",textDecoration:"none"},noWrap:!0,component:d.b,to:"/competitions/".concat(t.id),children:t.shortName}),Object(f.jsx)(a.a,{sx:{flexGrow:1}}),Object(f.jsx)(g,{competition:t}),t.access.canScoretake&&Object(f.jsx)(r.a,{title:"Admin view",children:Object(f.jsx)(s.a,{color:"inherit",component:d.b,to:"/admin".concat(c.pathname),size:"large",children:Object(f.jsx)(u.a,{})})})]})}},688:function(e,t,n){"use strict";n.r(t);n(502);var c=n(1),i=n.n(c),r=n(413),a=n(13),o=n(780),s=n(85),l=n(778),d=n(174),j=n(785),u=n(218),b=n(762),m=n(786),p=n(783),h=n(799),x=n(423),O=n(150),f=n(325),g=n(178),v=n(465);const y={};function w(e){return"wca-live:".concat(e)}const C="token";function I(){return function(e){if(e in y)return y[e];const t=localStorage.getItem(w(e));return y[e]=t,t}(C)}function k(e){var t,n;n=e,y[t=C]=n,localStorage.setItem(w(t),n)}function S(){var e;delete y[e=C],localStorage.removeItem(w(e))}const E=new j.a({uri:"https://live.worldcubeassociation.org/api",credentials:"same-origin"}),A=new h.a({delay:{initial:2e3},attempts:{max:2}}),P=Object(x.a)(((e,t)=>{let{headers:n}=t;const c=I();return c?{headers:{...n,authorization:"Bearer ".concat(c)}}:{headers:n}})),T=u.a.from([P,A,E]),N=new f.a("wss://".concat(window.location.host,"/socket")),R=g.a(N),D=Object(v.a)(R),F=Object(b.a)((e=>{let{query:t}=e;const n=Object(O.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),D,T),M=new m.a({typePolicies:{Country:{keyFields:["iso2"]},CompetitionBrief:{keyFields:["wcaId"]},Competition:{fields:{access:{merge:(e,t)=>({...e,...t})}}}}}),W=new p.a({cache:M,link:F,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}});var z=n(703),B=n(464),V=n(796),$=n(147),U=n(414),L=n(765),H=n(0);const q={light:Object(B.a)({palette:{primary:{main:$.a[700]},secondary:{main:U.a[900]}}}),dark:Object(B.a)({palette:{mode:"dark",primary:{main:$.a[200]},secondary:{main:L.a.A400}}})},G={light:$.a[700],dark:U.a[900]},_=Object(c.createContext)();function J(){return localStorage.getItem("themeType")}function Q(e){let{children:t}=e;const n=Object(z.a)("(prefers-color-scheme: dark)")?"dark":"light",i=Object(c.useMemo)(J,[]),[r,a]=Object(c.useState)(i||n),o=Object(c.useCallback)((()=>{a((e=>"light"===e?"dark":"light"))}),[]);return Object(c.useEffect)((()=>{!function(e){localStorage.setItem("themeType",e)}(r);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",G[r])}),[r]),Object(H.jsx)(V.a,{theme:q[r],children:Object(H.jsx)(_.Provider,{value:o,children:t})})}var Y=n(779),Z=n(25),X=n(14),K=n(784),ee=n(469),te=n(800),ne=n(757),ce=n(813);var ie,re=function(){return Object(H.jsx)(ne.a,{in:!0,style:{transitionDelay:"800ms"},children:Object(H.jsx)(ce.a,{sx:{position:"absolute",left:0,right:0,top:0}})})},ae=n(22),oe=n(814),se=n(824),le=n(816),de=n(815),je=n(801),ue=n(835),be=n(767),me=n(477),pe=n(766),he=n(262);function xe(){const{enqueueSnackbar:e}=Object(d.b)();return Object(c.useCallback)((t=>{const n=Object(he.a)(t);e(n,{variant:"error"})}),[e])}const Oe=Object(K.a)(ie||(ie=Object(X.a)(["\n  mutation OpenRound($input: OpenRoundInput!) {\n    openRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var fe,ge=function(e){let{round:t,competitionEvent:n}=e;const c=Object(s.b)(),i=xe(),[r,{loading:a}]=Object(pe.a)(Oe,{variables:{input:{id:t.id}},onError:i});return Object(H.jsx)(me.a,{size:"small",onClick:function(){const e=n.rounds.find((e=>e.number===t.number-1));e&&!e.finished?c({description:"\n          There are some missing results in the previous round.\n          Opening this round will permanently remove them.\n        "}).then(r):r()},disabled:a,children:"Open"})};const ve=Object(K.a)(fe||(fe=Object(X.a)(["\n  mutation ClearRound($input: ClearRoundInput!) {\n    clearRound(input: $input) {\n      round {\n        id\n        open\n      }\n    }\n  }\n"])));var ye=function(e){let{round:t,competitionEvent:n}=e;const c=Object(s.b)(),i=xe(),[r,{loading:a}]=Object(pe.a)(ve,{variables:{input:{id:t.id}},onError:i});return Object(H.jsx)(me.a,{size:"small",onClick:function(){c({description:"\n        This will irreversibly remove all results\n        from ".concat(n.event.name," - ").concat(t.name,".\n      ")}).then(r)},disabled:a,children:"Clear"})};function we(e,t){const n=t.rounds.find((t=>t.number===e.number-1));return!e.open&&(!n||n.open)}function Ce(e,t){const n=t.rounds.find((t=>t.number===e.number+1));return e.open&&(!n||!n.open)}var Ie=function(e){let{round:t,competitionEvent:n,competitionId:c}=e;return Object(H.jsxs)(je.a,{button:!0,component:a.b,to:"/admin/competitions/".concat(c,"/rounds/").concat(t.id),disabled:!t.open,children:[Object(H.jsx)(be.a,{primary:t.name}),Object(H.jsxs)(ue.a,{children:[we(t,n)&&Object(H.jsx)(ge,{round:t,competitionEvent:n}),Ce(t,n)&&Object(H.jsx)(ye,{round:t,competitionEvent:n})]})]},t.id)},ke=n(86);var Se,Ee=function(e){let{competitionEvent:t,competitionId:n}=e;return Object(H.jsxs)(oe.a,{style:{height:"100%"},children:[Object(H.jsx)(de.a,{avatar:Object(H.jsx)(ke.a,{eventId:t.event.id}),title:t.event.name}),Object(H.jsx)(se.a,{style:{padding:0},children:Object(H.jsx)(le.a,{dense:!0,children:t.rounds.map((e=>Object(H.jsx)(Ie,{round:e,competitionEvent:t,competitionId:n},e.id)))})})]})};const Ae=Object(K.a)(Se||(Se=Object(X.a)(["\n  query CompetitionEvents($id: ID!) {\n    competition(id: $id) {\n      id\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          name\n          open\n          finished\n        }\n      }\n    }\n  }\n"])));var Pe,Te=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Ae,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:{competitionEvents:i}}=t;return Object(H.jsx)(te.a,{container:!0,spacing:2,direction:"row",children:i.map((t=>Object(H.jsx)(te.a,{item:!0,xs:12,md:4,children:Object(H.jsx)(Ee,{competitionEvent:t,competitionId:e})},t.id)))})},Ne=n(809),Re=n(769),De=n(818),Fe=n(789),Me=n(223),We=n(426),ze=n.n(We),Be=n(264),Ve=n.n(Be),$e=n(427),Ue=n.n($e),Le=n(428),He=n.n(Le),qe=n(468),Ge=n(768);const _e=Object(K.a)(Pe||(Pe=Object(X.a)(["\n  mutation Synchronize($input: SynchronizeInput!) {\n    synchronizeCompetition(input: $input) {\n      competition {\n        id\n        synchronizedAt\n      }\n    }\n  }\n"])));var Je=function(e){let{competitionId:t}=e;const n=xe(),[c,{loading:i}]=Object(pe.a)(_e,{variables:{input:{id:t}},onError:n});return Object(H.jsx)(me.a,{variant:"contained",disableElevation:!0,color:"primary",size:"large",onClick:c,disabled:i,children:"Synchronize"})};const Qe="https://www.worldcubeassociation.org",Ye="https://groupifier.jonatanklosko.com",Ze="https://scrambles-matcher.worldcubeassociation.org";function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat("").concat(e)}function Ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(Qe).concat(e)}function et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="";return"".concat(Ye).concat(e).concat(t)}function tt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="";return"".concat(Ze).concat(e).concat(t)}var nt;const ct=Object(K.a)(nt||(nt=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      synchronizedAt\n    }\n  }\n"])));var it=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(ct,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t;return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Je,{competitionId:i.id})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Me.a,{variant:"caption",component:"div",align:"center",children:["Last synchronized"," ",Object(H.jsx)(qe.a,{date:Object(Ge.a)(i.synchronizedAt)}),"."]})})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Synchronization"}),Object(H.jsx)(Me.a,{children:"\n          WCA Live is specifically designed to deal with competition results\n          and it relies on the WCA website to provide a lot of competition information\n          (like events, schedule and registered competitors). It is also meant to cooperate\n          with other tools that are dedicated to do specific tasks. Synchronization\n          is the process of getting the latest data from the WCA website, combining it\n          with the local changes (mostly results) and saving that data back to the WCA website,\n          so that other tools can use it.\n          "})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Fe.a,{severity:"info",children:"Always make sure to Synchronize before using any other tool if you want it to see\n          the newly entered results. If the tool modifies relevant competition data,\n          synchronize afterwards to see the changes reflected here."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ne.a,{children:Object(H.jsxs)(le.a,{dense:!0,children:[Object(H.jsx)(De.a,{sx:{backgroundColor:"inherit"},children:"WCA website"}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:Ke("/competitions/".concat(i.wcaId,"/events/edit")),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(ze.a,{})}),Object(H.jsx)(be.a,{primary:"Change round details",secondary:"Manage events and rounds on the WCA website."})]}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:Ke("/competitions/".concat(i.wcaId,"/registrations/add")),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Ve.a,{})}),Object(H.jsx)(be.a,{primary:"Add competitor",secondary:"Use a form on the WCA website to register someone during the competition (if applicable)."})]}),Object(H.jsx)(De.a,{sx:{backgroundColor:"inherit"},children:"Additional tools"}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:et("/competitions/".concat(i.wcaId)),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Ue.a,{})}),Object(H.jsx)(be.a,{primary:"Groupifier",secondary:"Manage competitor groups and print scorecards."})]}),Object(H.jsxs)(je.a,{button:!0,component:"a",href:tt(),target:"_blank",rel:"noopener noreferrer",children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(He.a,{})}),Object(H.jsx)(be.a,{primary:"Scrambles Matcher",secondary:"Use it after the competition to attach scrambles to rounds and proceed with results submission."})]})]})})})]})},rt=n(480),at=n(788),ot=n(819),st=n(825),lt=n(826),dt=n(830),jt=n(794),ut=n(827),bt=n(828),mt=n(829);const pt=[{role:"organizer",name:"Organizer",editable:!1},{role:"delegate",name:"Delegate",editable:!1},{role:"trainee-delegate",name:"Trainee delegate",editable:!1},{role:"staff-dataentry",name:"Scoretaker",editable:!0}];var ht,xt=function(e){let{staffMembers:t,onChange:n}=e;return Object(H.jsx)(st.a,{component:Ne.a,children:Object(H.jsxs)(lt.a,{children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{children:"Name"}),pt.map((e=>{let{role:t,name:n}=e;return Object(H.jsx)(mt.a,{children:n},t)}))]})}),Object(H.jsx)(dt.a,{children:t.map((e=>Object(H.jsxs)(bt.a,{sx:{"&:last-child td":{border:0}},children:[Object(H.jsx)(mt.a,{children:e.user.name}),pt.map((c=>{let{role:i,editable:r}=c;return Object(H.jsx)(mt.a,{padding:"checkbox",align:"center",children:Object(H.jsx)(jt.a,{disabled:!r,checked:e.roles.includes(i),onChange:()=>function(e,c){n(t.map((t=>{return t===e?{...t,roles:(n=t.roles,i=c,n.includes(i)?n.filter((e=>e!==i)):[...n,i])}:t;var n,i})))}(e,i)})},i)}))]},e.user.id)))})]})})},Ot=n(806),ft=n(797);function gt(e,t){const[n,i]=Object(c.useState)(e);return Object(c.useEffect)((()=>{const n=setTimeout((()=>{i(e)}),t);return()=>clearTimeout(n)}),[e,t]),n}const vt=Object(K.a)(ht||(ht=Object(X.a)(["\n  query Users($filter: String!) {\n    users(filter: $filter) {\n      id\n      name\n    }\n  }\n"])));var yt,wt=function(e){let{onChange:t,TextFieldProps:n={}}=e;const[i,r]=Object(c.useState)(""),a=gt(i,250),{data:o,loading:s}=Object(ee.b)(vt,{variables:{filter:a}}),l=o?o.users:[];return Object(H.jsx)(Ot.a,{clearOnBlur:!0,blurOnSelect:!0,options:l,getOptionLabel:e=>e.name,loading:s,onInputChange:function(e,t,n){"input"===n&&r(t)},value:null,onChange:function(e,n,c){"selectOption"===c&&t(n)},renderInput:e=>Object(H.jsx)(ft.a,{...e,...n})})};const Ct=Object(K.a)(yt||(yt=Object(X.a)(["\n  mutation UpdateCompetitionAccess($input: UpdateCompetitionAccessInput!) {\n    updateCompetitionAccess(input: $input) {\n      competition {\n        id\n        staffMembers {\n          id\n          user {\n            id\n          }\n          roles\n        }\n      }\n    }\n  }\n"])));function It(e){const{id:t,user:n,roles:c}=e;return{id:t,userId:n.id,roles:c}}function kt(e){return e.filter((e=>e.roles.length>0)).map(It)}var St,Et=function(e){let{competition:t}=e;const n=xe(),[i,r]=Object(c.useState)(t.staffMembers),[a,{loading:o}]=Object(pe.a)(Ct,{variables:{input:{id:t.id,staffMembers:kt(i)}},onError:n});return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Me.a,{children:"Delegates and organizers have full access to the competition.\n            Additionally, you can grant scoretaking access to any WCA Live user."})}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(xt,{staffMembers:i,onChange:r})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(wt,{onChange:function(e){if(null===e)return;if(i.some((t=>t.user.id===e.id)))return;const t={id:null,user:e,roles:[]};r([...i,t])},TextFieldProps:{label:"Add user",sx:{width:250},variant:"outlined",size:"small"}})}),Object(H.jsx)(te.a,{item:!0,sx:{mt:2},children:Object(H.jsx)(me.a,{variant:"contained",color:"primary",onClick:a,disabled:o,children:"Save"})})]})};const At=Object(K.a)(St||(St=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      staffMembers {\n        id\n        user {\n          id\n          name\n        }\n        roles\n      }\n    }\n  }\n"])));var Pt=function(){const{competitionId:e}=Object(Z.h)(),[t,n]=Object(c.useState)("access"),{data:i,loading:r,error:a}=Object(ee.b)(At,{variables:{id:e}});if(r&&!i)return Object(H.jsx)(re,{});if(a)return Object(H.jsx)(ae.a,{error:a});const{competition:o}=i;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(at.a,{indicatorColor:"secondary",textColor:"inherit",value:t,onChange:(e,t)=>n(t),children:Object(H.jsx)(ot.a,{label:"Access",value:"access"})}),Object(H.jsx)(rt.a,{sx:{mt:2},children:"access"===t&&Object(H.jsx)(Et,{competition:o})})]})},Tt=n(817),Nt=n(430),Rt=n.n(Nt),Dt=n(431),Ft=n.n(Dt),Mt=n(820),Wt=n(429),zt=n.n(Wt);const Bt=["d","D","/"],Vt=["s","S","*"];var $t=n(20);const Ut=-1,Lt=-2;function Ht(e){return e>0}function qt(e){return 0===e}function Gt(e,t){return Ht(e)||Ht(t)?!Ht(e)&&Ht(t)?1:Ht(e)&&!Ht(t)?-1:e-t:0}function _t(e){return 0===e.length?[]:0===e[e.length-1]?_t(e.slice(0,-1)):e}function Jt(e){const t=e.filter((e=>!qt(e))),n=e.filter(Ht);return 0===t.length?0:0===n.length?Math.max(...t):Math.min(...n)}function Qt(e,t){if(!t)throw new Error("Missing argument: eventId");if("333mbf"===t)return 0;if(e.some(qt))return 0;if("333fm"===t){const t=e.map((e=>100*e));switch(e.length){case 3:return Xt(t);case 5:return Zt(t);default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}switch(e.length){case 3:return Yt(Xt(e));case 5:return Yt(Zt(e));default:throw new Error("Invalid number of attempt results, expected 3 or 5, given ".concat(e.length,"."))}}function Yt(e){return Ht(e)?e<=6e4?e:100*Math.round(e/100):e}function Zt(e){const[,t,n,c]=e.slice().sort(Gt);return Xt([t,n,c])}function Xt(e){return e.every(Ht)?function(e,t,n){return Math.round((e+t+n)/3)}(...e):Ut}function Kt(e){if(e<=0)return{solved:0,attempted:0,centiseconds:e};const t=e%100,n=Math.floor(e/100)%1e5,c=99-Math.floor(e/1e7)%100+t;return{solved:c,attempted:c+t,centiseconds:99999===n?null:100*n}}function en(e){let{solved:t,attempted:n,centiseconds:c}=e;if(c<=0)return c;const i=n-t;return 1e7*(99-(t-i))+100*Math.round((c||9999900)/100)+i}function tn(e){if(!Number.isFinite(e))throw new Error("Invalid centiseconds, expected positive number, got ".concat(e,"."));return new Date(10*e).toISOString().substr(11,11).replace(/^[0:]*(?!\.)/g,"")}function nn(e,t){return 0===e?"":e===Ut?"DNF":e===Lt?"DNS":"333mbf"===t?function(e){const{solved:t,attempted:n,centiseconds:c}=Kt(e),i=tn(c).replace(/\.00$/,"");return"".concat(t,"/").concat(n," ").concat(i)}(e):"333fm"===t?function(e){return e>=1e3?(e/100).toFixed(2):e.toString()}(e):tn(e)}function cn(e,t){if(!t)return!0;const{numberOfAttempts:n,attemptResult:c}=t;return e.slice(0,n).some((e=>e>0&&e<c))}var rn=function(e){let{value:t,onChange:n,label:i,disabled:r,TextFieldProps:a={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(t);return o!==t&&(d(t),s(t)),Object(H.jsx)(ft.a,{...a,label:i,disabled:r,spellCheck:!1,value:(j=l,0===j?"":j===Ut?"DNF":j===Lt?"DNS":j.toString()),onChange:function(e){const t=e.nativeEvent.data;if(Bt.includes(t))d(Ut);else if(Vt.includes(t))d(Lt);else{const t=Object($t.l)(e.target.value.replace(/\D/g,""))||0;d(t)}},onBlur:function(){var e;n((e=l)>80?Ut:e),d(t)}});var j};function an(e){if(""===e)return 0;if("DNF"===e)return Ut;if("DNS"===e)return Lt;const t=Object($t.l)(e.replace(/\D/g,""))||0;return 36e4*Math.floor(t/1e6)+6e3*Math.floor(t%1e6/1e4)+100*Math.floor(t%1e4/100)+t%100}function on(e){return 0===e?"":e===Ut?"DNF":e===Lt?"DNS":tn(e)}var sn=function(e){let{value:t,onChange:n,label:i,disabled:r,TextFieldProps:a={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(on(t));return o!==t&&(d(on(t)),s(t)),Object(H.jsx)(ft.a,{...a,label:i,disabled:r,spellCheck:!1,value:l,onChange:function(e){const t=e.nativeEvent.data;Bt.includes(t)?d("DNF"):Vt.includes(t)?d("DNS"):d(function(e){const t=Object($t.l)(e.replace(/\D/g,""))||0;if(0===t)return"";const n="00000000"+t.toString().slice(0,8),[,c,i,r,a]=n.match(/(\d\d)(\d\d)(\d\d)(\d\d)$/);return"".concat(c,":").concat(i,":").concat(r,".").concat(a).replace(/^[0:]*(?!\.)/g,"")}(e.target.value))},onBlur:function(){const e=(c=l)===on(an(c))?Yt(an(l)):0;var c;n(e),d(on(t))}})};var ln=function(e){let{value:t,onChange:n,label:i,disabled:r,TextFieldProps:a={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(t);return o!==t&&(d(t),s(t)),Object(H.jsx)(ft.a,{...a,label:i,disabled:r,spellCheck:!1,value:(j=l,0===j?"":j.toString()),onChange:function(e){const t=Object($t.l)(e.target.value.replace(/\D/g,""))||0;t<=99&&d(t)},onBlur:function(){n(l),d(t)}});var j};var dn=function(e){let{value:t,onChange:n,disabled:i,label:r,TextFieldProps:a={}}=e;const[o,s]=Object(c.useState)(t),[l,d]=Object(c.useState)(Kt(t));function j(e){const c=function(e){let{attempted:t,solved:n,centiseconds:c}=e;return!t||n>t?{solved:n,attempted:n,centiseconds:c}:n<t/2||n<=1||c>6e4*Math.min(6,t)+3e3?{solved:0,attempted:0,centiseconds:Ut}:{solved:n,attempted:t,centiseconds:c}}(e);en(c)!==t?(n(en(c)),d(Kt(t))):d(c)}return o!==t&&(d(Kt(t)),s(t)),Object(H.jsxs)(te.a,{container:!0,direction:"row",spacing:1,onInputCapture:function(e){const t=e.nativeEvent.data;Bt.includes(t)?(j(Kt(Ut)),e.preventDefault()):Vt.includes(t)&&(j(Kt(Lt)),e.preventDefault())},children:[Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(ln,{value:l.solved,onChange:e=>j({...l,solved:e}),disabled:i,TextFieldProps:a})}),Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(ln,{value:l.attempted,onChange:e=>j({...l,attempted:e}),disabled:i,TextFieldProps:a})}),Object(H.jsx)(te.a,{item:!0,xs:8,children:Object(H.jsx)(sn,{label:r,value:l.centiseconds,onChange:e=>j({...l,centiseconds:e}),disabled:i,TextFieldProps:a})})]})};var jn=function(e){let{eventId:t,...n}=e;return"333fm"===t?Object(H.jsx)(rn,{...n}):"333mbf"===t?Object(H.jsx)(dn,{...n}):Object(H.jsx)(sn,{...n})};function un(e){return Array.from(e.querySelectorAll("input, button")).filter((e=>!e.disabled))}function bn(e){return"".concat(e.name," (").concat(e.registrantId,")")}var mn=function(e){let{persons:t,value:n,onChange:c,TextFieldProps:i={}}=e;return Object(H.jsx)(Ot.a,{options:t,getOptionLabel:bn,value:n,onChange:function(e,t,n){"selectOption"===n&&c(t)},forcePopupIcon:!1,disableClearable:!0,autoHighlight:!0,filterOptions:(e,t)=>{let{inputValue:n}=t;return function(e,t){const n=t.trim().toLowerCase();if(!n)return e;const c=e.find((e=>e.registrantId===Object($t.l)(n)));if(c)return[c];const i=e.filter((e=>e.name.toLowerCase().startsWith(n))),r=e.filter((e=>e.name.toLowerCase().includes(n)));return Object($t.m)([...i,...r]).slice(0,5)}(e,n)},renderInput:e=>Object(H.jsx)(ft.a,{...e,label:"Competitor",spellCheck:!1,placeholder:"Type ID or name",...i,inputProps:{...e.inputProps,...i.inputProps||{}}})})};var pn=function(e){let{results:t,value:n,onChange:i,TextFieldProps:r={}}=e;const a=Object(c.useMemo)((()=>t.map((e=>e.person)).sort(((e,t)=>e.name.localeCompare(t.name)))),[t]);return Object(H.jsx)(mn,{persons:a,value:n?a.find((e=>e.id===n.person.id)):null,onChange:e=>{i(e?t.find((t=>t.person.id===e.id)):null)},TextFieldProps:r})};function hn(e,t){return e?"333mbf"===t?"".concat(function(e){const{solved:t,attempted:n}=Kt(e);return t-(n-t)}(e.attemptResult)," points"):"333fm"===t?"".concat(e.attemptResult," moves"):tn(e.attemptResult):"None"}function xn(e,t){if(["333mbf","333fm"].includes(t))return"Regulated";const{centiseconds:n,cumulativeRoundWcifIds:c}=e,i=tn(n);return 0===c.length?i:1===c.length?"".concat(i," in total"):"".concat(i," total for ").concat(c.join(", "))}function On(e,t){const{numberOfAttempts:n,sortBy:c}=t;if(!fn(e,t))return[{name:"Best",field:"best",recordTagField:"singleRecordTag"}];const i=[{name:"Best",field:"best",recordTagField:"singleRecordTag"},{name:3===n?"Mean":"Average",field:"average",recordTagField:"averageRecordTag"}];return"best"===c?i:i.reverse()}function fn(e,t){return"333mbf"!==e&&[3,5].includes(t.numberOfAttempts)}function gn(e,t){return function(e,t){return Object($t.k)(t,(t=>t<e.length?e[t]:0))}(e.attempts.map((e=>e.result)),t)}var vn,yn,wn=function(e){let{result:t,results:n,onResultChange:i,eventId:r,format:a,timeLimit:o,cutoff:l,onSubmit:d,disabled:j=!1,focusOnResultChange:u=!1}=e;const b=Object(s.b)(),{numberOfAttempts:m}=a,p=Object(c.useMemo)((()=>Object($t.k)(m,(()=>0))),[m]),[h,x]=Object(c.useState)(p),O=Object(c.useRef)(null);var f;f=O,Object(c.useEffect)((()=>{const e=f.current;function t(t){if(!["ArrowUp","ArrowDown","Enter","Tab","Escape"].includes(t.key))return;if("Escape"===t.key)return void(t.target.blur&&t.target.blur());const n=Boolean(e.querySelector('.MuiAutocomplete-root[aria-expanded="true"]'));if(!["ArrowUp","ArrowDown","Enter"].includes(t.key)||!n){if(["ArrowUp","ArrowDown"].includes(t.key)&&(t.preventDefault(),t.stopPropagation()),"INPUT"===t.target.tagName&&"attempt-result"===t.target.dataset.type&&t.target.blur(),"Tab"===t.key&&"result-select"===t.target.dataset.type)return t.preventDefault(),t.stopPropagation(),void t.target.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter"}));"Tab"!==t.key&&setTimeout((()=>{const n=un(e),c=n.findIndex((e=>t.target===e));if(-1===c)return;const i=e=>(e+n.length)%n.length;if("ArrowUp"===t.key){const e=n[i(c-1)];e.focus(),e.select&&e.select()}else if("ArrowDown"===t.key||"INPUT"===t.target.tagName&&"Enter"===t.key){const e=n[i(c+1)];e.focus(),e.select&&e.select()}}),0)}}return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}),[f]),Object(c.useEffect)((()=>{const e=f.current;function t(t){if(["ArrowUp","ArrowDown","Enter"].includes(t.key)&&t.target===document.body){t.preventDefault();const[n]=un(e);n&&(n.focus(),n.select())}}return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[f]),Object(c.useEffect)((()=>{x(t?gn(t,m):p)}),[t,m,p]),Object(c.useEffect)((()=>{if(!u)return;const[e,n]=O.current.getElementsByTagName("input");t?setTimeout((()=>{n.focus(),n.select()}),0):e.focus()}),[t,u]);const g=cn(h,l)?m:l.numberOfAttempts;function v(e,t){const n=Object($t.j)(h,e,t);x(function(e,t){return cn(e,t)?e:e.map(((e,n)=>n<t.numberOfAttempts?e:0))}(function(e,t){if(null===t)return e;if(0===t.cumulativeRoundWcifIds.length)return e.map((e=>e>=t.centiseconds?Ut:e));{const[n]=e.reduce(((e,n)=>{let[c,i]=e;const r=n>0?i+n:i,a=n>0&&r>=t.centiseconds?Ut:n;return[c.concat(a),r]}),[[],0]);return n}}(n,o),l))}return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:1,ref:O,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Me.a,{variant:"body2",children:["Time limit: ",xn(o,r)]})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Me.a,{variant:"body2",children:["Cutoff: ",hn(l,r)]})}),Object(H.jsx)(te.a,{item:!0,sx:{my:2},children:Object(H.jsx)(pn,{results:n,value:t,onChange:i,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined",inputProps:{"data-type":"result-select"}}})}),h.map(((e,n)=>Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(jn,{eventId:r,label:"Attempt ".concat(n+1),disabled:!t||j||n>=g,value:e,onChange:e=>v(n,e),TextFieldProps:{fullWidth:!0,variant:"outlined",inputProps:{"data-type":"attempt-result"}}})},n))),Object(H.jsxs)(te.a,{item:!0,container:!0,children:[Object(H.jsx)(te.a,{item:!0,xs:!0,children:Object(H.jsxs)(Me.a,{variant:"body2",children:["Best: ",nn(Jt(h),r)]})}),fn(r,a)&&Object(H.jsx)(te.a,{item:!0,xs:!0,children:Object(H.jsxs)(Me.a,{variant:"body2",children:["Average:"," ",nn(Qt(h,r),r)]})})]}),Object(H.jsxs)(te.a,{item:!0,container:!0,alignItems:"flex-end",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{type:"submit",variant:"outlined",color:"primary",disabled:!t||j,onClick:function(){(function(){const e=function(e,t){const n=_t(e).indexOf(0);if(-1!==n)return"You've omitted attempt ".concat(n+1,". Make sure it's intentional.");if("333mbf"===t){const t=e.findIndex((e=>{const{attempted:t,centiseconds:n}=Kt(e);return e>0&&n/t<3e3}));if(-1!==t)return"\n        The result you're trying to submit seems to be impossible:\n        attempt ".concat(t+1," is done in\n        less than 30 seconds per cube tried.\n        If you want to enter minutes, don't forget to add two zeros\n        for centiseconds at the end of the score.\n      ")}else{const n=e.filter(Ht);if(n.length>0){const e=Math.min(...n),c=Math.max(...n);if(c>4*e)return"\n          The result you're trying to submit seem to be inconsistent.\n          There's a big difference between the best single\n          (".concat(nn(e,t),") and the worst single\n          (").concat(nn(c,t),").\n          Please check that the results are accurate.\n        ")}}return null}(h,r);return e?b({description:e,confirmationText:"Submit"}):Promise.resolve()})().then((()=>{const e=_t(h).map((e=>({result:e})));d(e)}))},children:"Submit"})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Mt.a,{title:Object(H.jsxs)("div",{children:["Key bindings:",Object(H.jsx)("div",{children:"/ or d - DNF"}),Object(H.jsx)("div",{children:"* or s - DNS"}),Object(H.jsx)("div",{children:"Up, Down, Enter - navigation"})]}),children:Object(H.jsx)(zt.a,{sx:{verticalAlign:"middle"},color:"action"})})})]})]})};const Cn=Object(K.a)(vn||(vn=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        attempts {\n          result\n        }\n        person {\n          id\n          name\n          registrantId\n        }\n        enteredAt\n      }\n    }\n  }\n"]))),In=Object(K.a)(yn||(yn=Object(X.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        attempts {\n          result\n        }\n      }\n    }\n  }\n"])));var kn=function(){const e=xe(),{roundId:t}=Object(Z.h)(),[n,i]=Object(c.useState)(0),r=Object(c.useRef)(null),a=Object(c.useRef)(null);Object(c.useEffect)((()=>{function e(e){"INPUT"!==e.target.tagName.toUpperCase()&&("ArrowLeft"===e.key?r.current.click():"ArrowRight"===e.key&&a.current.click())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const{data:o,loading:s,error:l}=Object(ee.b)(Cn,{variables:{id:t}}),[d,{error:j}]=Object(pe.a)(In,{onCompleted:()=>{a.current.focus()},onError:e});if(s&&!o)return Object(H.jsx)(re,{});if(l)return Object(H.jsx)(ae.a,{error:l});const{round:u}=o,b=Object($t.h)(u.results,(e=>-Object(Ge.a)(e.enteredAt))),m=Math.round((n+1)/b.length*100);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ce.a,{variant:"determinate",value:m,sx:{position:"absolute",top:0,left:0,right:0}}),Object(H.jsxs)(Me.a,{variant:"subtitle1",align:"right",children:[n+1," of ",b.length]}),Object(H.jsxs)(te.a,{container:!0,direction:"row",alignItems:"center",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(H.jsx)(Tt.a,{ref:r,onClick:()=>i(n-1),disabled:0===n,size:"large",children:Object(H.jsx)(Rt.a,{})})}),Object(H.jsx)(te.a,{item:!0,md:3,children:Object(H.jsx)(wn,{result:b[n],results:u.results,onResultChange:function(e){null!==e&&i(b.indexOf(e))},eventId:u.competitionEvent.event.id,format:u.format,timeLimit:u.timeLimit,cutoff:u.cutoff,disabled:j,onSubmit:function(e){d({variables:{input:{id:b[n].id,attempts:e}}})}})}),Object(H.jsx)(te.a,{item:!0,md:!0,sx:{textAlign:"center"},children:Object(H.jsx)(Tt.a,{ref:a,autoFocus:!0,onClick:()=>i(n+1),disabled:n===b.length-1,size:"large",children:Object(H.jsx)(Ft.a,{})})}),Object(H.jsxs)(te.a,{item:!0,md:5,children:[Object(H.jsxs)(Me.a,{variant:"h5",align:"center",children:[u.competitionEvent.event.name," - ",u.name]}),Object(H.jsx)(Me.a,{variant:"subtitle1",align:"center",gutterBottom:!0,children:"Double-check"}),Object(H.jsx)(Me.a,{align:"justify",children:"Here you can iterate over results ordered by entry time (newest first).\n              When doing double-check you can place a scorecard\n              next to the form to quickly compare attempt results.\n              For optimal experience make sure to always put entered/updated\n              scorecard at the top of the pile."})]})]})]})},Sn=n(807),En=n(149),An=n(148),Pn=n(773);const Tn={wr:{color:e=>e.palette.getContrastText(An.a[500]),backgroundColor:An.a[500]},cr:{color:e=>e.palette.getContrastText(Pn.a[500]),backgroundColor:Pn.a[500]},nr:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},pb:{color:e=>e.palette.getContrastText($.a[700]),backgroundColor:$.a[700]}};var Nn=function(e){let{recordTag:t,sx:n}=e;return Object(H.jsx)(rt.a,{component:"span",sx:{display:"block",lineHeight:1,py:.8,px:1,borderRadius:1,fontWeight:600,fontSize:"0.7em",...n,...Tn[t.toLowerCase()]||{}},children:t})};var Rn=function(e){let{recordTag:t,hidePb:n=!1,children:c}=e;return!t||n&&"PB"===t?c:Object(H.jsxs)(rt.a,{component:"span",sx:{position:"relative"},children:[c,Object(H.jsx)(Nn,{recordTag:t,sx:{position:"absolute",top:0,right:0,transform:"translate(110%, -40%)",fontSize:"0.6em",py:"0.3em",px:"0.4em"}})]})};const Dn={ranking:{pr:2,width:50},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400}};function Fn(e,t,n){return null===t?e:e.slice().sort(((e,c)=>{if("registrantId"===t){const t=e.person.registrantId-c.person.registrantId;return"asc"===n?t:-t}if("name"===t){const t=e.person.name.localeCompare(c.person.name);return"asc"===n?t:-t}throw new Error("Unrecognized order rule: ".concat(t))}))}var Mn=i.a.memo((e=>{let{results:t,eventId:n,format:i,onResultClick:r}=e;const[a,o]=Object(c.useState)("asc"),[s,l]=Object(c.useState)(null);function d(e){s!==e?(l(e),o("asc")):"asc"===a?o("desc"):(l(null),o("asc"))}const j=On(n,i);return Object(H.jsxs)(lt.a,{size:"small",children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{align:"right",sx:Dn.ranking,children:"#"}),Object(H.jsx)(mt.a,{align:"right",children:Object(H.jsx)(Sn.a,{active:"registrantId"===s,direction:a,onClick:()=>d("registrantId"),children:"ID"})}),Object(H.jsx)(mt.a,{children:Object(H.jsx)(Sn.a,{active:"name"===s,direction:a,onClick:()=>d("name"),children:"Name"})}),Object($t.k)(i.numberOfAttempts,(e=>Object(H.jsx)(mt.a,{align:"right",children:e+1},e))),j.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:Fn(t,s,a).map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap",cursor:"pointer","&:last-child td":{border:0}},onClick:t=>r(e,t),children:[Object(H.jsx)(mt.a,{align:"right",sx:{...Dn.ranking,...e.advancing?Dn.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{align:"right",children:e.person.registrantId}),Object(H.jsx)(mt.a,{children:e.person.name}),gn(e,i.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",children:nn(e,n)},t))),j.map(((t,c)=>{let{name:i,field:r,recordTagField:a}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{fontWeight:0===c?600:400},children:Object(H.jsx)(Rn,{recordTag:e[a],hidePb:!0,children:nn(e[r],n)})},i)}))]},e.person.id)))})]})})),Wn=n(466),zn=n(831);var Bn,Vn=function(e){let{result:t,position:n,onClose:c,onEditClick:i,onQuitClick:r,onClearClick:o,competitionId:s}=e;return Object(H.jsx)(Ne.a,{children:Object(H.jsxs)(Wn.a,{open:Boolean(t&&n),onClose:c,anchorReference:"anchorPosition",anchorPosition:n,transformOrigin:{vertical:0,horizontal:"center"},MenuListProps:{subheader:Object(H.jsx)(De.a,{sx:{backgroundColor:"inherit"},children:t&&t.person.name})},children:[Object(H.jsx)(zn.a,{onClick:function(){i(t),c()},children:"Edit"}),Object(H.jsx)(zn.a,{component:a.b,to:"/competitions/".concat(s,"/competitors/").concat(t&&t.person.id),children:"Results"}),t&&t.attempts.length>0?Object(H.jsx)(zn.a,{onClick:function(){o(t),c()},children:"Clear"}):Object(H.jsx)(zn.a,{onClick:function(){r(t),c()},children:"Quit"})]})})},$n=n(433),Un=n.n($n),Ln=n(267),Hn=n.n(Ln),qn=n(709),Gn=n(711),_n=n(478),Jn=n(710),Qn=n(698),Yn=n(774);const Zn=Object(K.a)(Bn||(Bn=Object(X.a)(["\n  fragment adminRoundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      id\n      registrantId\n      name\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"])));var Xn,Kn;const ec=Object(K.a)(Xn||(Xn=Object(X.a)(["\n  query AdvancementCandidates($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      advancementCandidates {\n        qualifying {\n          id\n          name\n          registrantId\n        }\n        revocable {\n          id\n          name\n          registrantId\n        }\n      }\n    }\n  }\n"]))),tc=Object(K.a)(Kn||(Kn=Object(X.a)(["\n  mutation AddPersonToRound($input: AddPersonToRoundInput!) {\n    addPersonToRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),Zn);var nc=function(e){let{open:t,onClose:n,roundId:i}=e;const r=xe(),[a,o]=Object(c.useState)(null),[s,{data:l,loading:d,error:j}]=Object(Yn.a)(ec,{variables:{roundId:i}});Object(c.useEffect)((()=>{t&&(s(),o(null))}),[t,s]);const[u,{loading:b}]=Object(pe.a)(tc,{variables:{input:{roundId:i,personId:a&&a.id}},onCompleted:m,onError:r});function m(){o(null),n()}return Object(H.jsxs)(qn.a,{open:t,onClose:m,children:[d&&Object(H.jsx)(re,{}),Object(H.jsx)(Qn.a,{children:"Add competitor"}),Object(H.jsxs)(_n.a,{children:[j&&Object(H.jsx)(ae.a,{error:j}),l&&(l.round.advancementCandidates.qualifying.length>0?Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Jn.a,{children:"You can add any competitor who qualifies for this round. This is a way to quickly register someone for the first round without going to the WCA website or to bring back a competitor you have quit before."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(mn,{persons:l.round.advancementCandidates.qualifying,value:a,onChange:o,TextFieldProps:{autoFocus:!0,fullWidth:!0,variant:"outlined"}})}),l.round.advancementCandidates.revocable.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Me.a,{color:"error",children:["This will also remove the following competitors from this round: ",Object(H.jsx)("span",{style:{fontWeight:500},children:l.round.advancementCandidates.revocable.map((e=>e.name)).join(", ")})]})})]}):Object(H.jsx)(Jn.a,{children:"No one else qualifies to this round."}))]}),Object(H.jsxs)(Gn.a,{children:[Object(H.jsx)(me.a,{onClick:m,children:"Cancel"}),Object(H.jsx)(me.a,{onClick:u,color:"primary",disabled:!a||b,children:"Confirm"})]})]})};function cc(e){const t=e.results.filter((e=>e.attempts.length>0));return"".concat(t.length," of ").concat(e.results.length," entered")}var ic,rc,ac=function(e){let{round:t,competitionId:n}=e;const[i,r]=Object(c.useState)(!1);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsxs)(Me.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]}),Object(H.jsx)(Me.a,{variant:"body2",color:"textSecondary",children:cc(t)})]}),Object(H.jsx)(te.a,{item:!0,style:{flexGrow:1}}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Mt.a,{title:"PDF",placement:"top",children:Object(H.jsx)(Tt.a,{component:"a",target:"_blank",href:Xe("/pdf/rounds/".concat(t.id)),size:"large",children:Object(H.jsx)(Hn.a,{})})}),Object(H.jsx)(Mt.a,{title:"Add competitor",placement:"top",children:Object(H.jsx)(Tt.a,{onClick:()=>r(!0),size:"large",children:Object(H.jsx)(Ve.a,{})})}),Object(H.jsx)(Mt.a,{title:"Double-check",placement:"top",children:Object(H.jsx)(Tt.a,{component:a.b,to:"/admin/competitions/".concat(n,"/rounds/").concat(t.id,"/doublecheck"),size:"large",children:Object(H.jsx)(Un.a,{})})})]})]}),Object(H.jsx)(nc,{open:i,onClose:()=>r(!1),roundId:t.id})]})},oc=n(808),sc=n(837),lc=n(790);const dc=Object(K.a)(ic||(ic=Object(X.a)(["\n  query NextQualifying($roundId: ID!) {\n    round(id: $roundId) {\n      id\n      nextQualifying {\n        id\n        name\n      }\n    }\n  }\n"]))),jc=Object(K.a)(rc||(rc=Object(X.a)(["\n  mutation RemovePersonFromRound($input: RemovePersonFromRoundInput!) {\n    removePersonFromRound(input: $input) {\n      round {\n        id\n        results {\n          id\n          ...adminRoundResult\n        }\n      }\n    }\n  }\n  ","\n"])),Zn);var uc,bc=e=>{let{open:t,onClose:n,competitor:i,roundId:r}=e;const a=xe(),[o,s]=Object(c.useState)(""),[l,{data:d,loading:j,error:u}]=Object(Yn.a)(dc,{variables:{roundId:r}});Object(c.useEffect)((()=>{t&&(l(),s(""))}),[t,l]);const[b,{loading:m}]=Object(pe.a)(jc,{variables:{input:{roundId:r,personId:i&&i.id,replace:"yes"===o}},onCompleted:n,onError:a});return Object(H.jsxs)(qn.a,{open:t,onClose:n,children:[j&&Object(H.jsx)(re,{}),Object(H.jsxs)(Qn.a,{children:["Quit ",i&&i&&i.name]}),Object(H.jsxs)(_n.a,{children:[u&&Object(H.jsx)(ae.a,{error:u}),d&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Jn.a,{children:["Going to permanently remove ",i&&i.name," from this round. Are you sure you want to proceed?"]}),Object(H.jsxs)(oc.a,{value:o,onChange:e=>s(e.target.value),children:[d.round.nextQualifying.length>0&&Object(H.jsx)(sc.a,{control:Object(H.jsx)(lc.a,{}),value:"yes",label:"\n                    Yes, remove ".concat(i&&i.name,"\n                    and replace they with other qualifying competitors:\n                    ").concat(d.round.nextQualifying.map((e=>{let{name:t}=e;return t})).join(", "),".\n                  ")}),Object(H.jsx)(sc.a,{control:Object(H.jsx)(lc.a,{}),value:"no",label:d.round.nextQualifying.length>0?"Yes, just remove ".concat(i&&i.name," and don't replace them."):"Yes, remove ".concat(i&&i.name,".")})]})]})]}),Object(H.jsxs)(Gn.a,{children:[Object(H.jsx)(me.a,{onClick:n,children:"Cancel"}),Object(H.jsx)(me.a,{onClick:b,color:"primary",disabled:""===o||m,children:"Confirm"})]})]})};const mc=Object(K.a)(uc||(uc=Object(X.a)(["\n  mutation EnterResultAttempts($input: EnterResultAttemptsInput!) {\n    enterResultAttempts(input: $input) {\n      result {\n        id\n        round {\n          id\n          results {\n            id\n            ...adminRoundResult\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),Zn);var pc,hc=function(e){let{round:t,competitionId:n}=e;const i=Object(s.b)(),{enqueueSnackbar:r}=Object(d.b)(),a=xe(),[o,l]=Object(c.useState)(null),[j,u]=Object(c.useState)({}),[b,m]=Object(c.useState)(null),[p,{loading:h}]=Object(pe.a)(mc,{onCompleted:()=>{l(null)},onError:a}),x=Object(c.useCallback)(((e,t)=>{u({position:{left:t.clientX,top:t.clientY},result:e})}),[]),O=t.competitionEvent.rounds.find((e=>e.number===t.number+1)),f=O&&O.open;return Object(c.useEffect)((()=>{f&&r("The next round has already been open, any changes won't affect it!",{variant:"info"})}),[f,r]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"row",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,xs:12,md:3,children:Object(H.jsx)(wn,{result:o,results:t.results,onResultChange:l,eventId:t.competitionEvent.event.id,format:t.format,timeLimit:t.timeLimit,cutoff:t.cutoff,focusOnResultChange:!0,disabled:h,onSubmit:function(e){p({variables:{input:{id:o.id,attempts:e}}})}})}),Object(H.jsxs)(te.a,{item:!0,xs:12,md:9,container:!0,direction:"column",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(ac,{round:t,competitionId:n})}),Object(H.jsx)(te.a,{item:!0,sx:{maxWidth:"100%"},children:Object(H.jsx)(st.a,{component:Ne.a,sx:{pr:.5},children:Object(H.jsx)(Mn,{results:t.results,format:t.format,eventId:t.competitionEvent.event.id,onResultClick:x})})})]})]}),Object(H.jsx)(Vn,{...j,onClose:()=>u({}),onEditClick:e=>l(e),onQuitClick:e=>m(e.person),onClearClick:function(e){i({description:"This will clear all attempts of ".concat(e.person.name,".")}).then((()=>{p({variables:{input:{id:e.id,attempts:[]}}})}))},competitionId:n}),Object(H.jsx)(bc,{open:Boolean(b),onClose:()=>m(null),competitor:b,roundId:t.id})]})};const xc=Object(K.a)(pc||(pc=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      number\n      competitionEvent {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          number\n          open\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      timeLimit {\n        centiseconds\n        cumulativeRoundWcifIds\n      }\n      cutoff {\n        numberOfAttempts\n        attemptResult\n      }\n      results {\n        id\n        ...adminRoundResult\n      }\n    }\n  }\n  ","\n"])),Zn);var Oc=function(){const{competitionId:e,roundId:t}=Object(Z.h)(),{data:n,loading:c,error:i}=Object(ee.b)(xc,{variables:{id:t}});if(c&&!n)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(ae.a,{error:i});const{round:r}=n;return Object(H.jsx)(hc,{round:r,competitionId:e})},fc=n(793),gc=n(802),vc=n(821);var yc,wc=i.a.memo((e=>{let{competitors:t,competitionEvents:n,competitionId:i}=e;const[r,o]=Object(c.useState)(0),[s,l]=Object(c.useState)(10),[d,j]=Object(c.useState)("");const u=function(e,t){return t?e.filter((e=>{const n=[e.name,e.wcaId,e.country.name,e.registrantId.toString()];return t.toLowerCase().split(/\s+/).every((e=>n.some((t=>t&&t.toLowerCase().includes(e)))))})):e}(Object(c.useMemo)((()=>t.slice().sort(((e,t)=>e.name.localeCompare(t.name)))),[t]),d),b=u.slice(r*s,r*s+s);return Object(H.jsxs)(Ne.a,{children:[Object(H.jsx)(vc.a,{children:Object(H.jsx)(ft.a,{variant:"standard",label:"Search",value:d,onChange:function(e){j(e.target.value),o(0)}})}),Object(H.jsx)(st.a,{children:Object(H.jsxs)(lt.a,{size:"small",children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{align:"right",children:"#"}),Object(H.jsx)(mt.a,{children:"Name"}),Object(H.jsx)(mt.a,{children:"Country"}),Object(H.jsx)(mt.a,{children:"WCA ID"}),Object(H.jsx)(mt.a,{align:"center",colSpan:n.length,children:"Results"})]})}),Object(H.jsx)(dt.a,{children:b.map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(H.jsx)(mt.a,{align:"right",children:e.registrantId}),Object(H.jsx)(mt.a,{children:Object(H.jsx)(gc.a,{component:a.b,to:"/competitions/".concat(i,"/competitors/").concat(e.id),underline:"hover",children:e.name})}),Object(H.jsx)(mt.a,{children:e.country.name}),Object(H.jsx)(mt.a,{children:e.wcaId&&Object(H.jsx)(gc.a,{href:Ke("/persons/".concat(e.wcaId)),target:"_blank",underline:"hover",children:e.wcaId})}),n.map((t=>{const n=t.rounds[0].results.find((t=>t.person.id===e.id));return Object(H.jsx)(mt.a,{align:"center",sx:{opacity:n&&0===n.attempts.length?.5:1},padding:"none",children:n&&Object(H.jsx)(Mt.a,{title:n.attempts.length>0?"Competed":"Awaiting result",placement:"top",children:Object(H.jsx)("span",{children:Object(H.jsx)(ke.a,{eventId:t.event.id,small:!0})})})},t.id)}))]},e.id)))})]})}),Object(H.jsx)(fc.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:t.length,rowsPerPage:s,page:r,onPageChange:function(e,t){o(t)},onRowsPerPageChange:function(e){l(parseInt(e.target.value,10)),o(0)}})]})}));const Cc=Object(K.a)(yc||(yc=Object(X.a)(["\n  query Competitors($id: ID!) {\n    competition(id: $id) {\n      id\n      competitors {\n        id\n        registrantId\n        name\n        wcaId\n        country {\n          iso2\n          name\n        }\n      }\n      competitionEvents {\n        id\n        event {\n          id\n        }\n        rounds {\n          id\n          results {\n            id\n            person {\n              id\n            }\n            attempts {\n              result\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var Ic=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Cc,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Competitors"}),Object(H.jsx)(wc,{competitors:i.competitors,competitionEvents:i.competitionEvents,competitionId:i.id})]})},kc=n(712),Sc=n(438),Ec=n.n(Sc),Ac=n(437),Pc=n.n(Ac),Tc=n(435),Nc=n.n(Tc),Rc=n(434),Dc=n.n(Rc),Fc=n(436),Mc=n.n(Fc),Wc=n(269),zc=n.n(Wc);var Bc=function(e){let{competition:t}=e;const n=Object(Z.f)();return Object(H.jsxs)(vc.a,{sx:{justifyContent:{xs:"center",md:"flex-start"}},children:[Object(H.jsxs)(rt.a,{component:a.b,to:"/admin/competitions/".concat(t.id),sx:{color:"inherit",textDecoration:"none",display:{xs:"none",md:"unset"}},children:[Object(H.jsx)(Me.a,{variant:"h6",color:"inherit",component:"span",children:t.shortName}),Object(H.jsx)(Me.a,{variant:"overline",component:"span",sx:{ml:1},children:"Admin"})]}),Object(H.jsx)(rt.a,{sx:{flexGrow:1,display:{xs:"none",md:"unset"}}}),Object(H.jsx)(Mt.a,{title:"Events",children:Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id),size:"large",children:Object(H.jsx)(Dc.a,{})})}),t.access.canManage&&Object(H.jsx)(Mt.a,{title:"Synchronization",children:Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id,"/sync"),size:"large",children:Object(H.jsx)(Nc.a,{})})}),Object(H.jsx)(Mt.a,{title:"Competitors",children:Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id,"/competitors"),size:"large",children:Object(H.jsx)(zc.a,{})})}),t.access.canManage&&Object(H.jsx)(Mt.a,{title:"Settings",children:Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:"/admin/competitions/".concat(t.id,"/settings"),size:"large",children:Object(H.jsx)(Mc.a,{})})}),Object(H.jsx)(Mt.a,{title:"Public view",children:Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:n.pathname.replace(/^\/admin/,""),size:"large",children:Object(H.jsx)(Pc.a,{})})}),Object(H.jsx)(Mt.a,{title:"My competitions",children:Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:"/my-competitions",size:"large",children:Object(H.jsx)(Ec.a,{})})})]})};var Vc,$c=function(e){let{competition:t,children:n}=e;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(kc.a,{position:"sticky",children:Object(H.jsx)(Bc,{competition:t})}),Object(H.jsx)(rt.a,{sx:{position:"relative",p:3},children:n})]})};const Uc=Object(K.a)(Vc||(Vc=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      access {\n        canManage\n        canScoretake\n      }\n    }\n  }\n"])));var Lc=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Uc,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t;return i.access.canScoretake?Object(H.jsx)($c,{competition:i,children:Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(Te,{})}),i.access.canManage&&Object(H.jsx)(Z.b,{path:"sync",element:Object(H.jsx)(it,{})}),i.access.canManage&&Object(H.jsx)(Z.b,{path:"settings",element:Object(H.jsx)(Pt,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId/doublecheck",element:Object(H.jsx)(kn,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId",element:Object(H.jsx)(Oc,{})}),Object(H.jsx)(Z.b,{path:"competitors",element:Object(H.jsx)(Ic,{})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/admin/competitions/".concat(i.id)})})]})}):Object(H.jsx)(Z.a,{to:"/sign-in"})},Hc=n(823),qc=n(439),Gc=n.n(qc);var _c=function(e){let{room:t}=e;return Object(H.jsx)(Mt.a,{title:t.name,placement:"top",children:Object(H.jsx)(rt.a,{sx:{display:"inline-block",width:10,height:10,borderRadius:"100%",backgroundColor:t.color}})})};function Jc(e){if(e.startsWith("other-"))return{type:"other",id:e.replace(/^other-/,"")};{const t=e.match(/^(\w+)(?:-r(\d+))?(?:-g(\d+))?(?:-a(\d+))?$/);if(!t)throw new Error("Invalid activity code: '".concat(e,"'."));const[,n,c,i,r]=t;return{type:"official",eventId:n,roundNumber:c?parseInt(c,10):null,groupName:i||null,attemptNumber:r?parseInt(r,10):null}}}var Qc=n(803);const Yc="geolocation"in navigator;function Zc(e){return e*Math.PI/180}function Xc(e){const t=Object(Ge.a)(e.endTime);return Object(Qc.a)(new Date,t)>60}function Kc(e){const t=Object(Ge.a)(e.startTime);return Object(Qc.a)(t,new Date)>60}function ei(e){return!Xc(e)&&!Kc(e)}function ti(e){const t=e.venues.map((e=>e.country));return Object($t.m)(t.map((e=>e.iso2))).map((e=>t.find((t=>t.iso2===e))))}function ni(e,t){const{eventId:n,roundNumber:c}=Jc(t),i=e.find((e=>{let{event:t}=e;return t.id===n}));if(!i)return null;const r=i.rounds.find((e=>e.number===c));return r?{event:i.event,round:r}:null}async function ci(e){const{latitude:t,longitude:n}=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:c}=t.coords;e({latitude:n,longitude:c})}),t,{maximumAge:3e5})}));return Object($t.g)(e,(e=>{const c=e.venues.map((e=>function(e,t,n,c){const i=Zc(c-t)*Math.cos(Zc(e+n)/2),r=Zc(n-e);return 6371*Math.sqrt(i*i+r*r)}(t,n,e.latitude,e.longitude)));return Math.min(...c)}))}var ii=n(782),ri=n(775),ai=n(822),oi=n(792),si=n(776);function li(e,t){const[n,c,i]=Object(ii.a)(Object(Ge.a)(e),"d MMM yyyy").split(" "),[r,a,o]=Object(ii.a)(Object(Ge.a)(t),"d MMM yyyy").split(" ");return e===t?"".concat(c," ").concat(n,", ").concat(i):c===a&&i===o?"".concat(c," ").concat(n," - ").concat(r,", ").concat(o):i===o?"".concat(c," ").concat(n," - ").concat(a," ").concat(r,", ").concat(i):"".concat(c," ").concat(n,", ").concat(i," - ").concat(a," ").concat(r,", ").concat(o)}function di(e){return Object(ii.a)(Object(Ge.a)(e),"HH:mm")}function ji(e){return Object(ii.a)(Object(Ge.a)(e),"yyyy-MM-dd")}function ui(){const e=Object(oi.a)(Object(ai.a)(),{months:1});return Object(si.a)(e,{representation:"date"})}var bi=function(e){let{activityCode:t,activities:n,competitionEvents:c,competitionId:i}=e;const{attemptNumber:r}=Jc(t),{event:o,round:s}=ni(c,t),l=r?"".concat(o.name," - ").concat(s.name," (Attempt ").concat(r,")"):"".concat(o.name," - ").concat(s.name),d=Object($t.f)(n.map((e=>e.startTime))),j=Object($t.e)(n.map((e=>e.endTime))),u=Object(Ge.a)(j)-Object(Ge.a)(d),b=new Date-Object(Ge.a)(d),m=Math.round(Object($t.a)(b,0,u)/u*100);return Object(H.jsxs)(oe.a,{sx:{height:"100%",position:"relative"},children:[Object(H.jsx)(Hc.a,{component:a.b,to:"/competitions/".concat(i,"/rounds/").concat(s.id),disabled:!s.open,children:Object(H.jsx)(de.a,{avatar:Object(H.jsx)(ke.a,{eventId:o.id}),title:l})}),Object(H.jsx)(se.a,{children:Object(H.jsx)(te.a,{container:!0,spacing:1,children:n.map((e=>{return Object(H.jsxs)(te.a,{item:!0,xs:6,children:[Object(H.jsx)(_c,{room:e.room}),Object(H.jsx)(Me.a,{component:"span",variant:"body2",sx:{ml:1},children:(t=e.startTime,n=e.endTime,"".concat(di(t)," - ").concat(di(n)))})]},e.id);var t,n}))})}),0<m&&m<100&&Object(H.jsx)(ce.a,{variant:"determinate",value:m,sx:{position:"absolute",bottom:0,left:0,right:0}})]})};var mi,pi=function(e){let{venues:t,competitionEvents:n,competitionId:i}=e;const r=t.flatMap((e=>e.rooms)).flatMap((e=>e.activities.map((t=>({...t,room:e}))))).filter((e=>"official"===Jc(e.activityCode).type&&ni(n,e.activityCode))),a=Object($t.h)(r,(e=>e.startTime)),o=Object($t.m)(a.map((e=>ji(e.startTime)))),[s,l]=Object(c.useState)(function(e){const t=Object(ri.a)(Object(ai.a)(),e.map(Ge.a));return e[t]}(o)),d=a.filter((e=>ji(e.startTime)===s)),j=Object($t.d)(d,(e=>e.activityCode));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(at.a,{indicatorColor:"secondary",variant:"scrollable",textColor:"inherit",value:s,onChange:(e,t)=>l(t),sx:{mb:2},children:o.map((e=>{return Object(H.jsx)(ot.a,{label:(t=e,Object(ii.a)(Object(Ge.a)(t),"EEEE, MMM d")),value:e},e);var t}))}),Object(H.jsx)(te.a,{container:!0,spacing:1,children:Object.entries(j).map((e=>{let[t,c]=e;return Object(H.jsx)(te.a,{item:!0,xs:12,sm:6,lg:4,children:Object(H.jsx)(bi,{activityCode:t,activities:c,competitionEvents:n,competitionId:i})},t)}))})]})};const hi=Object(K.a)(mi||(mi=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      wcaId\n      name\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          active\n          open\n          number\n        }\n      }\n      venues {\n        id\n        name\n        country {\n          iso2\n          name\n        }\n        rooms {\n          id\n          name\n          color\n          activities {\n            id\n            activityCode\n            name\n            startTime\n            endTime\n          }\n        }\n      }\n    }\n  }\n"])));var xi=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(hi,{variables:{id:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t,r=ti(i),o=Object($t.b)(i.competitionEvents,(e=>e.rounds.filter((e=>e.active)).map((t=>[e,t]))));return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsxs)(Me.a,{variant:"h5",gutterBottom:!0,noWrap:!0,children:["Welcome to ",i.name,"!"]}),Object(H.jsxs)(Me.a,{children:["This competition takes place in\n            ".concat(1===r.length?r[0].name:"multiple countries",". Check out the "),Object(H.jsx)(gc.a,{href:Ke("/competitions/".concat(i.wcaId)),target:"_blank",underline:"hover",children:"WCA website"})," for more details on the competition."]})]}),o.length>0&&Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Active rounds"}),Object(H.jsx)(te.a,{container:!0,spacing:1,children:o.map((e=>{let[t,n]=e;return Object(H.jsx)(te.a,{item:!0,xs:12,sm:6,lg:4,children:Object(H.jsx)(oe.a,{children:Object(H.jsx)(Hc.a,{component:a.b,to:"/competitions/".concat(i.id,"/rounds/").concat(n.id),children:Object(H.jsx)(de.a,{avatar:Object(H.jsx)(ke.a,{eventId:t.event.id}),title:"".concat(t.event.name," - ").concat(n.name)})})})},n.id)}))})]}),Object(H.jsxs)(te.a,{item:!0,sx:{width:"100%"},children:[Object(H.jsxs)(te.a,{container:!0,alignContent:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Me.a,{variant:"h5",children:"Schedule"})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Mt.a,{title:"\n              All the dates and times below are displayed in your local timezone: ".concat(Intl.DateTimeFormat().resolvedOptions().timeZone,"\n              "),children:Object(H.jsx)(Gc.a,{color:"action"})})})]}),Object(H.jsx)(pi,{venues:i.venues,competitionEvents:i.competitionEvents,competitionId:i.id})]})]})},Oi=n(761),fi=n(443),gi=n.n(fi),vi=n(463);var yi=Object(vi.a)(i.a,{useCssModules:!1});const wi={cell:{fontSize:"1.5rem",pr:0,"&:last-child":{pr:4}},ranking:{width:75,pr:2},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},name:{width:"22%",overflow:"hidden",textOverflow:"ellipsis"},country:{width:50}},Ci={SHOWING:Symbol("showing"),SHOWN:Symbol("shown"),HIDING:Symbol("hiding")},Ii=1e4,ki=1e3,Si=1e3;function Ei(){return Math.floor((window.innerHeight-64-50)/63)}var Ai=function(e){let{results:t,format:n,eventId:i,title:r,exitUrl:o}=e;const[s,l]=Object(c.useState)(Ci.SHOWING),[d,j]=Object(c.useState)(0),u=On(i,n),b=t.filter((e=>e.attempts.length>0));return Object(c.useEffect)((()=>{if(s!==Ci.SHOWN){if(s===Ci.SHOWING){const e=setTimeout((()=>{l(Ci.SHOWN)}),ki);return()=>clearTimeout(e)}if(s===Ci.HIDING){const e=setTimeout((()=>{l(Ci.SHOWING),j((e=>{const t=e+Ei();return t>=b.length?0:t}))}),Si);return()=>clearTimeout(e)}throw new Error("Unrecognized status: ".concat(s))}if(b.length>Ei()){const e=setTimeout((()=>{l(Ci.HIDING)}),Ii);return()=>clearTimeout(e)}}),[s,b.length]),Object(H.jsx)(qn.a,{fullScreen:!0,open:!0,TransitionComponent:Oi.a,TransitionProps:{direction:"up"},transitionDuration:500,children:Object(H.jsxs)(rt.a,{sx:{maxHeight:"100vh",overflow:"hidden"},children:[Object(H.jsx)(kc.a,{position:"sticky",children:Object(H.jsxs)(vc.a,{children:[Object(H.jsx)(Me.a,{variant:"h4",color:"inherit",children:r}),Object(H.jsx)(rt.a,{sx:{flexGrow:1}}),Object(H.jsx)(Tt.a,{color:"inherit",component:a.b,to:o,size:"large",children:Object(H.jsx)(gi.a,{})})]})}),Object(H.jsxs)(lt.a,{sx:{tableLayout:"fixed"},children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{sx:{...wi.cell,...wi.ranking},align:"right",children:"#"}),Object(H.jsx)(mt.a,{sx:{...wi.cell,...wi.name},children:"Name"}),Object(H.jsx)(mt.a,{sx:{...wi.cell,...wi.country}}),Object($t.k)(n.numberOfAttempts,(e=>Object(H.jsx)(mt.a,{sx:wi.cell,align:"right",children:e+1},e))),u.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{sx:wi.cell,align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:b.slice(d,d+Ei()).map(((e,t)=>Object(H.jsx)(ne.a,{timeout:{enter:ki,exit:Si},style:s===Ci.SHOWING?{transitionDelay:"".concat(150*t,"ms")}:{},in:[Ci.SHOWING,Ci.SHOWN].includes(s),children:Object(H.jsxs)(bt.a,{sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},children:[Object(H.jsx)(mt.a,{align:"right",sx:{...wi.cell,...wi.ranking,...e.advancing?wi.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{sx:{...wi.cell,...wi.name},children:e.person.name}),Object(H.jsx)(mt.a,{sx:wi.cell,align:"center",children:Object(H.jsx)(yi,{code:e.person.country.iso2.toLowerCase()})}),gn(e,n.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",sx:wi.cell,children:nn(e,i)},t))),u.map(((t,n)=>{let{name:c,field:r,recordTagField:a}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{...wi.cell,fontWeight:0===n?600:400},children:Object(H.jsx)(Rn,{recordTag:e[a],hidePb:!0,children:nn(e[r],i)})},c)}))]})},e.person.id)))})]})]})})},Pi=n(141),Ti=n.n(Pi);function Ni(e){switch(e){case"222":return"2x2x2";case"333":return"3x3x3";case"333oh":return"3x3x3 One-Handed";case"333fm":return"3x3x3 Fewest Moves";case"333bf":return"3x3x3 Blindfolded";case"333mbf":return"3x3x3 Multi-Blindfolded";case"444":return"4x4x4";case"444bf":return"4x4x4 Blindfolded";case"555":return"5x5x5";case"555bf":return"5x5x5 Blindfolded";case"666":return"6x6x6";case"777":return"7x7x7";case"clock":return"Clock";case"minx":return"Megaminx";case"sq1":return"Square-1";case"skewb":return"Skewb";case"pyram":return"Pyraminx"}}var Ri=function(e){let{type:t,eventId:n,wcaId:c}=e;return Object(H.jsx)(Mt.a,{title:"Update Stream",children:Object(H.jsx)(Tt.a,{color:"inherit",onClick:()=>{!async function(e,t,n){var c=new Headers;c.append("Content-Type","application/json");const i=await fetch("https://raw.githubusercontent.com/robiningelbrecht/wca-rest-api/master/api/persons/".concat(n,".json")),r=JSON.parse(await i.text()),a=r.rank.singles.find((e=>e.eventId===t));let o="First Time Solver";void 0!==a&&(o="".concat(Ni(t)," PR Single: ").concat(nn(a.best,t)));const s=r.rank.averages.find((e=>e.eventId===t));let l="First Time Solver";void 0!==s&&(l="".concat(Ni(t)," PR Average: ").concat(nn(s.best,t)));const d={model:{fields:[{defaultValue:"Player Name",id:"name",title:"Player Name",type:"text"},{defaultValue:"0",id:"single",title:"Player Best Single",type:"text"},{defaultValue:"0",id:"average",title:"Player Best Average",type:"text"}]},payload:{name:r.name+"",single:"single"===e?o:l}};console.log(r);var j={method:"PUT",headers:c,body:JSON.stringify(d),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/0NdPtR2WpFYZtDZ6qflFxT/data",j).then((e=>e.text())).then((e=>console.log(e))).catch((e=>{console.log("error",e)}))}(t,n,c)},size:"small",children:Object(H.jsx)(Ti.a,{})})})};const Di={cell:{pr:{xs:"6px",md:"16px"},pl:{xs:"10px",md:"16px"},"&:last-child":{pr:2}},ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},name:{textOverflow:"ellipsis",overflow:"hidden",pr:0,maxWidth:{xs:150,md:250}}};var Fi=i.a.memo((e=>{let{results:t,format:n,eventId:c,competitionId:i,onResultClick:r}=e;const o=Object(z.a)((e=>e.breakpoints.up("sm"))),s=Object(z.a)((e=>e.breakpoints.up("md"))),l=On(c,n);return Object(H.jsx)(Ne.a,{children:Object(H.jsxs)(lt.a,{size:"small",children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{sx:{...Di.cell,...Di.ranking},align:"right",children:"#"}),Object(H.jsx)(mt.a,{sx:{...Di.cell,...Di.ranking},align:"right",children:"PR"}),Object(H.jsx)(mt.a,{sx:{...Di.cell,...Di.ranking},align:"right",children:"AVG"}),Object(H.jsx)(mt.a,{sx:Di.cell,children:"Name"}),s&&Object(H.jsx)(mt.a,{sx:Di.cell,children:"Country"}),o&&Object($t.k)(n.numberOfAttempts,(e=>Object(H.jsx)(mt.a,{sx:Di.cell,align:"right",children:e+1},e))),l.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{sx:Di.cell,align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:t.map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:()=>r&&r(e),children:[Object(H.jsx)(mt.a,{align:"right",sx:{...Di.cell,...Di.ranking,...e.advancing?Di.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{align:"right",sx:{...Di.cell,...Di.ranking},children:Object(H.jsx)(Ri,{type:"single",eventId:c,wcaId:e.person.wcaId})}),Object(H.jsx)(mt.a,{align:"right",sx:{...Di.cell,...Di.ranking},children:Object(H.jsx)(Ri,{type:"average",eventId:c,wcaId:e.person.wcaId})}),Object(H.jsx)(mt.a,{sx:{...Di.cell,...Di.name},children:o?Object(H.jsx)(gc.a,{component:a.b,to:"/competitions/".concat(i,"/competitors/").concat(e.person.id),underline:"hover",children:e.person.name}):e.person.name}),s&&Object(H.jsx)(mt.a,{sx:Di.cell,children:e.person.country.name}),o&&gn(e,n.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",sx:Di.cell,children:nn(e,c)},t))),l.map(((t,n)=>{let{name:i,field:r,recordTagField:a}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{...Di.cell,fontWeight:0===n?600:400},children:Object(H.jsx)(Rn,{recordTag:e[a],hidePb:!0,children:nn(e[r],c)})},i)}))]},e.id)))})]})})}));var Mi=function(e){let{result:t,format:n,eventId:c,competitionId:i,onClose:r}=e;const o=On(c,n);return Object(H.jsx)(qn.a,{open:!!t,fullWidth:!0,onClose:r,children:!!t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Qn.a,{children:[t.person.name," ",t.ranking&&"#".concat(t.ranking)]}),Object(H.jsx)(_n.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:"Name"}),Object(H.jsx)(Me.a,{variant:"body2",children:t.person.name}),Object(H.jsx)(gc.a,{component:a.b,to:"/competitions/".concat(i,"/competitors/").concat(t.person.id),underline:"hover",children:"All results"})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:"Country"}),Object(H.jsx)(Me.a,{variant:"body2",children:t.person.country.name})]}),t.ranking&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:"Attempts"}),Object(H.jsx)(Me.a,{variant:"body2",children:t.attempts.map((e=>nn(e.result,c))).join(", ")})]}),o.map((e=>{let{name:n,field:i,recordTagField:r}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:n}),Object(H.jsx)(Me.a,{variant:"body2",children:Object(H.jsx)(Rn,{recordTag:t[r],hidePb:!0,children:nn(t[i],c)})})]},n)}))]})]})}),Object(H.jsx)(Gn.a,{children:Object(H.jsx)(me.a,{color:"primary",onClick:r,children:"Close"})})]})})};const Wi=100;var zi=function(e){let{results:t,format:n,eventId:i,competitionId:r}=e;const a=Object(z.a)((e=>e.breakpoints.up("sm"))),[o,s]=Object(c.useState)(null),[l,d]=Object(c.useState)(t.length<=Wi);Object(c.useEffect)((()=>{d(t.length<=Wi)}),[t]);const j=Object(c.useCallback)((e=>{s(e)}),[]),u=Object(c.useMemo)((()=>l?t:t.slice(0,Wi)),[t,l]);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:2,children:[Object(H.jsx)(te.a,{item:!0,style:{width:"100%"},children:Object(H.jsx)(Fi,{results:u,format:n,eventId:i,competitionId:r,onResultClick:j})}),!l&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(me.a,{variant:"contained",disableElevation:!0,size:"small",onClick:()=>d(!0),children:[t.length-Wi," more"]})})]}),!a&&Object(H.jsx)(Mi,{result:o,format:n,eventId:i,competitionId:r,onClose:()=>s(null)})]})},Bi=n(445),Vi=n.n(Bi),$i=n(836),Ui=n(795),Li=n(798),Hi=n(444),qi=n.n(Hi);function Gi(e,t){if(e<t)switch(e){case 1:return 5===t?"\u2074":"\xb2";case 2:return 5===t?"\xb3":"\xb9";case 3:return"\xb2";case 4:return"\xb9"}return""}function _i(e){return e.includes("(")?e.split("(")[0].trim():e}function Ji(e){return void 0===e||null===e?"":e.penalty<0?"DNF":null===e.result?"":Math.trunc(100*e.result)}function Qi(e,t){const n={};if(n["p".concat(t,"Name")]="",n["p".concat(t,"Score1")]="",n["p".concat(t,"Score2")]="",n["p".concat(t,"Score3")]="",n["p".concat(t,"Score4")]="",n["p".concat(t,"Score5")]="",n["p".concat(t,"Count")]="",n["p".concat(t,"Remaining")]="",n["p".concat(t,"Mean")]="--",n["p".concat(t,"Best")]="--",n["p".concat(t,"Average")]="--",n["p".concat(t,"Worst")]="--",null===e)return n;const c=[];c.push(Ji(e.current_results[0])),c.push(Ji(e.current_results[1])),c.push(Ji(e.current_results[2])),c.push(Ji(e.current_results[3])),c.push(Ji(e.current_results[4]));const i=c.filter((e=>e<0)).length,r=c.filter((e=>""===e)).length;null!==e.current_results[0]&&void 0!==e.current_results[0]&&e.current_results[0].event_id;let a=Yi(function(e){if(e.filter((e=>""===e)).length>0)return"--";if(e.filter((e=>"DNF"===e)).length>1)return-1;const t=e.filter((e=>"DNF"!==e));return e.length!=t.length?(t.sort(((e,t)=>t-e)),t.slice(0,3).reduce(((e,t)=>e+t),0)/3):(t.sort(((e,t)=>e-t)),t.slice(1,4).reduce(((e,t)=>e+t),0)/3)}(c));a<0&&0===r&&(a="DNF"),r>0&&(a="--");let o=1===r?Yi(function(e){if(4!==e.filter((e=>""!==e)).length)return"--";if(e.filter((e=>"DNF"===e)).length>1)return-1;const t=e.filter((e=>"DNF"!==e&&""!==e));return t.push(0),t.sort(((e,t)=>e-t)),t.slice(1,4).reduce(((e,t)=>e+t),0)/3}(c)):"--";o<0&&(o="DNF");const s=1===r?Yi(function(e){if(4!==e.filter((e=>""!==e)).length)return"--";if(e.filter((e=>"DNF"===e)).length>0)return-1;const t=e.filter((e=>"DNF"!==e&&""!==e));return t.sort(((e,t)=>t-e)),t.slice(0,3).reduce(((e,t)=>e+t),0)/3}(c)):"--";return s<0&&(s="DNF"),n["p".concat(t,"Name")]=e.name,n["p".concat(t,"Score1")]=""!==c[0]?Yi(c[0]):"",n["p".concat(t,"Score2")]=""!==c[1]?Yi(c[1]):"",n["p".concat(t,"Score3")]=""!==c[2]?Yi(c[2]):"",n["p".concat(t,"Score4")]=""!==c[3]?Yi(c[3]):"",n["p".concat(t,"Score5")]=""!==c[4]?Yi(c[4]):"",n["p".concat(t,"Count")]=i,n["p".concat(t,"Remaining")]=r,n["p".concat(t,"Mean")]=a,n["p".concat(t,"Best")]=o,n["p".concat(t,"Average")]=a,n["p".concat(t,"Worst")]=s,n}function Yi(e){const t=e/100,n=Math.floor(t/3600),c=Math.floor(t%3600/60),i=t%60;return n>0?"".concat(String(n),":").concat(String(c).padStart(2,"0"),":").concat(String(i.toFixed(2)).padStart(2,"0")):c>0&&i>9?"".concat(String(c),":").concat(String(i.toFixed(2)).padStart(2,"0")):c>0&&i<10?"".concat(String(c),":0").concat(String(i.toFixed(2))):"".concat(String(i.toFixed(2)))}function Zi(e,t,n){if("average"===t){if(5===n)return function(e){if(e.filter((e=>""===e)).length>0)return"";if(e.filter((e=>e<=0)).length>1)return-1;const t=e.filter((e=>e>0));switch(t.length){case 0:return"--";case 1:return t[0];case 2:return e.length===t.length?t.reduce(((e,t)=>e+t),0)/2:(t.sort(),t[1]);case 3:return e.length===t.length?(t.sort(),t[1]):(t.sort(),(t[1]+t[2])/2);case 4:return e.length===t.length?(t.sort(),(t[1]+t[2])/2):(t.sort(),(t[1]+t[2]+t[3])/3);case 5:return t.sort(),(t[1]+t[2]+t[3])/3}}(e);if(3===n)return function(e){if(e.filter((e=>""===e)).length>0)return"";if(e.filter((e=>e<=0)).length>0)return-1;switch(e.length){case 1:return e[0];case 2:return e.reduce(((e,t)=>e+t),0)/2;case 3:return e.reduce(((e,t)=>e+t),0)/3}return""}(e)}if("best"===t){const t=e.filter((e=>e>0));return 0===t.length?-1:(t.sort(),t[0])}}var Xi=function(e){let{round:t,projections:n}=e;const[i,r]=Object(c.useState)(0);return Object(c.useEffect)((()=>{r(0)}),t.competitionEvent.competition.id),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Mt.a,{title:n?"Update Projections":"Update Fulltext",children:Object(H.jsxs)(Tt.a,{color:"inherit",onClick:()=>{n&&async function(e,t){const n={model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"},{defaultValue:"1",id:"roundId",title:"Round Id",type:"text"},{defaultValue:"Round 1",id:"roundName",title:"Round Name",type:"text"},{defaultValue:"Round Format",id:"roundFormat",title:"Round Format",type:"text"}]},payload:{competitionName:e.competitionEvent.competition.name,competitionId:e.competitionEvent.competition.id,eventName:e.competitionEvent.event.name,eventId:e.competitionEvent.event.id,roundName:e.name,roundId:e.id,roundFormat:e.format.sortBy}};let c=e.competitionEvent.event.id;const i=[];e.results.forEach((t=>{const n={},r=[];n.solves=[],t.attempts.forEach(((e,t)=>{r.push(e.result),n.solves.push(nn(e.result,c))})),null!==t.ranking&&null!==t.attempts&&i.push({...n,name:t.person.name,country:t.person.country.iso2,average:nn(t.average,c),best:nn(t.best,c),ranking:t.ranking,advancing:t.advancing,solveCount:t.attempts.length,solveProjection:nn(Zi(r,e.format.sortBy,e.format.numberOfAttempts))})})),i.sort(((t,n)=>{switch(e.format.sortBy){case"average":const c=t.solveCount===e.format.numberOfAttempts?t.average:t.solveProjection,i=n.solveCount===e.format.numberOfAttempts?n.average:n.solveProjection;return"DNF"===c?1e6:"DNF"===i?c:c-i;case"best":return"DNF"===t.best?1e6:"DNF"===n.best?t.best:t.best-n.best;default:return 0}}));for(var r=0;r<8;r++){const t=i[r];n.model.fields.push({defaultValue:"",id:"player".concat(r,"name"),title:"Player ".concat(r," Name"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"country"),title:"Player ".concat(r," Country"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"solveAverage"),title:"Player ".concat(r," Average"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"solveProjection"),title:"Player ".concat(r," Projection"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"solveBest"),title:"Player ".concat(r," Best"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"solveRank"),title:"Player ".concat(r," Rank"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"solveAdvancing"),title:"Player ".concat(r," Advancing"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(r,"solveCount"),title:"Player ".concat(r," Solve Count"),type:"text"}),n.payload["player".concat(r,"name")]="",n.payload["player".concat(r,"country")]="",n.payload["player".concat(r,"solveAverage")]="",n.payload["player".concat(r,"solveBest")]="",n.payload["player".concat(r,"solveRank")]="",n.payload["player".concat(r,"solveAdvancing")]="",n.payload["player".concat(r,"solveCount")]=0,n.payload["player".concat(r,"solveProjection")]="",[0,1,2,3,4,5].forEach(((e,t)=>{n.model.fields.push({defaultValue:"",id:"player".concat(r,"solve").concat(t),title:"Player ".concat(r," Solve ").concat(t),type:"text"}),n.payload["player".concat(r,"solve").concat(t)]=e})),null!==t&&void 0!==t&&(n.payload["player".concat(r,"name")]=_i(t.name),n.payload["player".concat(r,"country")]=t.country,n.payload["player".concat(r,"solveAverage")]=t.average,n.payload["player".concat(r,"solveBest")]=t.best,n.payload["player".concat(r,"solveRank")]=r+1,n.payload["player".concat(r,"solveAdvancing")]=t.advancing,n.payload["player".concat(r,"solveCount")]=t.solveCount,n.payload["player".concat(r,"solveProjection")]=e.format.numberOfAttempts!==t.solveCount?Gi(t.solveCount,e.format.numberOfAttempts)+t.solveProjection:"average"===e.format.sortBy?t.average:t.solveProjection,t.solves.forEach(((e,t)=>{n.model.fields.push({defaultValue:"",id:"player".concat(r,"solve").concat(t),title:"Player ".concat(r," Solve ").concat(t),type:"text"}),n.payload["player".concat(r,"solve").concat(t)]=e})))}var a=new Headers;a.append("Content-Type","application/json");var o={method:"PUT",headers:a,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/2qr0ERS5HntVvFVGGEpxEH/data",o).then((e=>e.text())).then((e=>console.log(JSON.parse(e)))).catch((e=>console.log("error",e)))}(t),n||async function(e,t){const n={model:{fields:[{defaultValue:"Comp Name",id:"competitionName",title:"Competition Name",type:"text"},{defaultValue:"841",id:"competitionId",title:"Competition Id",type:"text"},{defaultValue:"333",id:"eventId",title:"Event Id",type:"text"},{defaultValue:"3x3x3 Cube",id:"eventName",title:"Event Name",type:"text"},{defaultValue:"1",id:"roundId",title:"Round Id",type:"text"},{defaultValue:"Round 1",id:"roundName",title:"Round Name",type:"text"}]},payload:{competitionName:e.competitionEvent.competition.name,competitionId:e.competitionEvent.competition.id,eventName:e.competitionEvent.event.name,eventId:e.competitionEvent.event.id,roundName:e.name,roundId:e.id}};let c=e.competitionEvent.event.id;e.results.forEach(((e,i)=>{if(null!==e.ranking&&e.ranking>t&&e.ranking<t+9){const t=i%8;n.model.fields.push({defaultValue:"",id:"player".concat(t,"name"),title:"Player ".concat(t," Name"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"country"),title:"Player ".concat(t," Country"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveAverage"),title:"Player ".concat(t," Average"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveBest"),title:"Player ".concat(t," Best"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveRank"),title:"Player ".concat(t," Rank"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveAdvancing"),title:"Player ".concat(t," Advancing"),type:"text"}),n.model.fields.push({defaultValue:"",id:"player".concat(t,"solveCount"),title:"Player ".concat(t," Solve Count"),type:"text"}),n.payload["player".concat(t,"name")]=e.person.name,n.payload["player".concat(t,"country")]=e.person.country.iso2,n.payload["player".concat(t,"solveAverage")]=nn(e.average,c),n.payload["player".concat(t,"solveBest")]=nn(e.best,c),n.payload["player".concat(t,"solveRank")]=e.ranking,n.payload["player".concat(t,"solveAdvancing")]=e.advancing,n.payload["player".concat(t,"solveCount")]=e.attempts.length,e.attempts.forEach(((e,i)=>{n.model.fields.push({defaultValue:"",id:"player".concat(t,"solve").concat(i),title:"Player ".concat(t," Solve ").concat(i),type:"text"}),n.payload["player".concat(t,"solve").concat(i)]=nn(e.result,c)}))}}));var i=new Headers;i.append("Content-Type","application/json");var r={method:"PUT",headers:i,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/2dVw6vmF70TLbJ0h7xjSWb/data",r).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e)))}(t,i)},size:"large",children:[n&&Object(H.jsx)(qi.a,{}),!n&&Object(H.jsx)(Ti.a,{})]})}),!n&&Object(H.jsxs)($i.a,{children:[Object(H.jsx)(Li.a,{id:"demo-simple-select-label",children:"Rank Range"}),Object(H.jsx)(Ui.a,{labelId:"demo-simple-select-label",id:t.eventId,value:i,label:"Rank Range",onChange:e=>{console.log(e.target.value),r(e.target.value)},children:t.results.map(((e,n)=>{if(n%8==0)return console.log(n),Object(H.jsxs)(zn.a,{value:n,children:[n+1," to ",n+8]},"".concat(t.competitionEvent.competition.id,"-").concat(n))}))})]})]})};var Ki,er,tr,nr=function(e){let{round:t,competitionId:n}=e;const c=Object(z.a)((e=>e.breakpoints.up("md")));return Object(H.jsxs)(te.a,{item:!0,container:!0,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Me.a,{variant:"h5",children:[t.competitionEvent.event.name," - ",t.name]})}),Object(H.jsx)(te.a,{item:!0,style:{flexGrow:1}}),c&&Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Mt.a,{title:"PDF",placement:"top",children:Object(H.jsx)(Tt.a,{component:"a",target:"_blank",href:Xe("/pdf/rounds/".concat(t.id)),size:"large",children:Object(H.jsx)(Hn.a,{})})}),Object(H.jsx)(Mt.a,{title:"Projector view",placement:"top",children:Object(H.jsx)(Tt.a,{component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(t.id,"/projector"),size:"large",children:Object(H.jsx)(Vi.a,{})})}),Object(H.jsx)(Xi,{round:t,projections:!0}),Object(H.jsx)(Xi,{round:t,projections:!1})]})]})};const cr=Object(K.a)(Ki||(Ki=Object(X.a)(["\n  fragment roundResult on Result {\n    ranking\n    advancing\n    attempts {\n      result\n    }\n    best\n    average\n    person {\n      wcaId\n      id\n      name\n      wcaId\n      country {\n        iso2\n        name\n      }\n    }\n    singleRecordTag\n    averageRecordTag\n  }\n"]))),ir=Object(K.a)(er||(er=Object(X.a)(["\n  query Round($id: ID!) {\n    round(id: $id) {\n      id\n      name\n      finished\n      active\n      competitionEvent {\n        id\n        competition {\n          id\n          name\n        }\n        event {\n          id\n          name\n        }\n      }\n      format {\n        id\n        numberOfAttempts\n        sortBy\n      }\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),cr),rr=Object(K.a)(tr||(tr=Object(X.a)(["\n  subscription RoundUpdated($id: ID!) {\n    roundUpdated(id: $id) {\n      id\n      results {\n        id\n        ...roundResult\n      }\n    }\n  }\n  ","\n"])),cr);var ar=function(){const{competitionId:e,roundId:t}=Object(Z.h)(),{data:n,loading:r,error:a,subscribeToMore:o}=Object(ee.b)(ir,{variables:{id:t}}),[s,l]=i.a.useState(void 0);Object(c.useEffect)((()=>{n&&l(n)}),[n]);const d=n||s,j=d&&d.round&&(!d.round.finished||d.round.active);if(Object(c.useEffect)((()=>{if(j){return o({document:rr,variables:{id:t}})}}),[o,t,j]),!d)return Object(H.jsx)(re,{});if(a)return Object(H.jsx)(ae.a,{error:a});const{round:u}=d;return Object(H.jsxs)(H.Fragment,{children:[r&&Object(H.jsx)(re,{}),Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(nr,{round:u,competitionId:e})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"projector",element:Object(H.jsx)(Ai,{results:u.results,format:u.format,eventId:u.competitionEvent.event.id,title:"".concat(u.competitionEvent.event.name," - ").concat(u.name),exitUrl:"/competitions/".concat(e,"/rounds/").concat(t)})}),Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(zi,{results:u.results,format:u.format,eventId:u.competitionEvent.event.id,competitionId:e})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/competitions/".concat(e,"/rounds/").concat(t)})})]})})]})]})},or=n(52),sr=n(212),lr=n.n(sr);var dr,jr=function(e){let{competitors:t,competitionId:n}=e;const[i,r]=Object(c.useState)(""),o=function(e,t){const n=t.toLowerCase().split(/\s+/);return e.filter((e=>n.every((t=>e.name.toLowerCase().includes(t)))))}(t,i).sort(((e,t)=>e.name.localeCompare(t.name)));return Object(H.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Ne.a,{sx:{p:"2px 2px 2px 16px",display:"inline-block"},children:[Object(H.jsx)(or.c,{autoFocus:!0,value:i,placeholder:"Search competitor",onChange:e=>r(e.target.value)}),Object(H.jsx)(Tt.a,{disabled:!0,size:"large",children:Object(H.jsx)(lr.a,{})})]})}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(le.a,{children:o.map((e=>Object(H.jsxs)(je.a,{button:!0,component:a.b,to:"/competitions/".concat(n,"/competitors/").concat(e.id),children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(yi,{code:e.country.iso2.toLowerCase(),size:"lg"})}),Object(H.jsx)(be.a,{primary:e.name})]},e.id)))})})]})};const ur=Object(K.a)(dr||(dr=Object(X.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var br=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(ur,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t;return Object(H.jsx)(jr,{competitors:i.competitors,competitionId:i.id})},mr=n.p+"static/media/wca-logo.513c1572.svg";const pr={ranking:{pr:{xs:1,md:2},width:{xs:40,md:50}},advancing:{color:e=>e.palette.getContrastText(En.a.A400),backgroundColor:En.a.A400},roundName:{width:{xs:150,lg:200}}};var hr=function(e){let{results:t,competitionId:n,onResultClick:c}=e;const i=Object(z.a)((e=>e.breakpoints.up("sm"))),{format:r,competitionEvent:{event:o}}=t[0].round,s=On(o.id,r),l=Math.max(...t.map((e=>e.round.format.numberOfAttempts)));return Object(H.jsx)(Ne.a,{children:Object(H.jsxs)(lt.a,{size:"small",sx:{tableLayout:"fixed"},children:[Object(H.jsx)(ut.a,{children:Object(H.jsxs)(bt.a,{children:[Object(H.jsx)(mt.a,{align:"right",sx:pr.ranking,children:"#"}),Object(H.jsx)(mt.a,{sx:pr.roundName,children:"Round"}),i&&Object($t.k)(l,(e=>Object(H.jsx)(mt.a,{align:"right",children:e+1},e))),s.map((e=>{let{name:t}=e;return Object(H.jsx)(mt.a,{align:"right",children:t},t)}))]})}),Object(H.jsx)(dt.a,{children:t.map((e=>Object(H.jsxs)(bt.a,{hover:!0,sx:{whiteSpace:"nowrap","&:last-child td":{border:0}},onClick:t=>c(e,t),children:[Object(H.jsx)(mt.a,{align:"right",sx:{...pr.ranking,...e.advancing?pr.advancing:{}},children:e.ranking}),Object(H.jsx)(mt.a,{sx:pr.roundName,children:i?Object(H.jsx)(gc.a,{component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(e.round.id),underline:"hover",children:e.round.name}):e.round.name}),i&&gn(e,r.numberOfAttempts).map(((e,t)=>Object(H.jsx)(mt.a,{align:"right",children:nn(e,o.id)},t))),s.map(((t,n)=>{let{name:c,field:i,recordTagField:r}=t;return Object(H.jsx)(mt.a,{align:"right",sx:{fontWeight:0===n?600:400},children:Object(H.jsx)(Rn,{recordTag:e[r],children:nn(e[i],o.id)})},c)}))]},e.round.id)))})]})})};var xr=function(e){let{result:t,competitionId:n,onClose:c}=e;return Object(H.jsxs)(qn.a,{open:!!t,fullWidth:!0,onClose:c,children:[!!t&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Qn.a,{children:["#",t.ranking]}),Object(H.jsx)(_n.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:"Event"}),Object(H.jsx)(Me.a,{variant:"body2",children:t.round.competitionEvent.event.name})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:"Round"}),Object(H.jsx)(Me.a,{variant:"body2",children:t.round.name}),Object(H.jsx)(gc.a,{component:a.b,to:"/competitions/".concat(n,"/rounds/").concat(t.round.id),underline:"hover",children:"All results"})]}),t.ranking&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:"Attempts"}),Object(H.jsx)(Me.a,{variant:"body2",children:t.attempts.map((e=>nn(e.result,t.round.competitionEvent.event.id))).join(", ")})]}),On(t.round.competitionEvent.event.id,t.round.format).map((e=>{let{name:n,field:c,recordTagField:i}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle2",children:n}),Object(H.jsx)(Me.a,{variant:"body2",children:Object(H.jsx)(Rn,{recordTag:t[i],children:nn(t[c],t.round.competitionEvent.event.id)})})]},n)}))]})]})})]}),Object(H.jsx)(Gn.a,{children:Object(H.jsx)(me.a,{color:"primary",onClick:c,children:"Close"})})]})};var Or,fr=function(e){let{results:t,competitionId:n}=e;const i=Object(z.a)((e=>e.breakpoints.up("sm"))),[r,a]=Object(c.useState)(null),o=t.filter((e=>e.attempts.length>0)),s=Object($t.d)(Object($t.h)(o,[e=>e.round.competitionEvent.event.rank,e=>e.round.number]),(e=>e.round.competitionEvent.event.name));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(te.a,{container:!0,direction:"column",spacing:2,children:Object.entries(s).map((e=>{let[t,c]=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle1",gutterBottom:!0,children:t}),Object(H.jsx)(hr,{results:c,competitionId:n,onResultClick:e=>a(e)})]},t)}))}),!i&&Object(H.jsx)(xr,{result:r,competitionId:n,onClose:()=>a(null)})]})};const gr=Object(K.a)(Or||(Or=Object(X.a)(["\n  query Competitor($id: ID!) {\n    person(id: $id) {\n      id\n      name\n      wcaId\n      country {\n        iso2\n      }\n      results {\n        id\n        ranking\n        advancing\n        attempts {\n          result\n        }\n        best\n        average\n        singleRecordTag\n        averageRecordTag\n        round {\n          id\n          name\n          number\n          competitionEvent {\n            id\n            event {\n              id\n              name\n              rank\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n      }\n    }\n  }\n"])));var vr,yr=function(){const{competitionId:e,competitorId:t}=Object(Z.h)(),{data:n,loading:c,error:i}=Object(ee.b)(gr,{variables:{id:t}});if(c&&!n)return Object(H.jsx)(re,{});if(i)return Object(H.jsx)(ae.a,{error:i});const{person:r}=n;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,alignContent:"center",sx:{mb:2},children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(Me.a,{variant:"h5",children:[r.name," ",Object(H.jsx)(yi,{code:r.country.iso2.toLowerCase()})]})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),r.wcaId&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)("a",{href:Ke("/persons/".concat(r.wcaId)),target:"_blank",rel:"noopener noreferrer",children:Object(H.jsx)("img",{src:mr,alt:"WCA Profile",height:"32",width:"32"})})})]}),Object(H.jsx)(fr,{results:r.results,competitionId:e})]})};const wr=Object(K.a)(vr||(vr=Object(X.a)(["\n  query Podiums($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      podiums {\n        round {\n          id\n          finished\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n          }\n          format {\n            id\n            numberOfAttempts\n            sortBy\n          }\n        }\n        results {\n          id\n          ranking\n          advancing\n          attempts {\n            result\n          }\n          best\n          average\n          person {\n            id\n            name\n            country {\n              iso2\n              name\n            }\n          }\n          singleRecordTag\n          averageRecordTag\n        }\n      }\n    }\n  }\n"])));var Cr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(wr,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t,[r,a]=Object($t.i)(i.podiums,(e=>e.round.finished));return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Podiums"}),r.length>0?Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[r.map((e=>{let{round:t,results:n}=e;return Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"subtitle1",gutterBottom:!0,children:t.competitionEvent.event.name}),Object(H.jsx)(zi,{results:n,format:t.format,eventId:t.competitionEvent.event.id,competitionId:i.id})]},t.id)})),a.length>0&&Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{gutterBottom:!0,children:"Podiums for the following events are yet to be determined:"}),Object(H.jsx)(te.a,{container:!0,direction:"row",spacing:3,children:a.map((e=>{let{round:t}=e;return t.competitionEvent.event})).map((e=>Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Mt.a,{title:e.name,children:Object(H.jsx)("span",{children:Object(H.jsx)(ke.a,{eventId:e.id})})})},e.id)))})]})]}):Object(H.jsx)(Me.a,{children:"There are no podiums yet!"})]})},Ir=n(446),kr=n.n(Ir);var Sr=function(e){let{competitionId:t,index:n,onData:i}=e;const[r,a]=Object(c.useState)(null),[o,s]=Object(c.useState)("#CCCCCC");return Object(c.useEffect)((()=>{i(r,n)}),[r]),(e=>{const n=new WebSocket("wss://api.timebase.live/livestream/".concat(t,"/").concat(e));n.addEventListener("open",(t=>{console.log("Hello - "+e),s("#00ff00"),c()})),n.addEventListener("close",(t=>{console.log("Closed - "+e),s("#ff0000")})),n.addEventListener("message",(t=>{console.log("Message from server - "+e,t.data);const n=JSON.parse(t.data);a(n)}));const c=()=>{n.send("ping"),setTimeout(c,3e3)}})(n),Object(H.jsxs)(Ne.a,{style:{margin:16},children:[Object(H.jsxs)(te.a,{container:!0,children:[Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsx)(kr.a,{style:{color:o}})}),Object(H.jsx)(te.a,{item:!0,xs:2,children:Object(H.jsxs)(Me.a,{variant:"body",children:["#",n]})}),Object(H.jsxs)(te.a,{item:!0,xs:8,children:[r&&Object(H.jsx)(Me.a,{variant:"body",children:r.name}),!r&&Object(H.jsx)(Me.a,{variant:"body",children:"--"})]})]}),Object(H.jsx)(me.a,{button:!0,onClick:()=>{i(r,n)},style:{paddingTop:0,paddingBottom:0},children:Object(H.jsx)(oe.a,{children:Object(H.jsx)(se.a,{children:Object(H.jsx)(Me.a,{variant:"caption",children:"Send Stream"})})})},"Singular"+n),Object(H.jsx)(me.a,{button:!0,onClick:()=>{!function(e,t){var n=new Headers;n.append("Content-Type","application/json");var c={method:"GET",headers:n,redirect:"follow"};fetch("https://api.timebase.live/ping/".concat(e),c).then((e=>e.text())).then((e=>t(e))).catch((e=>{console.log("error",e)}))}(n,(e=>{null!==e&&a(JSON.parse(e))}))},children:Object(H.jsx)(oe.a,{children:Object(H.jsx)(se.a,{children:Object(H.jsx)(Me.a,{variant:"caption",children:"Pull Timebase"})})})},"Timebase"+n)]},"paper"+n)};var Er,Ar=function(e){let{competitors:t,competitionId:n}=e;const[i,r]=Object(c.useState)([{channel:1,player:null},{channel:2,player:null}]);return Object(c.useEffect)((()=>{!function(e,t){const n={model:{fields:[{defaultValue:"Player 1 Name",id:"p1Name",title:"Player 1 Name",type:"text"},{defaultValue:"",id:"p1Score1",title:"Player 1 Score 1",type:"text"},{defaultValue:"",id:"p1Score2",title:"Player 1 Score 2",type:"text"},{defaultValue:"",id:"p1Score3",title:"Player 1 Score 3",type:"text"},{defaultValue:"",id:"p1Score4",title:"Player 1 Score 4",type:"text"},{defaultValue:"",id:"p1Score5",title:"Player 1 Score 5",type:"text"},{defaultValue:"",id:"p1Count",title:"Player 1 DNF Count",type:"text"},{defaultValue:"",id:"p1Remaining",title:"Player 1 Remaining Solves",type:"text"},{defaultValue:"",id:"p1Mean",title:"Player 1 Mean",type:"text"},{defaultValue:"",id:"p1Best",title:"Player 1 Best",type:"text"},{defaultValue:"",id:"p1Average",title:"Player 1 Average",type:"text"},{defaultValue:"",id:"p1Worst",title:"Player 1 Worst",type:"text"},{defaultValue:"Player 2 Name",id:"p2Name",title:"Player 2 Name",type:"text"},{defaultValue:"",id:"p2Score1",title:"Player 2 Score 1",type:"text"},{defaultValue:"",id:"p2Score2",title:"Player 2 Score 2",type:"text"},{defaultValue:"",id:"p2Score3",title:"Player 2 Score 3",type:"text"},{defaultValue:"",id:"p2Score4",title:"Player 2 Score 4",type:"text"},{defaultValue:"",id:"p2Score5",title:"Player 2 Score 5",type:"text"},{defaultValue:"",id:"p2Count",title:"Player 2 DNF Count",type:"text"},{defaultValue:"",id:"p2Remaining",title:"Player 2 Remaining Solves",type:"text"},{defaultValue:"",id:"p2Mean",title:"Player 2 Mean",type:"text"},{defaultValue:"",id:"p2Best",title:"Player 2 Best",type:"text"},{defaultValue:"",id:"p2Average",title:"Player 2 Average",type:"text"},{defaultValue:"",id:"p2Worst",title:"Player 2 Worst",type:"text"}]},payload:{...Qi(e,1),...Qi(t,2)}};var c=new Headers;c.append("Content-Type","application/json");var i={method:"PUT",headers:c,body:JSON.stringify(n),redirect:"follow"};fetch("https://app.singular.live/apiv1/datanodes/4uEqIEL6YSbGZbF4JwL5ac/data",i).then((e=>e.text())).then((e=>console.log(JSON.parse(e)))).catch((e=>{console.log("error",e)}))}(i[0].player,i[1].player)}),[i]),Object(H.jsx)(te.a,{container:!0,direction:"column",alignItems:"center",spacing:1,children:Object(H.jsx)(te.a,{container:!0,item:!0,xs:12,children:[5,7,25,19,2,10].map((e=>Object(H.jsxs)(te.a,{container:!0,item:!0,xs:12,children:[Object(H.jsx)(te.a,{container:!0,item:!0,xs:1,children:Object(H.jsx)(me.a,{button:!0,onClick:()=>{r([{channel:e,player:null},{channel:i[1].channel,player:i[1].player}])},children:Object(H.jsx)(oe.a,{style:{paddingTop:0,paddingBottom:0,backgroundColor:i[0].channel===e?"green":"red"},children:Object(H.jsx)(se.a,{children:Object(H.jsx)(Me.a,{variant:"h4",color:"white",children:"P1"})})})},"Player1-"+e)}),Object(H.jsx)(te.a,{container:!0,item:!0,xs:1,children:Object(H.jsx)(me.a,{button:!0,onClick:()=>{r([{channel:i[0].channel,player:i[0].player},{channel:e,player:null}])},children:Object(H.jsx)(oe.a,{style:{paddingTop:0,paddingBottom:0,backgroundColor:i[1].channel===e?"green":"red"},children:Object(H.jsx)(se.a,{children:Object(H.jsx)(Me.a,{variant:"h4",color:"white",children:"P2"})})})},"Player2-"+e)}),Object(H.jsx)(te.a,{container:!0,item:!0,xs:10,children:Object(H.jsx)(Sr,{competitionId:n,index:e,onData:t=>{i[0].channel===e&&r([{channel:e,player:t},{channel:i[1].channel,player:i[1].player}]),i[1].channel===e&&r([{channel:i[0].channel,player:i[0].player},{channel:e,player:t}])}})})]})))})})};const Pr=Object(K.a)(Er||(Er=Object(X.a)(["\n  query Competition($competitionId: ID!) {\n    competition(id: $competitionId) {\n      id\n      wcaId\n      competitors {\n        id\n        name\n        country {\n          iso2\n        }\n      }\n    }\n  }\n"])));var Tr,Nr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,loading:n,error:c}=Object(ee.b)(Pr,{variables:{competitionId:e}});if(n&&!t)return Object(H.jsx)(re,{});if(c)return Object(H.jsx)(ae.a,{error:c});const{competition:i}=t;return Object(H.jsx)(Ar,{competitors:i.competitors,competitionId:i.wcaId})},Rr=n(447);const Dr=Object(K.a)(Tr||(Tr=Object(X.a)(["\n  query Competition($id: ID!) {\n    competition(id: $id) {\n      id\n      shortName\n      competitionEvents {\n        id\n        event {\n          id\n          name\n        }\n        rounds {\n          id\n          name\n          label\n          open\n        }\n      }\n      access {\n        canScoretake\n      }\n    }\n  }\n"])));var Fr=function(){const{competitionId:e}=Object(Z.h)(),{data:t,error:n,loading:c}=Object(ee.b)(Dr,{variables:{id:e},pollInterval:6e4});if(n)return Object(H.jsx)(ae.a,{error:n});const i=t?t.competition:null;return Object(H.jsxs)(Rr.a,{competition:i,children:[c&&Object(H.jsx)(re,{}),Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(xi,{})}),Object(H.jsx)(Z.b,{path:"rounds/:roundId/*",element:Object(H.jsx)(ar,{})}),Object(H.jsx)(Z.b,{path:"competitors",element:Object(H.jsx)(br,{})}),Object(H.jsx)(Z.b,{path:"competitors/:competitorId",element:Object(H.jsx)(yr,{})}),Object(H.jsx)(Z.b,{path:"podiums",element:Object(H.jsx)(Cr,{})}),Object(H.jsx)(Z.b,{path:"timebase",element:Object(H.jsx)(Nr,{})}),Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/competitions/".concat(e)})})]})]})},Mr=n(36),Wr=n(452),zr=n.n(Wr),Br=n(453),Vr=n.n(Br);const $r={"&:hover":{opacity:.7}};var Ur=function(){const e=Object(Mr.a)(),t=Object(c.useContext)(_);return Object(H.jsxs)(te.a,{container:!0,spacing:1,children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Tt.a,{size:"small",onClick:t,"aria-label":"Toggle theme",children:"dark"===e.palette.mode?Object(H.jsx)(zr.a,{}):Object(H.jsx)(Vr.a,{})})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(gc.a,{sx:$r,variant:"subtitle1",component:a.b,to:"/about",underline:"none",children:"About"})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(gc.a,{sx:$r,variant:"subtitle1",href:"https://github.com/thewca/wca-live",target:"_blank",rel:"noopener noreferrer",underline:"none",children:"GitHub"})})]})},Lr=n(467),Hr=n(454);var qr=function(e){let{maxHeight:t,itemHeight:n,items:c,renderItem:i}=e;const r=Math.min(t,c.length*n);return Object(H.jsx)("div",{style:{height:r},children:Object(H.jsx)(Hr.a,{children:e=>{let{width:t}=e;return Object(H.jsx)(Lr.a,{height:r,width:t,itemSize:n,itemCount:c.length,children:e=>{let{index:t,style:n}=e;return i(c[t],{style:n})}})}})})},Gr=n(455),_r=n.n(Gr);var Jr=function(e){let{competition:t}=e;const n=ti(t);if(1===n.length){const[e]=n;return Object(H.jsx)(yi,{code:e.iso2.toLowerCase(),size:"lg"})}return Object(H.jsx)(_r.a,{})};var Qr=function(e){let{title:t,competitions:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(De.a,{disableSticky:!0,children:t}),Object(H.jsx)(qr,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;return Object(H.jsxs)(je.a,{style:n,button:!0,component:a.b,to:"/competitions/".concat(e.id),children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Re.a,{children:Object(H.jsx)(Jr,{competition:e})})}),Object(H.jsx)(be.a,{primary:e.name,secondary:li(e.startDate,e.endDate)})]},e.id)}})]})};var Yr,Zr=function(e){let{past:t,inProgress:n,upcoming:i}=e;const[r,a]=Object(c.useState)(n.length>0?"inProgress":"upcoming"),o={past:t,inProgress:n,upcoming:i}[r];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(at.a,{indicatorColor:"secondary",textColor:"inherit",value:r,onChange:function(e,t){a(t)},variant:"fullWidth",children:[Object(H.jsx)(ot.a,{label:"Upcoming",value:"upcoming"}),n.length>0&&Object(H.jsx)(ot.a,{label:"Right now",value:"inProgress"}),t.length>0&&Object(H.jsx)(ot.a,{label:"Past month",value:"past"})]}),Object(H.jsx)(Qr,{competitions:o})]})},Xr=n(456),Kr=n.n(Xr);const ea=Object(K.a)(Yr||(Yr=Object(X.a)(["\n  query Competitions($filter: String!) {\n    competitions(filter: $filter, limit: 10) {\n      id\n      name\n    }\n  }\n"])));var ta=function(e){let{onChange:t,TextFieldProps:n={}}=e;const[i,r]=Object(c.useState)(""),a=gt(i,250),{data:o,loading:s}=Object(ee.b)(ea,{variables:{filter:a}}),l=o?o.competitions:[];return Object(H.jsx)(Ot.a,{clearOnBlur:!0,blurOnSelect:!0,options:l,getOptionLabel:e=>e.name,loading:s,onInputChange:function(e,t,n){"input"===n&&r(t)},value:null,onChange:function(e,n,c){"selectOption"===c&&t(n)},renderInput:e=>Object(H.jsx)(ft.a,{...e,...n})})};var na=function(e){let{upcoming:t,inProgress:n,past:i}=e;const r=Object(Z.g)(),[a,o]=Object(c.useState)(!1),s=Object(c.useRef)(null);return Object(H.jsxs)(te.a,{container:!0,alignItems:"center",justifyContent:"flex-end",spacing:1,children:[n.length>0&&Yc&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Mt.a,{title:"Find nearest competition",placement:"top",children:Object(H.jsx)(Tt.a,{onClick:()=>{ci(n).then((e=>{r("/competitions/".concat(e.id))}))},"aria-label":"Nearest competition",size:"large",children:Object(H.jsx)(Kr.a,{})})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Mt.a,{title:"Search competitions",placement:"top",children:Object(H.jsx)(Tt.a,{onClick:()=>o(!a),size:"large",children:Object(H.jsx)(lr.a,{})})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(ne.a,{in:a,onEntered:()=>s.current.focus(),unmountOnExit:!0,children:Object(H.jsx)("div",{children:Object(H.jsx)(ta,{onChange:e=>r("/competitions/".concat(e.id)),TextFieldProps:{fullWidth:!0,placeholder:"Search",variant:"outlined",size:"small",inputRef:s,onBlur:()=>o(!1),style:{width:250}}})})})})]})};var ca,ia=function(e){let{title:t,records:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(De.a,{disableSticky:!0,children:t}),Object(H.jsx)(rt.a,{sx:{maxHeight:300,overflowY:"auto"},children:n.map((e=>Object(H.jsxs)(je.a,{button:!0,component:a.b,to:"/competitions/".concat(e.result.round.competitionEvent.competition.id,"/rounds/").concat(e.result.round.id),children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Nn,{recordTag:e.tag})}),Object(H.jsx)(be.a,{primary:Object(H.jsxs)("span",{children:[Object(H.jsx)("span",{children:"".concat(e.result.round.competitionEvent.event.name," ").concat(e.type," of ")}),Object(H.jsx)(rt.a,{component:"span",sx:{fontWeight:600},children:"".concat(nn(e.attemptResult,e.result.round.competitionEvent.event.id))})]}),secondary:"".concat(e.result.person.name," from ").concat(e.result.person.country.name)})]},e.id)))})]})};const ra=Object(K.a)(ca||(ca=Object(X.a)(["\n  query Competitions($from: Date!) {\n    competitions(from: $from) {\n      id\n      name\n      startDate\n      endDate\n      startTime\n      endTime\n      venues {\n        id\n        country {\n          iso2\n        }\n      }\n    }\n    recentRecords {\n      id\n      tag\n      type\n      attemptResult\n      result {\n        id\n        person {\n          id\n          name\n          country {\n            iso2\n            name\n          }\n        }\n        round {\n          id\n          competitionEvent {\n            id\n            event {\n              id\n              name\n            }\n            competition {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var aa=function(){const{data:e,loading:t,error:n}=Object(ee.b)(ra,{variables:{from:ui()}});if(t&&!e)return Object(H.jsx)(re,{});if(n)return Object(H.jsx)(ae.a,{error:n});const{recentRecords:c}=e,i=Object($t.h)(e.competitions,[e=>e.startTime,e=>e.endTime]),r=i.filter(Kc),a=i.filter(ei),o=i.filter(Xc).reverse();return Object(H.jsx)(rt.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3},display:"flex",minHeight:"100%"},children:Object(H.jsxs)(te.a,{container:!0,spacing:2,direction:"column",sx:{flexGrow:1},children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(na,{upcoming:r,inProgress:a,past:o})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ne.a,{children:Object(H.jsx)(Zr,{upcoming:r,inProgress:a,past:o})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ne.a,{children:Object(H.jsx)(ia,{title:"Recent records",records:c})})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),Object(H.jsx)(te.a,{item:!0,sx:{width:"100%"},children:Object(H.jsx)(Ur,{})})]})})},oa=n.p+"static/media/logo.513c1572.svg",sa=n(777),la=n(805),da=n(172),ja=n(457),ua=n.n(ja);var ba=function(){const e=Object(da.a)(),t=Object(Z.g)();return Object(H.jsxs)(zn.a,{onClick:function(){S(),t("/"),e.resetStore()},children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(ua.a,{})}),"Sign out"]})},ma=n(458),pa=n.n(ma),ha=n(459),xa=n.n(ha);var Oa=function(e){let{user:t}=e;const[n,i]=Object(c.useState)(!1),r=Object(c.useRef)();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Tt.a,{ref:r,onClick:()=>i(!0),size:"small",children:Object(H.jsx)(la.a,{alt:t.name,src:t.avatar.thumbUrl,size:"small"})}),Object(H.jsxs)(Wn.a,{open:n,onClick:()=>i(!1),onClose:()=>i(!1),anchorEl:r.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},sx:{minWidth:200},children:[Object(H.jsxs)(zn.a,{component:a.b,to:"/account",children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(pa.a,{})}),"Account"]}),Object(H.jsxs)(zn.a,{component:a.b,to:"/my-competitions",children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(xa.a,{})}),"My competitions"]}),Object(H.jsx)(sa.a,{sx:{my:1}}),Object(H.jsx)(ba,{})]})]})};var fa=function(e){let{currentUser:t,loaded:n,children:c}=e;return Object(H.jsxs)(rt.a,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(H.jsx)(vc.a,{children:Object(H.jsxs)(te.a,{container:!0,spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsxs)(rt.a,{component:a.b,to:"/",sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit"},children:[Object(H.jsx)("img",{src:oa,alt:"wca logo",height:"40"}),Object(H.jsx)(Me.a,{variant:"h6",sx:{ml:1},children:"WCA Live"})]})}),Object(H.jsx)(te.a,{item:!0,sx:{flexGrow:1}}),n&&(t?Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Oa,{user:t})}):Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{variant:"outlined",size:"small",color:"inherit",component:a.b,to:"/sign-in",children:"Sign in"})}))]})}),Object(H.jsx)(rt.a,{sx:{flexGrow:1},children:c})]})},ga=n(460),va=n.n(ga);function ya(e){return/^\d+-\d{6}$/.test(e)}var wa,Ca=function(e){let{onSubmit:t,disabled:n=!1}=e;const[i,r]=Object(c.useState)("");return Object(H.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(i)},children:Object(H.jsx)(ft.a,{variant:"outlined",label:"Code",value:i,onChange:e=>r(e.target.value),disabled:n,InputProps:{endAdornment:Object(H.jsx)(Tt.a,{type:"submit",disabled:n||!ya(i),size:"large",children:Object(H.jsx)(va.a,{})})}})})};const Ia=Object(K.a)(wa||(wa=Object(X.a)(["\n  mutation SignIn($code: String!) {\n    signIn(input: { code: $code }) {\n      token\n    }\n  }\n"])));var ka=function(){const e=xe(),t=Object(da.a)(),n=Object(Z.g)(),[c,{loading:i}]=Object(pe.a)(Ia,{onError:e,onCompleted:e=>{let{signIn:{token:c}}=e;k(c),n("/"),t.resetStore()}});return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use a one-time code"}),Object(H.jsx)(Me.a,{color:"textSecondary",align:"center",children:"Generate a code on your trusted device and type here to establish a session without going through the WCA website. This strategy is useful for scoretaking on an unknown machine."})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ca,{onSubmit:function(e){c({variables:{code:e}})},disabled:i})})]})};var Sa=function(){return Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Use your WCA account"}),Object(H.jsxs)(Me.a,{color:"textSecondary",align:"center",children:["If you don't have a WCA account, you can create one"," ",Object(H.jsx)(gc.a,{href:Ke("/users/sign_up"),underline:"hover",children:"here"}),"."]})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{size:"large",variant:"contained",color:"primary",href:Xe("/oauth/authorize"),children:"Sign in"})})]})};var Ea=function(){const e=Object(z.a)((e=>e.breakpoints.up("md")));return Object(H.jsx)(rt.a,{sx:{height:"100%",p:4},children:Object(H.jsxs)(te.a,{container:!0,alignItems:"center",sx:{height:"100%"},spacing:4,children:[Object(H.jsx)(te.a,{item:!0,xs:12,md:!0,children:Object(H.jsx)(Sa,{})}),e&&Object(H.jsx)(sa.a,{orientation:"vertical",flexItem:!0}),Object(H.jsx)(te.a,{item:!0,xs:12,md:!0,children:Object(H.jsx)(ka,{})})]})})},Aa=n.p+"static/media/about.91bf4591.svg";var Pa=function(){return Object(H.jsx)(rt.a,{sx:{py:{xs:2,md:3},px:{xs:1,md:3}},children:Object(H.jsxs)(te.a,{container:!0,spacing:2,direction:"column",children:[Object(H.jsx)(te.a,{item:!0,sx:{textAlign:"center"},children:Object(H.jsx)("img",{src:Aa,alt:"about",height:"250"})}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"About"}),Object(H.jsxs)(Me.a,{gutterBottom:!0,children:["WCA Live is an official platform for running"," ",Object(H.jsx)(gc.a,{href:"https://en.wikipedia.org/wiki/Speedcubing",underline:"hover",children:"Speedcubing"})," ","competitions governed by the"," ",Object(H.jsx)(gc.a,{href:"https://www.worldcubeassociation.org/about",underline:"hover",children:"World Cube Association"}),"."]}),Object(H.jsx)(Me.a,{gutterBottom:!0,children:"Every weekend hundreds of competitors gather at speedcubing competitions all around the world. They aim to get podiums, break records and outperform their mates, but most importantly to enjoy spending time with their friends and meet new members of the community. There are up to 17 official events held at every competition - the well known 3x3x3 Cube, solved with both hands, one hand, blindfolded, but also less known types of puzzles like cubes from 2x2x2 up to 7x7x7, a tetrahedron and dodecahedron cubes and more!"}),Object(H.jsxs)(Me.a,{children:["During the competition WCA Live is the place where the results are entered and managed. In every event a competitor waits for his cube to be mixed up, then performs each of his official attempts under the supervision of a judge (who makes sure all the"," ",Object(H.jsx)(gc.a,{href:"https://www.worldcubeassociation.org/regulations/",underline:"hover",children:"WCA rules"})," ","are fallowed). All attempt results are put down on a piece of paper as the competitor does them, then a scoretaker enters them to the system to eventually build up competitors ranking for the given round. After a competition all the competitor results end up in"," ",Object(H.jsx)(gc.a,{href:"https://www.worldcubeassociation.org/results/rankings",underline:"hover",children:"the WCA rankings"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Get inspired"}),Object(H.jsxs)(Me.a,{children:["If you want to get a better feeling of how WCA competitions look and the great community around them, there's a great documentary available called"," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/1oZY2e25VUw",underline:"hover",children:"Why We Cube"})," ","and"," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/DHgC2Ru7_MQ",underline:"hover",children:"many"})," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/8AwlVDT3jo4",underline:"hover",children:"other"})," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/ZSGOVRhYoWU",underline:"hover",children:"inspiring"})," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/sFc-6QNoh8s",underline:"hover",children:"stories"})," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/TOJ2dXahS1Q",underline:"hover",children:"out"})," ",Object(H.jsx)(gc.a,{href:"https://youtu.be/nXuINN-Ah4Y",underline:"hover",children:"there"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Technical details"}),Object(H.jsxs)(Me.a,{gutterBottom:!0,children:["The platform is designed specifically for result management and is just a part of the bigger picture. It communicates with other tools using"," ",Object(H.jsx)(gc.a,{href:"https://github.com/thewca/wcif/blob/master/specification.md",underline:"hover",children:"a standardized format"}),", which allows the community to build tiny tools focused on specific competition tasks, following the"," ",Object(H.jsx)(gc.a,{href:"https://en.wikipedia.org/wiki/Unix_philosophy",underline:"hover",children:"Unix Philosophy"}),". See"," ",Object(H.jsx)(gc.a,{href:"https://github.com/thewca/wcif/blob/master/vision.md",underline:"hover",children:"this vision document"})," ","for more details."]}),Object(H.jsxs)(Me.a,{gutterBottom:!0,children:["WCA Live is an open source project, so feel free to check out the specifics on"," ",Object(H.jsx)(gc.a,{href:"https://github.com/thewca/wca-live",underline:"hover",children:"GitHub"}),"."]})]}),Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"Contact"}),Object(H.jsxs)(Me.a,{children:["In general prefer to use the"," ",Object(H.jsx)(gc.a,{href:"https://www.worldcubeassociation.org/contact/website",underline:"hover",children:"WCA contact form"}),", so that your message is directed to the right team. In case of bug reports feel free to submit a"," ",Object(H.jsx)(gc.a,{href:"https://github.com/thewca/wca-live/issues",underline:"hover",children:"GitHub issue"})," ","or contact us directly at"," ",Object(H.jsx)(gc.a,{href:"mailto:software@worldcubeassociation.org",underline:"hover",children:"software@worldcubeassociation.org"}),"."]})]})]})})};function Ta(e){const t=Object(Ge.a)(e.expiresAt),n=Object(Ge.a)(e.insertedAt),c=new Date,i=t-n;return 100-Math.max(t-c,0)/i*100}var Na,Ra=function(e){let{oneTimeCode:t,open:n,onClose:i}=e;const[r,a]=Object(c.useState)(0),o=!!t&&100===Ta(t);return Object(c.useEffect)((()=>{if(n&&t&&!o){function e(){const e=Ta(t);a(e)}const c=setInterval(e,25);return()=>clearInterval(c)}}),[t,o,n]),Object(H.jsxs)(qn.a,{open:n,onClose:i,children:[Object(H.jsx)(_n.a,{children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Me.a,{color:"textSecondary",children:"Navigate to the sign in page on another device and enter the following code."})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Me.a,{variant:"h4",align:"center",children:o?"Expired":t&&t.code})}),Object(H.jsx)(te.a,{item:!0,style:{width:"100%"},children:Object(H.jsx)(ce.a,{variant:"determinate",value:100-r})})]})}),Object(H.jsx)(Gn.a,{children:Object(H.jsx)(me.a,{color:"primary",onClick:()=>i(),children:"Close"})})]})};const Da=Object(K.a)(Na||(Na=Object(X.a)(["\n  mutation GenerateOneTimeCode {\n    generateOneTimeCode {\n      oneTimeCode {\n        id\n        code\n        expiresAt\n        insertedAt\n      }\n    }\n  }\n"])));var Fa=function(){const e=xe(),[t,n]=Object(c.useState)(!1),[i,{data:r,loading:a}]=Object(pe.a)(Da,{onError:e,onCompleted:()=>n(!0)}),o=r?r.generateOneTimeCode.oneTimeCode:null;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:2,children:[Object(H.jsxs)(te.a,{item:!0,children:[Object(H.jsx)(Me.a,{variant:"h5",gutterBottom:!0,children:"One-time code"}),Object(H.jsx)(Me.a,{color:"textSecondary",children:"Generate a temporary code and use it to establish a session on another (hypothetically untrusted) device without going through the WCA website. This strategy is useful for scoretaking on an unknown machine, as you don't have to type any credentials on that machine, just the temporary code."})]}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(me.a,{variant:"contained",color:"primary",disabled:a,onClick:()=>i(),children:"Generate"})})]}),Object(H.jsx)(Ra,{oneTimeCode:o,open:t,onClose:()=>n(!1)})]})};var Ma=function(){return Object(H.jsx)(rt.a,{p:{xs:2,sm:3},children:Object(H.jsx)(Fa,{})})},Wa=n(804);function za(e){switch(e){case"delegate":return"Delegate";case"trainee-delegate":return"Trainee delegate";case"organizer":return"Organizer";case"staff-dataentry":return"Scoretaker";default:return e}}var Ba=function(e){let{title:t,staffMembers:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(De.a,{disableSticky:!0,children:t}),Object(H.jsx)(qr,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;const c=e.competition;return Object(H.jsxs)(je.a,{style:n,button:!0,component:a.b,to:"/admin/competitions/".concat(c.id),children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Re.a,{children:Object(H.jsx)(Jr,{competition:c})})}),Object(H.jsx)(be.a,{primary:c.name,secondary:li(c.startDate,c.endDate)}),Object(H.jsx)(rt.a,{sx:{display:"flex"},children:e.roles.map((e=>Object(H.jsx)(Wa.a,{label:za(e),size:"small",color:"secondary",sx:{fontWeight:500,margin:.5}},e)))})]},c.id)}})]})};var Va,$a=function(e){let{title:t,competitors:n}=e;return Object(H.jsxs)(le.a,{dense:!0,disablePadding:!0,children:[t&&Object(H.jsx)(De.a,{disableSticky:!0,children:t}),Object(H.jsx)(qr,{maxHeight:300,itemHeight:60,items:n,renderItem:(e,t)=>{let{style:n}=t;const c=e.competition;return Object(H.jsxs)(je.a,{style:n,button:!0,component:a.b,to:"/competitions/".concat(c.id,"/competitors/").concat(e.id),children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Jr,{competition:c})}),Object(H.jsx)(be.a,{primary:c.name,secondary:li(c.startDate,c.endDate)})]},c.id)}})]})},Ua=n(832),La=n(834),Ha=n(833),qa=n(462),Ga=n.n(qa),_a=n(461),Ja=n.n(_a);const Qa=Object(K.a)(Va||(Va=Object(X.a)(["\n  mutation ImportCompetition($input: ImportCompetitionInput!) {\n    importCompetition(input: $input) {\n      competition {\n        id\n      }\n    }\n  }\n"])));var Ya,Za=function(e){let{competition:t}=e;const n=Object(s.b)(),c=Object(Z.g)(),i=xe(),[r,{loading:a}]=Object(pe.a)(Qa,{variables:{input:{wcaId:t.wcaId}},onCompleted:e=>{let{importCompetition:{competition:t}}=e;c("/admin/competitions/".concat(t.id))},onError:i});return Object(H.jsxs)(je.a,{button:!0,onClick:function(){n({description:"This will import ".concat(t.name," from the WCA website.")}).then((()=>r()))},disabled:a,children:[Object(H.jsx)(Re.a,{children:Object(H.jsx)(Ja.a,{})}),Object(H.jsx)(be.a,{primary:t.name,secondary:li(t.startDate,t.endDate)})]},t.wcaId)};const Xa=Object(K.a)(Ya||(Ya=Object(X.a)(["\n  query ImportableCompetitions {\n    importableCompetitions {\n      wcaId\n      name\n      startDate\n      endDate\n    }\n  }\n"])));var Ka=function(){const{data:e,loading:t,error:n}=Object(ee.b)(Xa);if(t&&!e)return Object(H.jsx)(re,{});if(n)return Object(H.jsx)(ae.a,{error:n});const{importableCompetitions:c}=e,i=Object($t.h)(c,[e=>e.startDate,e=>e.endDate]);return 0===i.length?Object(H.jsx)(rt.a,{p:2,pt:0,children:Object(H.jsx)(Me.a,{variant:"body2",children:"You have no importable competitions."})}):Object(H.jsx)(le.a,{dense:!0,disablePadding:!0,sx:{width:"100%",maxHeight:300,overflowY:"auto"},children:i.map((e=>Object(H.jsx)(Za,{competition:e},e.wcaId)))})};var eo,to=function(){return Object(H.jsxs)(Ua.a,{TransitionProps:{mountOnEnter:!0},children:[Object(H.jsx)(Ha.a,{expandIcon:Object(H.jsx)(Ga.a,{}),children:Object(H.jsx)(Me.a,{variant:"subtitle2",color:"textSecondary",children:"Importable competitions"})}),Object(H.jsx)(La.a,{sx:{p:0},children:Object(H.jsx)(Ka,{})})]})};const no=Object(K.a)(eo||(eo=Object(X.a)(["\n  query Competitions {\n    currentUser {\n      id\n      staffMembers {\n        id\n        roles\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n      competitors {\n        id\n        competition {\n          id\n          name\n          startDate\n          endDate\n          venues {\n            id\n            country {\n              iso2\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function co(e){return Object($t.h)(e,[e=>e.competition.startDate,e=>e.competition.endDate],["desc","desc"])}var io,ro=function(){const{data:e,loading:t,error:n}=Object(ee.b)(no);if(t&&!e)return Object(H.jsx)(re,{});if(n)return Object(H.jsx)(ae.a,{error:n});const{staffMembers:c,competitors:i}=e.currentUser,r=co(i),a=co(c);return Object(H.jsx)(rt.a,{p:3,children:Object(H.jsxs)(te.a,{container:!0,direction:"column",spacing:3,children:[i.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ne.a,{children:Object(H.jsx)($a,{title:"Competitor at",competitors:r})})}),c.length>0&&Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(Ne.a,{children:Object(H.jsx)(Ba,{title:"Staff member at",staffMembers:a})})}),Object(H.jsx)(te.a,{item:!0,children:Object(H.jsx)(to,{})})]})})};const ao=Object(K.a)(io||(io=Object(X.a)(["\n  query CurrentUser {\n    currentUser {\n      id\n      name\n      avatar {\n        thumbUrl\n      }\n    }\n  }\n"])));var oo=function(){const{data:e,error:t,loading:n}=Object(ee.b)(ao);if(t)return Object(H.jsx)(ae.a,{error:t});const c=!n||!!e,i=e?e.currentUser:null;return Object(H.jsxs)(fa,{currentUser:i,loaded:c,children:[n&&Object(H.jsx)(re,{}),Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"",element:Object(H.jsx)(aa,{})}),Object(H.jsx)(Z.b,{path:"sign-in",element:Object(H.jsx)(Ea,{})}),Object(H.jsx)(Z.b,{path:"about",element:Object(H.jsx)(Pa,{})}),i&&Object(H.jsx)(Z.b,{path:"my-competitions",element:Object(H.jsx)(ro,{})}),i&&Object(H.jsx)(Z.b,{path:"account",element:Object(H.jsx)(Ma,{})}),c&&Object(H.jsx)(Z.b,{path:"*",element:Object(H.jsx)(Z.a,{to:"/"})})]})]})};var so=function(){return Object(H.jsxs)(Z.d,{children:[Object(H.jsx)(Z.b,{path:"/competitions/:competitionId/*",element:Object(H.jsx)(Fr,{})}),Object(H.jsx)(Z.b,{path:"/admin/competitions/:competitionId/*",element:Object(H.jsx)(Lc,{})}),Object(H.jsx)(Z.b,{path:"/*",element:Object(H.jsx)(oo,{})})]})};var lo=function(){return Object(H.jsx)(a.a,{children:Object(H.jsx)(l.a,{client:W,children:Object(H.jsx)(Y.a,{injectFirst:!0,children:Object(H.jsx)(Q,{children:Object(H.jsx)(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(H.jsxs)(s.a,{children:[Object(H.jsx)(o.a,{}),Object(H.jsx)(so,{})]})})})})})})};const jo=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function uo(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}!function(){const e=window.location.hash;if(e.startsWith("#token=")){k(e.replace("#token=","")),window.history.replaceState({},document.title,window.location.pathname+window.location.search)}}();Object(r.createRoot)(document.getElementById("root")).render(Object(H.jsx)(i.a.StrictMode,{children:Object(H.jsx)(lo,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/service-worker.js");jo?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):uo(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):uo(t,e)}))}}()},86:function(e,t,n){"use strict";var c=n(480),i=(n(1),n(0));t.a=function(e){let{eventId:t,small:n=!1,...r}=e;return Object(i.jsx)(c.a,{component:"span",className:"cubing-icon event-".concat(t),sx:{color:e=>"dark"===e.palette.mode?"#fff":"rgba(0, 0, 0, 0.54)",fontSize:n?16:24},...r})}}},[[688,1,2]]]);